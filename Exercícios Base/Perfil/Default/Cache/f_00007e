{"version":3,"file":"chunk-frameworks.js","sources":["app/assets/modules/github/blob-anchor.ts","app/assets/modules/github/range.ts","app/assets/modules/github/cookies.ts","app/assets/modules/github/octolytics-utils.ts","app/assets/modules/github/behaviors/octolytics-tracking.ts","app/assets/modules/github/updatable-content.ts","app/assets/modules/github/text.ts","app/assets/modules/github/code-editor.ts","app/assets/modules/github/filter-sort.ts","app/assets/modules/github/fuzzy-filter.ts","app/assets/modules/github/sso.ts","app/assets/modules/github/throttled-input.ts","app/assets/modules/github/sticky-scroll-into-view.ts","app/assets/modules/github/hydro-tracking.ts","app/assets/modules/github/jump-to/page-views.ts","app/assets/modules/github/history.ts","app/assets/modules/github/behaviors/pjax/prefetch.ts","app/assets/modules/github/analytics-overrides.ts","app/assets/modules/github/form.ts","app/assets/modules/github/diffs/linkable-line-number.ts","app/assets/modules/github/fetch.ts","app/assets/modules/github/navigation.ts","app/assets/modules/github/dimensions.ts","app/assets/modules/github/notifications/v2/update-notification-states.ts","app/assets/modules/github/eventloop-tasks.ts","app/assets/modules/github/iterables.ts","app/assets/modules/github/sudo.ts","app/assets/modules/github/behaviors/details.ts","app/assets/modules/github/timezone.ts","node_modules/@github/webauthn-json/dist/main/webauthn-json.js","app/assets/modules/github/behaviors/characters-remaining.ts","app/assets/modules/github/find-next-element-sibling.ts","app/assets/modules/github/webauthn-support-level.ts","app/assets/modules/github/aria-live.ts","app/assets/modules/github/behaviors/pjax.ts","app/assets/modules/github/subscription.ts","app/assets/modules/github/scrollto.ts","app/assets/modules/github/visible.ts","node_modules/@github/memoize/dist/index.js","app/assets/modules/github/html-safe.ts","app/assets/modules/github/parse-html.ts","app/assets/modules/github/onfocus.ts","app/assets/modules/github/details-dialog.ts","app/assets/modules/github/remote-submit.ts","app/assets/modules/github/behaviors/ajax-error.ts","app/assets/modules/github/has-interactions.ts","node_modules/scroll-anchoring/dist/scroll-anchoring.esm.js","app/assets/modules/github/document-ready.ts","app/assets/modules/github/behaviors/hash-change.ts","app/assets/modules/github/perform-transition.ts","app/assets/modules/github/behaviors/html-validation.ts","node_modules/fzy.js/index.js","app/assets/modules/github/fuzzy-list-element.ts","app/assets/modules/github/platform-toggle.ts","app/assets/modules/github/behaviors/pjax/head.ts","app/assets/modules/github/fragment-target.ts","app/assets/modules/github/features.ts","app/assets/modules/github/proxy-site-detection.ts","app/assets/modules/github/stats.ts","app/assets/modules/github/behaviors/sticky.ts","app/assets/modules/github/jump-to/ranking.ts","app/assets/modules/github/safe-storage.ts","app/assets/modules/github/session-storage.ts","app/assets/modules/github/behaviors/task-list.ts","app/assets/modules/github/settings/actions-policy-form.ts","app/assets/modules/github/prefetch-codespace-location.ts","app/assets/modules/github/behaviors/inline-comment.ts","app/assets/modules/github/diffs/diff-range.ts","app/assets/modules/github/diffs/helpers.ts","app/assets/modules/github/diffs/prose-diff.ts"],"sourcesContent":["interface BlobOffset {\n  // Line number\n  // Lines start at 1.\n  line: number\n\n  // Optional column number.\n  // Like lines, columns are 1-indexed.\n  column: number | null\n}\n\nexport interface BlobRange {\n  // Starting offset of range.\n  start: BlobOffset\n\n  // End offset of range.\n  // End offset may be the same as the start. This indicates a collapsed range.\n  // Should always be initialized to a value that is equal or greater than the\n  // start range such the range is always in ascending order. Reversed ranges\n  // have undefined behavior.\n  end: BlobOffset\n}\n\n// Inverse of `formatBlobRange`.\n//\n// Examples\n//\n//   parseBlobRange(\"#L3\")\n//   // => {start: {line: 3}}\n//\n//   parseBlobRange(\"L3-L5\")\n//   // => {start: {line: 3}, end: {line: 5}}\n//\n//   parseBlobRange(\"\")\n//   // => null\nexport function parseBlobRange(str: string): BlobRange | undefined {\n  const lines = str.match(/#?(?:L)(\\d+)((?:C)(\\d+))?/g)\n  if (!lines) {\n    return\n  } else if (lines.length === 1) {\n    const offset = parseBlobOffset(lines[0])\n    if (!offset) return\n    return Object.freeze({start: offset, end: offset})\n  } else if (lines.length === 2) {\n    const startOffset = parseBlobOffset(lines[0])\n    const endOffset = parseBlobOffset(lines[1])\n    if (!startOffset || !endOffset) return\n\n    return ascendingBlobRange(\n      Object.freeze({\n        start: startOffset,\n        end: endOffset\n      })\n    )\n  } else {\n    return\n  }\n}\n\n// Inverse of `parseBlobRange`.\n//\n// Examples\n//\n//   formatBlobRange({start: {line: 3}})\n//   // => \"L3\"\n//\n//   formatBlobRange({start: {line: 3}, end: {line: 5}})\n//   // => \"L3-L5\"\n//\n//   formatBlobRange({start: {line: 3, column: 1}, end: {line: 5, column: 5}})\n//   // => \"L3C1-L5C5\"\nexport function formatBlobRange(blobRange: BlobRange): string {\n  const {start, end} = ascendingBlobRange(blobRange)\n\n  if (start.column != null && end.column != null) {\n    return `L${start.line}C${start.column}-L${end.line}C${end.column}`\n  } else if (start.line === end.line) {\n    return `L${start.line}`\n  } else {\n    return `L${start.line}-L${end.line}`\n  }\n}\n\n// Returns a String containing the file prefix with trailing dash.\n//\n// Examples\n//\n//   parseAnchorPrefix(\"#file-zshrc-L3\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"file-zshrc-L3-L5\")\n//   // => \"file-zshrc-\"\n//\n//   parseAnchorPrefix(\"\")\n//   // => \"\"\nfunction parseAnchorPrefix(str: string): string {\n  const match = str.match(/(file-.+?-)L\\d+?/i)\n  return match ? match[1] : ''\n}\n\nexport type AnchorInfo = {\n  blobRange: BlobRange\n  anchorPrefix: string\n}\n\n// Examples\n//\n//   parseFileAnchor(\"#file-zshrc-L3\")\n//   // => { blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"file-zshrc-L3-L5\")\n//   // => { blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\" }\n//\n//   parseFileAnchor(\"\")\n//   // => { blobRange: null, anchorPrefix: undefined }\nexport function parseFileAnchor(str: string): AnchorInfo {\n  const blobRange = parseBlobRange(str)!\n  const anchorPrefix = parseAnchorPrefix(str)\n  return {blobRange, anchorPrefix}\n}\n\n// Formats line number range pair as an anchor String.\n//\n// Examples\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"\"})\n//   // => \"#L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3, column: 1}, end: {line: 5, column: 5}}, anchorPrefix: \"\"})\n//   // => \"#L3C1-L5C5\"\n//\n//   formatBlobRangeAnchor({blobRange: {start: {line: 3}, end: {line: 5}}, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#file-zshrc-L3-L5\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"\"})\n//   // => \"#\"\n//\n//   formatBlobRangeAnchor({blobRange: null, anchorPrefix: \"file-zshrc-\"})\n//   // => \"#\"\nexport function formatBlobRangeAnchor({anchorPrefix, blobRange}: AnchorInfo): string {\n  if (!blobRange) return '#'\n  return `#${anchorPrefix}${formatBlobRange(blobRange)}`\n}\n\nfunction parseBlobOffset(str: string): BlobOffset | null {\n  const lineMatch = str.match(/L(\\d+)/)\n  const columnMatch = str.match(/C(\\d+)/)\n  if (lineMatch) {\n    return Object.freeze({\n      line: parseInt(lineMatch[1]),\n      column: columnMatch ? parseInt(columnMatch[1]) : null\n    })\n  } else {\n    return null\n  }\n}\n\nexport function DOMRangeFromBlob(\n  blobRange: BlobRange,\n  getLineElement: (line: number) => Node | null\n): Range | undefined {\n  const [startContainer, _startOffset] = findRangeOffset(blobRange.start, true, getLineElement)\n  const [endContainer, _endOffset] = findRangeOffset(blobRange.end, false, getLineElement)\n  if (!startContainer || !endContainer) return\n\n  // Treat -1 as full line selection\n  let startOffset = _startOffset\n  let endOffset = _endOffset\n  if (startOffset === -1) startOffset = 0\n  if (endOffset === -1) endOffset = endContainer.childNodes.length\n  if (!startContainer.ownerDocument) throw new Error(`DOMRange needs to be inside document`)\n\n  const range = startContainer.ownerDocument.createRange()\n  range.setStart(startContainer, startOffset)\n  range.setEnd(endContainer, endOffset)\n  return range\n}\n\nfunction findRangeOffset(\n  offset: BlobOffset,\n  lookAhead: boolean,\n  getLineElement: (n: number) => Node | null\n): [Node | null, number] {\n  const error: [null, number] = [null, 0]\n\n  const lineElement = getLineElement(offset.line)\n  if (!lineElement) return error\n\n  if (offset.column == null) {\n    return [lineElement, -1]\n  }\n\n  let column = offset.column - 1\n\n  const textNodes = getAllTextNodes(lineElement)\n  for (let i = 0; i < textNodes.length; i++) {\n    const textNode = textNodes[i]\n\n    // TODO: length might be buggy with emoji\n    const nextC = column - (textNode.textContent || '').length\n\n    if (nextC === 0) {\n      const nextTextNode = textNodes[i + 1]\n      if (lookAhead && nextTextNode) {\n        return [nextTextNode, 0]\n      } else {\n        return [textNode, column]\n      }\n    } else if (nextC < 0) {\n      return [textNode, column]\n    }\n\n    column = nextC\n  }\n\n  return error\n}\n\n// Get a flat list of text nodes in depth first order.\nfunction getAllTextNodes(el: Node): Node[] {\n  if (el.nodeType === Node.TEXT_NODE) {\n    return [el]\n  }\n  if (!el.childNodes || !el.childNodes.length) return []\n  let list: Node[] = []\n  for (const node of el.childNodes) {\n    list = list.concat(getAllTextNodes(node))\n  }\n  return list\n}\n\n// Sorts range start and end offsets to be in ascending order.\nfunction ascendingBlobRange(range: BlobRange): BlobRange {\n  const offsets = [range.start, range.end]\n  offsets.sort(compareBlobOffsets)\n\n  if (offsets[0] === range.start && offsets[1] === range.end) {\n    return range\n  } else {\n    return Object.freeze({\n      start: offsets[0],\n      end: offsets[1]\n    })\n  }\n}\n\n// Compare line offsets. May be used with Array.sort\nfunction compareBlobOffsets(a: BlobOffset, b: BlobOffset): number {\n  if (a.line === b.line && a.column === b.column) {\n    return 0\n  } else if (a.line === b.line && typeof a.column === 'number' && typeof b.column === 'number') {\n    return a.column - b.column\n  } else {\n    return a.line - b.line\n  }\n}\n","// More robust version of Range.surroundContents().\nexport function surroundContents(range: Range, newNode: Node) {\n  newNode.appendChild(range.extractContents())\n  range.insertNode(newNode)\n}\n","interface Cookie {\n  key: string\n  value: string\n}\n\n// Retrieve existing cookies by name.\nexport function getCookies(name: string): Cookie[] {\n  const cookies = []\n  for (const cookie of readCookies()) {\n    const [key, value] = cookie.trim().split('=')\n    if (name === key && typeof value !== 'undefined') {\n      cookies.push({key, value})\n    }\n  }\n  return cookies\n}\n\nfunction readCookies(): string[] {\n  try {\n    return document.cookie.split(';')\n  } catch {\n    // Cookie access disabled.\n    return []\n  }\n}\n\n// Set a given cookie with sensible defaults like secure.\nexport function setCookie(\n  name: string,\n  value: string,\n  expiration: string | null = null,\n  strictDomain = false,\n  samesite = 'lax'\n) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = expiration ? `; expires=${expiration}` : ''\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=${value}; path=/; domain=${domain}${expire}${secure}; samesite=${samesite}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n\n// Delete a given cookie with sensible defaults like secure.\n// This sets the expires value to a second ago to delete the cookie.\nexport function deleteCookie(name: string, strictDomain = false) {\n  let domain = document.domain\n  if (domain == null) {\n    throw new Error('Unable to get document domain')\n  }\n\n  // Share cookies with test environments.\n  if (domain.endsWith('.github.com')) {\n    domain = 'github.com'\n  }\n\n  const time = new Date().getTime()\n  const expiration = new Date(time - 1).toUTCString()\n  const secure = location.protocol === 'https:' ? '; secure' : ''\n  const expire = `; expires=${expiration}`\n  if (strictDomain === false) {\n    domain = `.${domain}`\n  }\n  try {\n    document.cookie = `${name}=''; path=/; domain=${domain}${expire}${secure}`\n  } catch {\n    // Cookie access disabled.\n  }\n}\n","import {getCookies} from './cookies'\nexport function getOctolyticsId() {\n  let clientId = ''\n  const cookies = getCookies('_octo')\n  const clientIds = []\n  for (const cookie of cookies) {\n    const splitOut = cookie.value.split('.')\n    const first = splitOut.shift()\n    if (first === 'GH1' && splitOut.length > 1) {\n      const version = (splitOut.shift() || '').split('-')\n      if (version.length === 1) {\n        version[1] = '1'\n      }\n      const numberVersion = [Number(version[0]), Number(version[1])]\n      clientId = splitOut.join('.')\n      clientIds.push([numberVersion, clientId])\n    }\n  }\n  clientId = ''\n  if (clientIds.length > 0) {\n    clientId = String(clientIds.sort().reverse()[0][1])\n  }\n  return clientId\n}\n","import {on} from 'delegated-events'\nimport {setCookie} from '../cookies'\n\ntype DisplaySet = Array<[string, number]>\n\ntype EventContext = {\n  display_set?: DisplaySet\n  query?: string\n}\n\ntype EventDimensions = {\n  actor_id?: number\n  display_set?: DisplaySet\n  query?: string\n  scope_id?: number\n  scope_type?: string\n  session_id?: string\n  target_id?: number\n  target_type?: string\n  target_scope?: string\n}\n\ntype EventMeasures = {\n  client_rank?: number\n  display_count?: number\n  filter_count?: number\n  server_rank?: number\n  result_count?: number\n}\n\nexport type EventPayload = {\n  timestamp?: number\n  event_type?: string\n  context?: EventContext\n  dimensions?: EventDimensions\n  measures?: EventMeasures\n}\n\nexport function sendOctoEvent(payload: EventPayload) {\n  if (!window._octo) {\n    return\n  }\n\n  const unixTimeInSeconds = Math.floor(new Date().getTime() / 1000)\n  payload.timestamp = unixTimeInSeconds\n  const metaSelector = 'meta[name=\"octolytics-event-url\"]'\n  if (document.head && document.head.querySelector(metaSelector)) {\n    const urlMetaTag = document.head.querySelector<HTMLMetaElement>(metaSelector)!\n    const url = urlMetaTag.content\n    const data = JSON.stringify(payload)\n    if (navigator.sendBeacon) {\n      navigator.sendBeacon(url, data)\n    }\n  }\n}\n\nexport function generateOctolyticsId() {\n  const time = new Date().getTime()\n  const clientId = `${Math.round(Math.random() * (Math.pow(2, 31) - 1))}.${Math.round(time / 1000)}`\n  const cookie = `GH1.1.${clientId}`\n  const expiration = new Date(time + 1 * 365 * 86400 * 1000).toUTCString()\n  setCookie('_octo', cookie, expiration)\n  return clientId\n}\n\non('click', '[data-octo-click]', function (event) {\n  if (!window._octo) {\n    return\n  }\n\n  const el = event.currentTarget\n  const eventType = el instanceof HTMLElement ? el.getAttribute('data-octo-click') || '' : ''\n  const payload: Octolytics.EventPayload = {}\n  payload['event_type'] = eventType\n  const dimensions: Octolytics.Dimension = {}\n  const measures: Octolytics.Measure = {}\n  const context: Octolytics.Context = {}\n\n  let dimensionsList: string[] = []\n\n  if (el instanceof HTMLElement && el.hasAttribute('data-octo-dimensions')) {\n    dimensionsList = (el.getAttribute('data-octo-dimensions') || '').split(',')\n  }\n\n  const metaTags = document.head ? document.head.querySelectorAll('meta[name^=\"octolytics-\"]') : []\n  for (const metaTag of metaTags) {\n    if (!(metaTag instanceof HTMLMetaElement)) continue\n\n    // octolytics-dimension-request_id => request_id\n    if (metaTag.name.startsWith('octolytics-dimension-')) {\n      const dimension = metaTag.name.replace(/^octolytics-dimension-/, '')\n      dimensions[dimension] = metaTag.content\n    } else if (metaTag.name.startsWith('octolytics-measure-')) {\n      const measure = metaTag.name.replace(/^octolytics-measure-/, '')\n      measures[measure] = metaTag.content\n    } else if (metaTag.name.startsWith('octolytics-context-')) {\n      const key = metaTag.name.replace(/^octolytics-context-/, '')\n      context[key] = metaTag.content\n\n      // octolytics-actor-login => actor_login\n    } else if (metaTag.name.startsWith('octolytics-actor-')) {\n      const dimension = metaTag.name.replace(/^octolytics-/, '').replace(/-/g, '_')\n      dimensions[dimension] = metaTag.content\n\n      // octolytics-host => host\n    } else if (metaTag.name.startsWith('octolytics-')) {\n      const key = metaTag.name.replace(/^octolytics-/, '').replace(/-/g, '_')\n      payload[key] = metaTag.content\n    }\n  }\n\n  const visitorMeta = document.querySelector('meta[name=visitor-payload]')\n  if (visitorMeta instanceof HTMLMetaElement) {\n    const visitorHash = JSON.parse(atob(visitorMeta.content))\n    Object.assign(dimensions, visitorHash)\n  }\n\n  if (el instanceof HTMLElement && el.hasAttribute('data-ga-click')) {\n    const gaEvent = el.getAttribute('data-ga-click') || ''\n    const parts = gaEvent.split(',').map(str => str.trim())\n    dimensions.category = parts[0]\n    dimensions.action = parts[1]\n  }\n\n  for (const dimensionPair of dimensionsList) {\n    const parts = dimensionPair.split(':')\n    const key = parts.shift()\n    if (key) dimensions[key] = parts.join(':')\n  }\n\n  payload.dimensions = dimensions\n  payload.measures = measures\n  payload.context = context\n  sendOctoEvent(payload)\n})\n","import {hasInteractions} from './has-interactions'\nimport {observe} from 'selector-observer'\nimport {parseHTML} from './parse-html'\nimport {preserveAnchorNodePosition} from 'scroll-anchoring'\n\nconst pendingRequests = new WeakMap<HTMLElement, AbortController>()\nexport const staleRecords: {[key: string]: string} = {}\n\n// Fetch and replace container with its data-url.\n//\n// This replacement uses conservative checks to safely replace the element.\n// If a user is interacting with any element within the container, the\n// replacement will be aborted.\nexport async function updateContent(el: HTMLElement): Promise<void> {\n  if (pendingRequests.get(el)) return\n\n  const retainFocus = el.hasAttribute('data-retain-focus')\n  const url = el.getAttribute('data-url')!\n  const controller = new AbortController()\n  pendingRequests.set(el, controller)\n\n  try {\n    const response = await fetch(url, {\n      signal: controller.signal,\n      headers: {\n        Accept: 'text/html',\n        'X-Requested-With': 'XMLHttpRequest'\n      }\n    })\n    if (!response.ok) return\n    const data = await response.text()\n    if (hasInteractions(el, retainFocus)) {\n      // eslint-disable-next-line no-console\n      console.warn('Failed to update content with interactions', el)\n      return\n    }\n    staleRecords[url] = data\n    return replace(el, data, retainFocus)\n  } catch {\n    // Ignore failed request.\n  } finally {\n    pendingRequests.delete(el)\n  }\n}\n\n// Abort any in-flight replacements and replace element without any interaction checks.\nexport async function replaceContent(el: HTMLElement, data: string, wasStale = false): Promise<void> {\n  const controller = pendingRequests.get(el)\n  controller?.abort()\n\n  const updatable = el.closest('.js-updatable-content[data-url], .js-updatable-content [data-url]')\n  if (!wasStale && updatable && updatable === el) {\n    staleRecords[updatable.getAttribute('data-url')!] = data\n  }\n  return replace(el, data)\n}\n\nfunction replace(el: HTMLElement, data: string, retainFocus = false): Promise<void> {\n  return preserveAnchorNodePosition(document, () => {\n    const newContent = parseHTML(document, data.trim())\n    const elementToRefocus =\n      retainFocus && el.ownerDocument && el === el.ownerDocument.activeElement ? newContent.querySelector('*') : null\n\n    const detailsIds = Array.from(el.querySelectorAll('details[open][id]')).map(element => element.id)\n    if (el.tagName === 'DETAILS' && el.id && el.hasAttribute('open')) detailsIds.push(el.id)\n\n    // Check the elements we are about replace to see if we want to preserve the scroll position of any of them\n    for (const preserveElement of el.querySelectorAll('.js-updatable-content-preserve-scroll-position')) {\n      const id = preserveElement.getAttribute('data-updatable-content-scroll-position-id')!\n      heights.set(id, preserveElement.scrollTop)\n    }\n\n    for (const id of detailsIds) {\n      const details = newContent.querySelector(`#${id}`)\n      if (details) details.setAttribute('open', '')\n    }\n\n    el.replaceWith(newContent)\n    if (elementToRefocus instanceof HTMLElement) {\n      elementToRefocus.focus()\n    }\n  })\n}\n\nconst heights = new Map()\nobserve('.js-updatable-content-preserve-scroll-position', {\n  constructor: HTMLElement,\n  add(el) {\n    // When element is added to the DOM, check the map for the last scroll position we have on record for it.\n    const id = el.getAttribute('data-updatable-content-scroll-position-id')\n    if (!id) return\n    const height = heights.get(id)\n    if (height == null) return\n\n    el.scrollTop = height\n  }\n})\n","// Gets the length of code-points from a String.\n//\n// This is different to `string.length` which returns the amount of utf-8\n// bytes, which is a different metric as - for example - the poo emoji is 2\n// utf-8 bytes, but 1 unicode code point.\n//\n// See http://blog.jonnew.com/posts/poo-dot-length-equals-two for more.\nexport function getUtf8StringLength(str: string): number {\n  const joiner = '\\u200D'\n  const split = str.split(joiner)\n  let count = 0\n\n  for (const s of split) {\n    // removing the variation selectors\n    const num = Array.from(s.split(/[\\ufe00-\\ufe0f]/).join('')).length\n    count += num\n  }\n\n  // assuming the joiners are used appropriately\n  return count / split.length\n}\n\nexport function replaceText(textarea: HTMLInputElement | HTMLTextAreaElement, oldText: string, newText: string): void {\n  let beginning = textarea.value.substring(0, textarea.selectionEnd || 0)\n  let remaining = textarea.value.substring(textarea.selectionEnd || 0)\n  beginning = beginning.replace(oldText, newText)\n  remaining = remaining.replace(oldText, newText)\n\n  textarea.value = beginning + remaining\n  textarea.selectionStart = beginning.length\n  textarea.selectionEnd = beginning.length\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n}\n\nexport function insertText(textarea: HTMLInputElement | HTMLTextAreaElement, text: string): void {\n  const point = textarea.selectionEnd || 0\n  const beginning = textarea.value.substring(0, point)\n  const remaining = textarea.value.substring(point)\n  const newline = textarea.value === '' || beginning.match(/\\n$/) ? '' : '\\n'\n\n  textarea.value = beginning + newline + text + remaining\n  textarea.selectionStart = point + text.length\n  textarea.selectionEnd = point + text.length\n  textarea.dispatchEvent(new CustomEvent('change', {bubbles: true, cancelable: false}))\n  textarea.focus()\n}\n","import type {CodeEditor} from './editor/code-editor'\nimport {on} from 'delegated-events'\n\nconst editors: WeakMap<HTMLElement, CodeEditor> = new WeakMap()\n\nexport function getCodeEditor(el: HTMLElement): CodeEditor | undefined {\n  return editors.get(el)\n}\n\nexport async function getAsyncCodeEditor(el: HTMLElement): Promise<CodeEditor> {\n  return editors.get(el) || onEditorFromEvent(await nextEvent(el, 'codeEditor:ready'))\n}\n\nfunction onEditorFromEvent(event: Event): CodeEditor {\n  if (!(event instanceof CustomEvent)) throw new Error('assert: event is not a CustomEvent')\n  const editor: CodeEditor = event.detail.editor\n  if (!event.target) throw new Error('assert: event.target is null')\n  editors.set(event.target as HTMLElement, editor)\n  return editor\n}\n\non('codeEditor:ready', '.js-code-editor', onEditorFromEvent)\n\nfunction nextEvent(target: EventTarget, event: string): Promise<Event> {\n  return new Promise(resolve => {\n    target.addEventListener(event, resolve, {once: true})\n  })\n}\n","import {filterMap} from './iterables'\n\ntype Comparator<T> = (a: T, b: T) => number\n\nexport function filterSort<T, K>(items: T[], map: (item: T) => K | null | undefined, compare: Comparator<K>): T[] {\n  const sortKey = (item: T): [T, K] | null => {\n    const key = map(item)\n    return key != null ? [item, key] : null\n  }\n  return [...filterMap(items, sortKey)].sort((a, b) => compare(a[1], b[1])).map(([item]) => item)\n}\n","// Example\n// ```js\n//     fuzzyScore(\"foo.html\", \"foo\")\n//     // => 0.6458333333333334\n// ```\n//\n// ```js\n//     // Compute re once\n//     re = fuzzyRegexp(\"foo\")\n//     fuzzyScore(\"foo.html\", re)\n//     fuzzyScore(\"bar.html\", re)\n//     // => 0.6458333333333334\n// ```\n//\n// Returns a number between 0 and 1. 0 being the worst match and 1\n// being an exact match.\nexport function fuzzyScore(string: string, query: string): number {\n  let score = stringScore(string, query)\n  if (score && query.indexOf('/') === -1) {\n    const basename = string.substring(string.lastIndexOf('/') + 1)\n    score += stringScore(basename, query)\n  }\n  return score\n}\n\n// Create a regexp that can be used to fuzzy match a given string. Any\n// special regexp characters in the input string will be escaped\n// correctly.\n//\n// A query of \"bar\" becomes /(.*)(b)([^a]*?)(a)([^r]*?)(r)(.*?)/.\n//\n// /\n//  (.*)     whatever's before the first b\n//  (b)      grab the first b of bar\n//  ([^a]*?) take everything up to the a of bar\n//  (a)      take the a of bar\n//  ([^r]*?) take everything up to the r of bar\n//  (r)      take the r of bar\n//  (.*?)    take the rest of the string\n// /\nexport function fuzzyRegexp(query: string): RegExp {\n  const chars = query.toLowerCase().split('')\n\n  let regex = ''\n\n  for (let i = 0; i < chars.length; i++) {\n    const char = chars[i]\n    // must escape these chars so we match literals\n    const c = char.replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&')\n    if (i === 0) {\n      // for the first we want to greedily match anything, which pushes\n      // the first match as late as possible in the string\n      regex += `(.*)(${c})`\n    } else {\n      regex += `([^${c}]*?)(${c})`\n    }\n  }\n  return new RegExp(`${regex}(.*?)$`, 'i')\n}\n\nexport function fuzzyHighlightElement(content: Element, text?: string, textRe?: RegExp): void {\n  if (text) {\n    const matches = content.innerHTML.trim().match(textRe || fuzzyRegexp(text))\n    if (!matches) return\n\n    let open = false\n    const html = []\n    for (let i = 1; i < matches.length; ++i) {\n      const m = matches[i]\n      if (!m) continue\n\n      if (i % 2 === 0) {\n        if (!open) {\n          // eslint-disable-next-line github/unescaped-html-literal\n          html.push('<mark>')\n          open = true\n        }\n      } else if (open) {\n        html.push('</mark>')\n        open = false\n      }\n      html.push(m)\n    }\n    content.innerHTML = html.join('')\n  } else {\n    const html = content.innerHTML.trim()\n    const clean = html.replace(/<\\/?mark>/g, '')\n    if (html !== clean) {\n      content.innerHTML = clean\n    }\n  }\n}\n\n// string_score.js: Quicksilver-like string scoring algorithm.\n//  https://raw.github.com/joshaven/string_score/master/coffee/string_score.coffee\n//\n// Copyright (C) 2009-2011 Joshaven Potter <yourtech@gmail.com>\n// Copyright (C) 2010-2011 Yesudeep Mangalapilly <yesudeep@gmail.com>\n// MIT license: http://www.opensource.org/licenses/mit-license.php\n//\n// A string score implementation.\nfunction stringScore(originalString: string, abbreviation: string): number {\n  let string = originalString\n  if (string === abbreviation) {\n    return 1.0\n  }\n  const stringLength = string.length\n  let totalCharacterScore = 0.0\n  let shouldAwardCommonPrefixBonus = 0\n  for (let i = 0; i < abbreviation.length; i++) {\n    const c = abbreviation[i]\n    const indexCLowercase = string.indexOf(c.toLowerCase())\n    const indexCUppercase = string.indexOf(c.toUpperCase())\n    const minIndex = Math.min(indexCLowercase, indexCUppercase)\n    const indexInString = minIndex > -1 ? minIndex : Math.max(indexCLowercase, indexCUppercase)\n    if (indexInString === -1) {\n      return 0.0\n    }\n    totalCharacterScore += 0.1\n    if (string[indexInString] === c) {\n      totalCharacterScore += 0.1\n    }\n    if (indexInString === 0) {\n      totalCharacterScore += 0.8\n      if (i === 0) {\n        shouldAwardCommonPrefixBonus = 1\n      }\n    }\n    if (string.charAt(indexInString - 1) === ' ') {\n      totalCharacterScore += 0.8\n    }\n    string = string.substring(indexInString + 1, stringLength)\n  }\n  const abbreviationLength = abbreviation.length\n  const abbreviationScore = totalCharacterScore / abbreviationLength\n  let finalScore = (abbreviationScore * (abbreviationLength / stringLength) + abbreviationScore) / 2\n  if (shouldAwardCommonPrefixBonus && finalScore + 0.1 < 1) {\n    finalScore += 0.1\n  }\n  return finalScore\n}\n\nexport type TextScore = {score: number; text: string}\nexport function compare(a: TextScore, b: TextScore): -1 | 0 | 1 {\n  if (a.score > b.score) {\n    return -1\n  } else if (a.score < b.score) {\n    return 1\n  } else if (a.text < b.text) {\n    return -1\n  } else if (a.text > b.text) {\n    return 1\n  } else {\n    return 0\n  }\n}\n","import {dialog} from './details-dialog'\nimport {fetchSafeDocumentFragment} from './fetch'\nimport {observe} from 'selector-observer'\n\nfunction waitForDialogClose(dialogEl: HTMLElement): Promise<unknown> {\n  return new Promise(resolve => {\n    dialogEl.addEventListener('dialog:remove', resolve, {once: true})\n  })\n}\n\nfunction setModalStatus(success: boolean) {\n  const modal = document.querySelector('.sso-modal')\n  if (!modal) return\n\n  modal.classList.remove('success', 'error')\n\n  if (success) modal.classList.add('success')\n  else modal.classList.add('error')\n}\n\nfunction updateExpiresAroundTag(expiresAround: string) {\n  const expiryTag = document.querySelector('meta[name=sso-expires-around]')\n  if (expiryTag) expiryTag.setAttribute('content', expiresAround)\n}\n\n// Asks the user to perform single sign-on for the current organization. SSO\n// take place in a new window so we'll need to set up a way for the other window\n// to tell us when SSO is complete and whether or not it was successful.\nasync function ssoPrompt() {\n  const link = document.querySelector<HTMLLinkElement>('link[rel=sso-modal]')!\n  const prompt = await dialog({content: fetchSafeDocumentFragment(document, link.href), dialogClass: 'sso-modal'})\n\n  let sso = null\n  /* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n  const external: any = window.external\n\n  // Expose callback method for the SSO window to invoke with its status when complete.\n  external.ssoComplete = function (data: {error: boolean; expiresAround: string}) {\n    if (data.error) {\n      sso = false\n      setModalStatus(sso)\n    } else {\n      sso = true\n      setModalStatus(sso)\n      updateExpiresAroundTag(data.expiresAround)\n      window.focus()\n    }\n\n    // Remove the external function now that it's served its purpose\n    external.ssoComplete = null\n  }\n\n  await waitForDialogClose(prompt)\n\n  if (!sso) {\n    throw new Error('sso prompt canceled')\n  }\n}\n\n// Watch for modal complete elements. This is shown as the final step of the\n// single sign-on process that happens in a separate window. Once we see this\n// we know SSO is complete and we can try to tell the original window what the\n// status is before closing the SSO window.\nobserve('.js-sso-modal-complete', function (el) {\n  if (window.opener && window.opener.external.ssoComplete) {\n    const error = el.getAttribute('data-error')\n    const expiresAround = el.getAttribute('data-expires-around')\n\n    window.opener.external.ssoComplete({\n      error,\n      expiresAround\n    })\n    window.close()\n  } else {\n    const fallback = el.getAttribute('data-fallback-url')\n    if (fallback) window.location.href = fallback\n  }\n})\n\nfunction expiresSoon(expiresTag: Element | null): boolean {\n  if (!(expiresTag instanceof HTMLMetaElement)) return true\n\n  const expiresAround = parseInt(expiresTag.content)\n  const now = new Date().getTime() / 1000\n\n  return now > expiresAround\n}\n\n// Remotely checks the single-sign on status for the current page. If the link tags are\n// not present in the <head>, the current page is not enforced and the status is considered good.\nasync function fetchSsoStatus(): Promise<boolean> {\n  const sessionTag = document.querySelector('link[rel=sso-session]')\n  const expiryTag = document.querySelector('meta[name=sso-expires-around]')\n\n  if (!(sessionTag instanceof HTMLLinkElement)) return true // No SSO enforcement head tags. SSO not enforced.\n  if (!expiresSoon(expiryTag)) return true // Don't bother checking unless we're nearing SSO session expiry\n\n  const url = sessionTag.href\n  const response = await fetch(url, {headers: {Accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'}})\n  const result: boolean = await response.json()\n  return result\n}\n\nlet activeSsoPrompt: Promise<void> | null = null\n\nfunction clearActiveSsoPrompt() {\n  activeSsoPrompt = null\n}\n\n// Checks to see if the user has a valid single sign-on session for the current\n// page. If not and the page is enforced, it blocks the callback until the user\n// renews their SSO session.\n/* eslint-disable-next-line import/no-anonymous-default-export */\nexport default async function () {\n  const sso = await fetchSsoStatus()\n\n  if (!sso) {\n    if (!activeSsoPrompt) {\n      activeSsoPrompt = ssoPrompt()\n        /* eslint-disable-next-line github/no-then */\n        .then(clearActiveSsoPrompt)\n        /* eslint-disable-next-line github/no-then */\n        .catch(clearActiveSsoPrompt)\n    }\n\n    await activeSsoPrompt\n  }\n}\n","type TextField = HTMLInputElement | HTMLTextAreaElement\n\n/**\n * Throttled Input event.\n *\n * Delays firing `input` event until user is done typing.\n *\n * Details.\n *\n * Never fires while a key is down, waits for the next keyup.\n *   NOTE: Native OSX text fields won't repeat keys. FF will repeat key while held down.\n *\n * Never fires for selection changes (pressing left or right keys to move the cursor).\n */\n\nconst throttledInputEvents: WeakMap<\n  HTMLElement,\n  {\n    keypressed: boolean\n    inputed: boolean\n    timer: number | null | undefined\n    listener: ThrottledHandler\n    wait: number\n  }\n> = new WeakMap()\n\nfunction schedule(element: TextField) {\n  const events = throttledInputEvents.get(element)\n  if (!events) return\n  if (events.timer != null) clearTimeout(events.timer)\n\n  events.timer = window.setTimeout(() => {\n    if (events.timer != null) events.timer = null\n    events.inputed = false\n    events.listener.call(null, element)\n  }, events.wait)\n}\n\nfunction onKeydownInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = true\n  if (events.timer != null) {\n    clearTimeout(events.timer)\n  }\n}\n\nfunction onKeyupInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.keypressed = false\n  if (events.inputed) {\n    schedule(currentTarget)\n  }\n}\n\nfunction onInputInput(event: Event) {\n  const currentTarget = event.currentTarget as TextField\n  const events = throttledInputEvents.get(currentTarget)\n  if (!events) return\n  events.inputed = true\n  if (!events.keypressed) {\n    schedule(currentTarget)\n  }\n}\n\ntype ThrottledHandler = (arg0: TextField) => unknown\n\nexport function addThrottledInputEventListener(\n  target: TextField,\n  listener: ThrottledHandler,\n  options: {wait: number | null} = {wait: null}\n) {\n  throttledInputEvents.set(target, {\n    keypressed: false,\n    inputed: false,\n    timer: undefined,\n    listener,\n    wait: options.wait != null ? options.wait : 100\n  })\n\n  target.addEventListener('keydown', onKeydownInput)\n  target.addEventListener('keyup', onKeyupInput)\n  target.addEventListener('input', onInputInput)\n}\n\nexport function removeThrottledInputEventListener(target: TextField, listener: ThrottledHandler) {\n  target.removeEventListener('keydown', onKeydownInput)\n  target.removeEventListener('keyup', onKeyupInput)\n  target.removeEventListener('input', onInputInput)\n\n  const events = throttledInputEvents.get(target)\n  if (events) {\n    if (events.timer != null && events.listener === listener) {\n      clearTimeout(events.timer)\n    }\n    throttledInputEvents.delete(target)\n  }\n}\n\nexport function dispatchThrottledInputEvent(target: TextField) {\n  const events = throttledInputEvents.get(target)\n  if (events) events.listener.call(null, target)\n}\n","import {findFragmentTarget} from './fragment-target'\nimport {forceStickyRelayout} from './behaviors/sticky'\n\n// Scroll element into view accounting for sticky/fixed overlays.\nexport function scrollIntoView(el: Element) {\n  const document = el.ownerDocument\n  el.scrollIntoView()\n  setTimeout(() => {\n    if (document && document.defaultView) document.defaultView.scrollBy(0, -computeFixedYOffset(document))\n  }, 0)\n}\n\n// Scroll to fragment target element accounting for sticky/fixed\n// overlays.\nexport function scrollToFragmentTarget(document: Document) {\n  const target = findFragmentTarget(document)\n  if (target) {\n    scrollIntoView(target)\n  }\n}\n\n// Compute height of visible sticky/fixed overlay on page.\nexport function computeFixedYOffset(document: Document): number {\n  // Force synchronous layout of any sticky elements before measuring offset\n  forceStickyRelayout()\n\n  const jsStickyEls = document.querySelectorAll('.js-sticky-offset-scroll')\n  const positionStickyEls = document.querySelectorAll('.js-position-sticky')\n\n  // Find maximum combined height of sticky-offset / position-sticky elements\n  // If none are present, fallback to 0 as Math.max() returns -Infinity\n  return (\n    Math.max(\n      0,\n      ...Array.from(jsStickyEls).map(el => {\n        const {top, height} = el.getBoundingClientRect()\n        return top === 0 ? height : 0\n      })\n    ) +\n    Math.max(\n      0,\n      ...Array.from(positionStickyEls).map(el => {\n        const {top, height} = el.getBoundingClientRect()\n        const topStyleValue = parseInt(getComputedStyle(el).top)\n\n        if (!el.parentElement) {\n          return 0\n        }\n\n        const parentTop = el.parentElement.getBoundingClientRect().top\n        // include js-position-sticky element height in scroll offset if element is sticky\n        return top === topStyleValue && parentTop < 0 ? height : 0\n      })\n    )\n  )\n}\n","import {sendStats} from './stats'\n\nexport function sendData(hydroEventPayload: string, hydroEventHmac: string, hydroClientContext: string): void {\n  const data = {\n    hydroEventPayload,\n    hydroEventHmac,\n    visitorPayload: '',\n    visitorHmac: '',\n    hydroClientContext\n  }\n\n  const visitorPayload = document.querySelector('meta[name=visitor-payload]')\n  if (visitorPayload instanceof HTMLMetaElement) {\n    data['visitorPayload'] = visitorPayload.content\n  }\n  const visitorHmac = document.querySelector('meta[name=visitor-hmac]') || ''\n  if (visitorHmac instanceof HTMLMetaElement) {\n    data['visitorHmac'] = visitorHmac.content\n  }\n\n  sendStats(data, true)\n}\n\nexport function trackView(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-view') || ''\n  const hmac = el.getAttribute('data-hydro-view-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n\nexport function sendHydroEvent(el: HTMLElement) {\n  const payload = el.getAttribute('data-hydro-click-payload') || ''\n  const hmac = el.getAttribute('data-hydro-click-hmac') || ''\n  const hydroClientContext = el.getAttribute('data-hydro-client-context') || ''\n  sendData(payload, hmac, hydroClientContext)\n}\n","import {scorer} from './ranking'\nexport {scorer} from './ranking'\n\ntype PageViewSummary = {\n  lastVisitedAt: number\n  visitCount: number\n}\n\nexport type PageViews = {[page_key: string]: PageViewSummary}\n\nconst TEAM_PAGE_REGEX = /^\\/orgs\\/([a-z0-9-]+)\\/teams\\/([\\w-]+)/\n\n// Of course this list is incomplete, but it should be good enough for the purposes of this prototype.\nconst REPOSITORY_PAGE_REGEXES = [\n  // This will overcount some things, but since every page view is ultimately compared to entities\n  // we can jump to it should be fine. Of course if we ever tried to add users or orgs to this it\n  // would break.\n  /^\\/([^/]+)\\/([^/]+)\\/?$/,\n\n  /^\\/([^/]+)\\/([^/]+)\\/blob/,\n  /^\\/([^/]+)\\/([^/]+)\\/tree/,\n  /^\\/([^/]+)\\/([^/]+)\\/issues/,\n  /^\\/([^/]+)\\/([^/]+)\\/pulls?/,\n  /^\\/([^/]+)\\/([^/]+)\\/pulse/\n]\n\nconst PROJECT_PAGE_REGEXES = [\n  ['organization', /^\\/orgs\\/([a-z0-9-]+)\\/projects\\/([0-9-]+)/],\n  ['repository', /^\\/([^/]+)\\/([^/]+)\\/projects\\/([0-9-]+)/]\n]\n\nconst MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE = 100\n\nexport function logPageView(path: string) {\n  const teamPageMatch = path.match(TEAM_PAGE_REGEX)\n  if (teamPageMatch) {\n    logPageViewByKey(buildTeamKey(teamPageMatch[1], teamPageMatch[2]))\n    return\n  }\n\n  let projectPageMatch\n  for (let i = 0, len = PROJECT_PAGE_REGEXES.length; i < len; i++) {\n    const [ownerType, projectRegex] = PROJECT_PAGE_REGEXES[i]\n    projectPageMatch = path.match(projectRegex)\n    if (projectPageMatch) {\n      let ownerSlug: string | null = null\n      let number: string | null = null\n      switch (ownerType) {\n        case 'organization':\n          ownerSlug = projectPageMatch[1]\n          number = projectPageMatch[2]\n          break\n        case 'repository':\n          ownerSlug = `${projectPageMatch[1]}/${projectPageMatch[2]}`\n          number = projectPageMatch[3]\n          break\n        default:\n        // Should never get here.\n      }\n      if (ownerSlug && number) {\n        logPageViewByKey(buildProjectKey(ownerSlug, number))\n      }\n      return\n    }\n  }\n\n  let repositoryPageMatch\n  for (let i = 0, len = REPOSITORY_PAGE_REGEXES.length; i < len; i++) {\n    repositoryPageMatch = path.match(REPOSITORY_PAGE_REGEXES[i])\n    if (repositoryPageMatch) {\n      logPageViewByKey(buildRepositoryKey(repositoryPageMatch[1], repositoryPageMatch[2]))\n      return\n    }\n  }\n}\n\n// Limits localStorage entries to 100 MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE\nfunction limitedPageViews(pageViews: PageViews) {\n  const keys = Object.keys(pageViews)\n  if (keys.length <= MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE) {\n    return pageViews\n  }\n  const scorePage = scorer(pageViews)\n  const ranked = keys.sort((a, b) => scorePage(b) - scorePage(a)).slice(0, MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE / 2)\n  return Object.fromEntries(ranked.map(key => [key, pageViews[key]]))\n}\n\nfunction logPageViewByKey(key: string) {\n  const views = getPageViewsMap()\n  const now = currentEpochTimeInSeconds()\n  const hit = views[key] || {lastVisitedAt: now, visitCount: 0}\n  hit.visitCount += 1\n  hit.lastVisitedAt = now\n  views[key] = hit\n  setPageViewsMap(limitedPageViews(views))\n}\n\nfunction currentEpochTimeInSeconds(): number {\n  return Math.floor(Date.now() / 1000)\n}\n\nexport function buildTeamKey(organizationLogin: string, teamSlug: string): string {\n  return `team:${organizationLogin}/${teamSlug}`\n}\n\nexport function buildRepositoryKey(ownerLogin: string, name: string): string {\n  return `repository:${ownerLogin}/${name}`\n}\n\nexport function buildProjectKey(ownerSlug: string, number: string): string {\n  return `project:${ownerSlug}/${number}`\n}\n\nconst PAGE_VIEW_KEY_REGEX = /^(team|repository|project):[^/]+\\/[^/]+(\\/([^/]+))?$/\nconst VIEWS_KEY = 'jump_to:page_views'\n\nfunction setPageViewsMap(views: PageViews) {\n  setItem(VIEWS_KEY, JSON.stringify(views))\n}\n\nexport function getPageViewsMap(): PageViews {\n  const rawData = getItem(VIEWS_KEY)\n  if (!rawData) return {}\n\n  let json\n  try {\n    json = JSON.parse(rawData)\n  } catch {\n    // Clear localStorage since we know it's bad\n    setPageViewsMap({})\n    return {}\n  }\n\n  const pageViewMap: PageViews = {}\n  for (const key in json) {\n    if (key.match(PAGE_VIEW_KEY_REGEX)) {\n      pageViewMap[key] = json[key]\n    }\n  }\n  return pageViewMap\n}\n\nfunction setItem(key: string, value: string) {\n  try {\n    window.localStorage.setItem(key, value)\n  } catch {\n    // Storage quota exceeded.\n  }\n}\n\nfunction getItem(key: string): string | null {\n  try {\n    return window.localStorage.getItem(key)\n  } catch {\n    // Storage unavailable.\n    return null\n  }\n}\n","const sessionHistoryEntries: Array<{url: string; state: unknown}> = []\nlet sessionHistoryOffset = 0\nlet state: State\n\ntype State = {\n  _id: number\n}\n\n/*\n * Array of history entries.\n *\n * Example:\n * {\n *   0: {\n *     url: \"/\",\n *     state: { ... }.\n *   },\n *   1: {\n *     url: \"/github/github/issues/123\",\n *     state: { ... }.\n *   },\n *   2: {\n *     url: \"/github/github/issues/123#comment-4\",\n *     state: { ... }.\n *   }.\n *  }.\n */\n\nexport function getState(): State {\n  return state\n}\n\nfunction safeGetHistory() {\n  try {\n    // Clamp history.length to 0<->9007199254740991 (Number.MAX_SAFE_INTEGER isn't supported in IE)\n    return Math.min(Math.max(0, history.length) || 0, 9007199254740991)\n  } catch (e) {\n    return 0\n  }\n}\n\nfunction initializeState(): State {\n  const newState = {_id: new Date().getTime()}\n  setState(newState)\n  return newState\n}\n\n// Current index into history entries stack.\nfunction position(): number {\n  return safeGetHistory() - 1 + sessionHistoryOffset\n}\n\nfunction setState(newState: State) {\n  state = newState\n\n  // Update entry at current position\n  const url = location.href\n  sessionHistoryEntries[position()] = {url, state}\n\n  // Trim entries to match history size\n  sessionHistoryEntries.length = safeGetHistory()\n\n  // Emit public statechange\n  window.dispatchEvent(new CustomEvent('statechange', {bubbles: false, cancelable: false}))\n}\n\n// Generate unique id for state object.\n//\n// Use a timestamp instead of a counter since ids should still be unique\n// across page loads.\nfunction uniqueId(): number {\n  return new Date().getTime()\n}\n\n// Indirection for history.pushState to support tracking URL changes.\n//\n// Would be great if there was a standard window.addEventListener('statechange') event.\nexport function pushState(oldState: State | null, title: string, url: string) {\n  // pushState drops any forward history entries\n  sessionHistoryOffset = 0\n  const newState = Object.assign({}, {_id: uniqueId()}, oldState)\n  history.pushState(newState, title, url)\n  setState(newState)\n}\n\n// Indirection for history.replaceState to support tracking URL changes.\n//\n// Would be great if there was a standard window.addEventListener('statechange') event.\nexport function replaceState(oldState: Record<string, unknown> | null, title: string, url: string) {\n  const newState = Object.assign({}, {_id: getState()._id}, oldState)\n  history.replaceState(newState, title, url)\n  setState(newState)\n}\n\n// Get URL that be navigated to with history.back().\nexport function getBackURL(): string | undefined {\n  const entry = sessionHistoryEntries[position() - 1]\n  if (entry) {\n    return entry.url\n  }\n}\n\n// Get URL that be navigated to with history.forward().\nexport function getForwardURL(): string | undefined {\n  const entry = sessionHistoryEntries[position() + 1]\n  if (entry) {\n    return entry.url\n  }\n}\n\nstate = initializeState()\n\nwindow.addEventListener(\n  'popstate',\n  function onPopstate(event: PopStateEvent) {\n    const currentState: State = event.state\n\n    if (!currentState || !currentState._id) {\n      // Unmanaged state in history entries\n      // Or could be a hashchange pop, ignore and let hashchange handle it\n      return\n    }\n\n    const id = currentState._id\n    if (id < (getState()._id || NaN)) {\n      sessionHistoryOffset--\n    } else {\n      sessionHistoryOffset++\n    }\n\n    setState(currentState)\n  },\n  true\n)\n\nwindow.addEventListener(\n  'hashchange',\n  function onHashchange() {\n    if (safeGetHistory() > sessionHistoryEntries.length) {\n      // Forward navigation\n      const newState = {_id: uniqueId()}\n      history.replaceState(newState, '', location.href)\n      setState(newState)\n    }\n  },\n  true\n)\n","// pjax: prefetch cache storage\n//\n// Prefetched responses are stored on the link[rel=pjax-prefetch] Element.\n\nconst cache: WeakMap<Element, Promise<Response>> = new WeakMap()\n\n// Find link[rel=pjax-prefetch][href=url] within container.\nfunction findLinks(container: Element, url: string): HTMLLinkElement | null {\n  const links = container.querySelectorAll<HTMLLinkElement>('link[rel=pjax-prefetch]')\n  for (const link of links) {\n    if (link.href === url) {\n      return link\n    }\n  }\n  return null\n}\n\n// Find and remove cached prefetched response for container and request.\nexport function popPrefetchResponseForRequest(container: Element, url: string): Promise<Response> | null {\n  const link = findLinks(container, url)\n  if (link) {\n    const response = cache.get(link)\n    link.remove()\n    cache.delete(link)\n    return response ? response : null\n  }\n  return null\n}\n\nfunction ignoreUncaughtPromiseError(promise: Promise<unknown>) {\n  /* eslint-disable-next-line github/no-then */\n  promise.catch(() => {\n    // Ignore uncaught promise errors\n  })\n}\n\n// Set prefetched response for a container.\nexport function setPrefetchResponse(link: HTMLLinkElement, response: Promise<Response>): void {\n  cache.set(link, response)\n  ignoreUncaughtPromiseError(response)\n}\n","function queryLast<T extends Element>(selector: string): T | undefined {\n  const list = document.querySelectorAll<T>(selector)\n  if (list.length > 0) {\n    return list[list.length - 1]\n  }\n}\n\nfunction pagePathname() {\n  const locationOverride = queryLast<HTMLMetaElement>('meta[name=analytics-location]')\n  if (locationOverride) {\n    return locationOverride.content\n  } else {\n    return window.location.pathname\n  }\n}\n\nfunction pageQuery() {\n  const stripParams = queryLast<HTMLMetaElement>('meta[name=analytics-location-query-strip]')\n  let search = ''\n\n  if (!stripParams) {\n    search = window.location.search\n  }\n\n  const extraParams = queryLast<HTMLMetaElement>('meta[name=analytics-location-params]')\n  if (extraParams) {\n    search += (search ? '&' : '?') + extraParams.content\n  }\n\n  for (const meta of document.querySelectorAll<HTMLMetaElement>('meta[name=analytics-param-rename]')) {\n    const names = meta.content.split(':', 2)\n    search = search.replace(new RegExp(`(^|[?&])${names[0]}($|=)`, 'g'), `$1${names[1]}$2`)\n  }\n\n  return search\n}\n\nexport function requestUri() {\n  return `${window.location.protocol}//${window.location.host}${pagePathname() + pageQuery()}`\n}\n","import {on} from 'delegated-events'\nimport {persistSubmitButtonValue} from './remote-submit'\nimport {showGlobalError} from './behaviors/ajax-error'\n\ntype TextField = HTMLInputElement | HTMLTextAreaElement\ntype Button = HTMLInputElement | HTMLButtonElement\n\non('click', '.js-remote-submit-button', async function (event) {\n  const button = event.currentTarget as HTMLButtonElement\n  const form = button.form as HTMLFormElement\n  event.preventDefault()\n  let response\n  try {\n    response = await fetch(form.action, {\n      method: form.method,\n      body: new FormData(form),\n      headers: {\n        Accept: 'application/json',\n        'X-Requested-With': 'XMLHttpRequest'\n      }\n    })\n  } catch {\n    // Ignore network errors\n  }\n  if (response && !response.ok) {\n    showGlobalError()\n  }\n})\n\nfunction fire(target: HTMLElement, name: string, cancelable: boolean): boolean {\n  return target.dispatchEvent(\n    new CustomEvent(name, {\n      bubbles: true,\n      cancelable\n    })\n  )\n}\n\n// Submit a form while ensuring that `submit` event is also triggered.\n//\n// Calling native `form.submit()` method immediately submits the form without triggering the `submit` event.\n// As a result, code that wants to hook into form submits would never execute.\n//\n// This method first triggers the `submit` event and, if that event wasn't `preventDefault`d, submits the\n// form natively.\nexport function requestSubmit(form: HTMLFormElement, submitter?: Button) {\n  if (submitter) {\n    checkButtonValidity(form, submitter)\n    persistSubmitButtonValue(submitter)\n  }\n  if (fire(form, 'submit', true)) {\n    form.submit()\n  }\n}\n\n// Check submitter validity for form.requestSubmit compatibility.\n// See https://html.spec.whatwg.org/#dom-form-requestsubmit.\nfunction checkButtonValidity(form: HTMLFormElement, submitter: Button) {\n  if (!(form instanceof HTMLFormElement)) throw new TypeError('The specified element is not of type HTMLFormElement.')\n  if (!(submitter instanceof HTMLElement)) throw new TypeError('The specified element is not of type HTMLElement.')\n  if (submitter.type !== 'submit') throw new TypeError('The specified element is not a submit button.')\n  if (!form || form !== submitter.form) throw new Error('The specified element is not owned by the form element.')\n}\n\n// Set a form field value while ensuring that `change` event is also triggered.\n//\n// Having the `change` event fire is important for various behaviors to react, such as form validation.\nexport function changeValue(input: TextField, value: string | boolean) {\n  if (typeof value === 'boolean') {\n    if (input instanceof HTMLInputElement) {\n      input.checked = value\n    } else {\n      throw new TypeError('only checkboxes can be set to boolean value')\n    }\n  } else {\n    if (input.type === 'checkbox') {\n      throw new TypeError(\"checkbox can't be set to string value\")\n    } else {\n      input.value = value\n    }\n  }\n  fire(input, 'change', false)\n}\n\n// Fill multiple form fields by item name.\nexport function fillFormValues(form: HTMLFormElement, fields: {[key: string]: string}) {\n  for (const name in fields) {\n    const value = fields[name]\n    const element = form.elements.namedItem(name)\n\n    if (element instanceof HTMLInputElement) {\n      element.value = value\n    } else if (element instanceof HTMLTextAreaElement) {\n      element.value = value\n    }\n  }\n}\n\n// Test if element is a form field.\nexport function isFormField(element: Node): boolean {\n  if (!(element instanceof HTMLElement)) {\n    return false\n  }\n\n  const name = element.nodeName.toLowerCase()\n  const type = (element.getAttribute('type') || '').toLowerCase()\n  return (\n    name === 'select' ||\n    name === 'textarea' ||\n    (name === 'input' && type !== 'submit' && type !== 'reset') ||\n    element.isContentEditable\n  )\n}\n\n// Serialize form data into string.\nexport function serialize(form: HTMLFormElement): string {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return new URLSearchParams(new FormData(form) as any).toString()\n}\n","// Diff Line Number\n// Click line number on td::before element line numbers to jump to the anchor.\n//\n// Avoids using a native <a> for performance reasons. Theres a large number of\n// css selectors that target `a` on the right most side. If we can reduce the\n// number of these, selector matching performance on thousands of blob and diff\n// lines shouldn't be so bad.\n\nimport {DiffRange} from './diff-range'\nimport hashChange from '../behaviors/hash-change'\nimport {matchHash} from './helpers'\nimport {observe} from 'selector-observer'\nimport {on} from 'delegated-events'\nimport {trackView} from '../hydro-tracking'\n\n// Highlight diff range\nlet currentRange: DiffRange | null = null\nlet showMultiLineCommentForm: (() => void) | null = null\nlet isDraggingForComment = false\nlet waitingForDragFrom: Element | null = null\n\nexport function getCurrentRange(): DiffRange | null {\n  return currentRange\n}\n\nfunction isMultiLineCommentingEnabled(target: Element): boolean {\n  return !!target.closest('.js-multi-line-comments-enabled')\n}\n\nexport function isMultiLineCommentAllowed(target: Element, expandedRange: DiffRange): boolean {\n  if (!isMultiLineCommentingEnabled(target)) {\n    return false\n  }\n\n  const {\n    start: {lineNumber: startLineNumber},\n    end: {lineNumber: endLineNumber}\n  } = expandedRange\n\n  // It's not multi-line if it's just one line\n  if (startLineNumber === endLineNumber && expandedRange.isContextOnly()) {\n    return false\n  }\n\n  if (expandedRange.isAcrossHunks()) {\n    return false\n  }\n\n  if (expandedRange.includesExpandedLine()) {\n    return false\n  }\n\n  return true\n}\n\nfunction isSelecting(element: Element): boolean {\n  return element.closest<HTMLElement>('.js-diff-table')!.classList.contains('is-selecting')\n}\n\nexport function clearSelection(): void {\n  window.history.replaceState(null, '', `#`)\n  showHighlight()\n}\n\nfunction setSelection(target: Element, canExpand: boolean) {\n  let targetLineAnchor = target.id\n\n  if (canExpand) {\n    const parsedAnchor = matchHash(targetLineAnchor)\n    if (!parsedAnchor) return\n\n    const diffId = parsedAnchor[1]\n    const endSide = parsedAnchor[2]\n    const endLine = parsedAnchor[3]\n\n    if (currentRange && currentRange.diffId === diffId) {\n      // Don't let people drag upwards because it causes some weirdness. Could fix this later,\n      // but we're just disabling for the initial ship\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      if (endSide === currentRange.start.side && endLine < currentRange.start.lineNumber) {\n        return\n      }\n\n      const expandedRange = new DiffRange(\n        diffId,\n        currentRange.start.side,\n        currentRange.start.lineNumber,\n        endSide,\n        +endLine\n      )\n      targetLineAnchor = expandedRange.anchor()\n\n      const trackingElement = target.closest('.js-file-content[data-hydro-view]')\n\n      if (trackingElement instanceof HTMLElement) {\n        sendHydroEvent(trackingElement, expandedRange)\n      }\n\n      if (isDraggingForComment && isSelecting(target)) {\n        const table = target.closest<HTMLElement>('.js-diff-table')!\n        table.classList.toggle('is-commenting', isMultiLineCommentAllowed(target, expandedRange))\n      }\n\n      showMultiLineCommentForm = function () {\n        if (isMultiLineCommentAllowed(target, expandedRange)) {\n          const sideValue = expandedRange.end.sideForCommenting()\n          const buttonSelector = `.js-add-line-comment[data-side=\"${sideValue}\"]`\n          const button = target.closest<HTMLElement>('tr')!.querySelector<HTMLElement>(buttonSelector)\n\n          if (button && expandedRange) {\n            button.click()\n          }\n        }\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  window.history.replaceState(null, null, `#${targetLineAnchor}`)\n  showHighlight()\n}\n\nfunction nearestLinkableLineNumber(element: Element): Element | null {\n  if (!(element instanceof HTMLElement)) {\n    return null\n  }\n\n  if (element.classList.contains('js-linkable-line-number')) {\n    return element\n  }\n\n  const previousElementSibling = element.previousElementSibling\n\n  if (previousElementSibling) {\n    return nearestLinkableLineNumber(previousElementSibling)\n  }\n\n  return null\n}\n\nfunction handleClick(e: MouseEvent) {\n  if (!currentRange) {\n    return\n  }\n\n  if ((e.target as Element).closest('.js-diff-table')) {\n    return\n  }\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  window.history.replaceState(null, null, `#`)\n  showHighlight()\n}\n\nfunction beginDrag() {\n  if (!waitingForDragFrom) {\n    return\n  }\n\n  setSelection(waitingForDragFrom, false)\n  const table = waitingForDragFrom.closest<HTMLElement>('.js-diff-table')!\n  waitingForDragFrom = null\n\n  table.classList.add('is-selecting')\n  table.classList.add('is-commenting')\n\n  document.addEventListener(\n    'mouseup',\n    function (e: MouseEvent) {\n      table.classList.remove('is-selecting')\n      table.classList.remove('is-selecting', 'is-commenting')\n      showMultiLineCommentForm && showMultiLineCommentForm()\n      showMultiLineCommentForm = null\n      removeCommentSelectionEvents(table)\n      e.preventDefault()\n    },\n    {once: true}\n  )\n}\n\nfunction commentSelectionMouseverToCode(codeElement: Element) {\n  const target = nearestLinkableLineNumber(codeElement)\n\n  if (!target || !isSelecting(target)) {\n    return\n  }\n\n  setSelection(target, true)\n}\n\nfunction commentSelectionMouseverToLineNumbers(lineNumberElement: Element) {\n  if (!isSelecting(lineNumberElement)) {\n    return\n  }\n\n  setSelection(lineNumberElement, true)\n}\n\nfunction handleDragMouseEvent(event: MouseEvent) {\n  const target = event.target\n  if (!(target instanceof Element)) {\n    return\n  }\n\n  if (waitingForDragFrom) {\n    beginDrag()\n  }\n\n  const cell = target.closest('.blob-code, .js-linkable-line-number')\n  if (!cell) {\n    return\n  }\n\n  if (cell.classList.contains('blob-code')) {\n    return commentSelectionMouseverToCode(cell)\n  }\n\n  if (cell.classList.contains('js-linkable-line-number')) {\n    commentSelectionMouseverToLineNumbers(cell)\n  }\n}\n\nfunction addCommentSelectionEvents(container: HTMLElement) {\n  container.addEventListener('mouseenter', handleDragMouseEvent, {capture: true})\n}\n\nfunction removeCommentSelectionEvents(container: HTMLElement) {\n  isDraggingForComment = false\n  container.removeEventListener('mouseenter', handleDragMouseEvent, {capture: true})\n  setTimeout(() => {\n    document.addEventListener('click', handleClick, {once: true})\n  }, 0)\n}\n\non('mousedown', '.js-add-line-comment', function (event) {\n  const parent = (event.target as Element).parentElement\n\n  if (!parent) {\n    return\n  }\n\n  if (!isMultiLineCommentingEnabled(event.target as Element)) {\n    return\n  }\n\n  const lineNumber = nearestLinkableLineNumber(parent)\n\n  if (!lineNumber) {\n    return\n  }\n\n  const table = (event.target as Element).closest<HTMLElement>('.js-diff-table')!\n\n  addCommentSelectionEvents(table)\n  waitingForDragFrom = lineNumber\n  isDraggingForComment = true\n\n  // If the user is just clicking to leave a single line comment, cancel\n  // the drag behaviors\n  event.target!.addEventListener(\n    'mouseup',\n    function () {\n      removeCommentSelectionEvents(table)\n      waitingForDragFrom = null\n      isDraggingForComment = false\n    },\n    {once: true}\n  )\n\n  if (currentRange && currentRange.lineCount > 1) {\n    event.preventDefault()\n  }\n})\n\non('mousedown', '.js-linkable-line-number', function (event) {\n  if (!(event instanceof MouseEvent)) {\n    return\n  }\n\n  // Don't do anything for right click\n  if (event.button !== 0) {\n    return\n  }\n\n  const target = event.target\n\n  if (!(target instanceof Element)) {\n    return\n  }\n  const table = target.closest<HTMLElement>('.js-diff-table')!\n  table.classList.add('is-selecting')\n  addCommentSelectionEvents(table)\n\n  document.addEventListener(\n    'mouseup',\n    function () {\n      target.closest<HTMLElement>('.js-diff-table')!.classList.remove('is-selecting')\n      removeCommentSelectionEvents(table)\n    },\n    {once: true}\n  )\n\n  setSelection(target, event instanceof MouseEvent && event.shiftKey)\n\n  event.preventDefault()\n})\n\nfunction drawBorderForSplit() {\n  if (!currentRange) {\n    return\n  }\n\n  for (const el of currentRange.elements) {\n    el.classList.add('selected-line')\n  }\n\n  const leftLineNumbers = []\n  const leftLineCodes = []\n  const rightLineNumbers = []\n  const rightLineCodes = []\n\n  for (const el of currentRange.rows()) {\n    const [leftNumber, leftCode, rightNumber, rightCode] = el.children\n    leftLineNumbers.push(leftNumber)\n    leftLineCodes.push(leftCode)\n    rightLineNumbers.push(rightNumber)\n    rightLineCodes.push(rightCode)\n  }\n\n  function doBorder(array: Element[]) {\n    for (const [i, el] of array.entries()) {\n      if (el.classList.contains('empty-cell')) {\n        continue\n      }\n\n      const prevElement = array[i - 1]\n      if (!prevElement || !prevElement.classList.contains('selected-line')) {\n        el.classList.add('selected-line-top')\n      }\n\n      const nextElement = array[i + 1]\n      if (!nextElement || !nextElement.classList.contains('selected-line')) {\n        el.classList.add('selected-line-bottom')\n      }\n    }\n  }\n\n  doBorder(leftLineNumbers)\n  doBorder(leftLineCodes)\n  doBorder(rightLineNumbers)\n  doBorder(rightLineCodes)\n\n  for (const [i, el] of leftLineCodes.entries()) {\n    if (!rightLineCodes[i].classList.contains('selected-line')) {\n      el.classList.add('selected-line-right')\n    }\n  }\n\n  for (const [i, el] of rightLineNumbers.entries()) {\n    if (!leftLineCodes[i].classList.contains('selected-line')) {\n      el.classList.add('selected-line-left')\n    }\n  }\n}\n\nfunction drawBorderForUnified() {\n  if (!currentRange) {\n    return\n  }\n\n  for (const el of currentRange.elements) {\n    el.classList.add('selected-line')\n  }\n\n  const trs = Array.from(currentRange.rows())\n  const firstTR = trs[0]\n  for (const el of firstTR.children) {\n    el.classList.add('selected-line-top')\n  }\n\n  const lastTR = trs[trs.length - 1]\n  for (const el of lastTR.children) {\n    el.classList.add('selected-line-bottom')\n  }\n}\n\nfunction showHighlight() {\n  if (currentRange) {\n    for (const el of currentRange.elements) {\n      el.classList.remove(\n        'selected-line',\n        'selected-line-top',\n        'selected-line-bottom',\n        'selected-line-left',\n        'selected-line-right'\n      )\n    }\n    currentRange = null\n  }\n\n  const parsedAnchor = matchHash(window.location.hash)\n  if (!parsedAnchor) return\n\n  const diffId = parsedAnchor[1]\n  const startSide = parsedAnchor[2]\n  const startLine = parsedAnchor[3]\n  const endSide = parsedAnchor[4] || startSide\n  const endLine = parsedAnchor[5] || startLine\n\n  currentRange = new DiffRange(diffId, startSide, +startLine, endSide, +endLine)\n\n  const rangeLines = Array.from(currentRange.elements)\n  const firstCell = rangeLines[0]\n\n  if (!firstCell) {\n    return\n  }\n\n  if (firstCell.closest<HTMLElement>('.js-diff-table')!.classList.contains('file-diff-split')) {\n    drawBorderForSplit()\n  } else {\n    drawBorderForUnified()\n  }\n}\n\nfunction sendHydroEvent(trackingElement: HTMLElement, diffRange: DiffRange) {\n  const hydroContextAttributes = {\n    starting_diff_position: diffRange.start.side + diffRange.start.lineNumber,\n    ending_diff_position: diffRange.end.side + diffRange.end.lineNumber,\n    line_count: diffRange.lineCount\n  }\n  trackingElement.setAttribute('data-hydro-client-context', JSON.stringify(hydroContextAttributes))\n  trackView(trackingElement)\n}\n\nhashChange(showHighlight)\n\n// Try to highlight again if we expanded the diff and load more lines\nobserve('.blob-expanded', showHighlight)\n\n// Try to highlight again if we progressively loaded more parts of the diff\nobserve('.js-diff-progressive-loader', function (loader) {\n  loader.addEventListener('load', showHighlight)\n})\nobserve('.js-diff-entry-loader', function (loader) {\n  loader.addEventListener('load', showHighlight)\n})\n","import {getDocumentHtmlSafeNonces, verifyResponseHtmlSafeNonce} from './html-safe'\nimport {parseHTML} from './parse-html'\n\n/**\n * @deprecated see https://github.com/github/web-systems/issues/274\n */\nclass ResponseError extends Error {\n  response: Response\n  framesToPop: number\n\n  constructor(response: Response) {\n    super()\n    this.response = response\n    this.framesToPop = 1\n  }\n}\n\n/**\n * @deprecated see https://github.com/github/web-systems/issues/274\n */\nfunction checkStatus(response: Response, responseError: ResponseError): Response {\n  if (response.status >= 200 && response.status < 300) {\n    return response\n  } else {\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n}\n\n/**\n * @deprecated see https://github.com/github/web-systems/issues/274\n */\nfunction makeRequest(init: RequestInfo, options?: RequestInit): Request {\n  const opts = options ? Object.assign({}, options) : {}\n\n  const request = new Request(init, opts)\n  request.headers.append('X-Requested-With', 'XMLHttpRequest')\n\n  return request\n}\n\nexport async function fetchSafeDocumentFragment(\n  document: Document,\n  url: RequestInfo,\n  options?: RequestInit\n): Promise<DocumentFragment> {\n  const response = await self.fetch(makeRequest(url, options))\n  const responseError = new ResponseError(response)\n  checkStatus(response, responseError)\n  verifyResponseHtmlSafeNonce(getDocumentHtmlSafeNonces(document), response)\n  return parseHTML(document, await response.text())\n}\n\nexport function fetchPoll(url: RequestInfo, options?: RequestInit): Promise<Response> {\n  return (async function poll(wait: number): Promise<Response> {\n    const response = await self.fetch(makeRequest(url, options))\n    const responseError = new ResponseError(response)\n    checkStatus(response, responseError)\n\n    if (response.status === 200) return response\n    if (response.status === 202) {\n      await new Promise(resolve => setTimeout(resolve, wait))\n      return poll(wait * 1.5)\n    }\n    throw new ResponseError(response)\n  })(1000)\n}\n","// Navigation Behavior\n//\n// Provides basic cursor, vi and emacs keyboard navigation. As well as\n// mouseover selection.\n//\n// item Element with .js-navigation-item. The current focused\n//            item is denoted with the .navigation-focus class.\n// container Element with .js-navigation-container class name.\n//                 Contains item elements. The active container is denoted\n//                 by the .js-active-navigation-container class.\n//\n// The .js-active-navigation-container class can be part of the html or\n// added programmatically with navigation('focus'). Making it part of\n// the template will automatically activate it without any extra JS.\n// Just make sure its the only active container on the page.\n//\n// li.navigation-focus { background: yellow; }\n//\n// <ul class=\"js-navigation-container js-active-navigation-container\">\n//   <li class=\"js-navigation-item\"><a href=\"\">One</a></li>\n//   <li class=\"js-navigation-item\"><a href=\"\">Two</a></li>\n//   <li class=\"js-navigation-item\"><a href=\"\">Three</a></li>\n// </ul>\n//\n// Methods\n//\n// .navigation('active')\n//\n// Returns current active container.\n//\n// .navigation('activate')\n//\n// Activates navigation container.\n//\n// .navigation('deactivate')\n//\n// Deactivates navigation container.\n//\n// .navigation('push')\n//\n// Activates navigation container and push it onto a stack.\n//\n// .navigation('pop')\n//\n// Deactivates navigation container and remove it from stack. Then\n// activate the previous container on the top of the stack.\n//\n// .navigation('focus')\n//\n// Activates navigation container and focus first item.\n//\n// .navigation('clear')\n//\n// Removes current focus.\n//\n// .navigation('refocus')\n//\n// Removes current focus and focuses on the first item.\n//\n//\n// Events\n//\n// navigation:focus\n//\n// Bubbles Yes\n// Cancelable Yes\n// Default action Focus navigation item\n// Target .js-navigation-item Element\n//\n// navigation:keydown\n//\n// Bubbles Yes\n// Cancelable Yes\n// Default action Deactivate navigation\n// Target .js-navigation-item or .js-navigation-container Element\n// Context info\n//   * originalEvent - keydown event\n//   * relatedTarget - .js-navigation-container Element\n//\n// navigation:keyopen\n//\n// Bubbles Yes\n// Cancelable No\n// Target .js-navigation-item Element\n// Context info\n//   * modifierKey - Boolean for ctrl or command modifier key\n//\n// navigation:open\n//\n// Bubbles Yes\n// Cancelable Yes\n// Target .js-navigation-item Element\n// Context info\n//   * modifierKey - Boolean for ctrl or command modifier key\n//\n\nimport {compose, fromEvent} from './subscription'\nimport {fire, on} from 'delegated-events'\nimport {overflowOffset, overflowParent, positionedOffset} from './dimensions'\nimport {eventToHotkeyString} from '@github/hotkey'\nimport {observe} from 'selector-observer'\nimport scrollTo from './scrollto'\nimport visible from './visible'\n\nconst ctrlBindings = navigator.userAgent.match(/Macintosh/)\nconst modifierKey = ctrlBindings ? 'metaKey' : 'ctrlKey'\nconst hotkeyModifier = ctrlBindings ? 'Meta' : 'Control'\n\nlet disableMouseEvents = false\nlet mousePosition = {\n  x: 0,\n  y: 0\n}\n\ntype ScrollBehavior = 'auto' | 'smooth'\n\n// Binds mouseover handlers on navigation containers.\n//\n// This is an optimization to avoid adding a global mouseover to document.\nobserve('.js-navigation-container:not(.js-navigation-container-no-mouse)', {\n  subscribe: el =>\n    compose(fromEvent(el, 'mouseover', onContainerMouseMove), fromEvent(el, 'mouseover', onContainerMouseOver))\n})\n\n// Tracks last mouse position inside container.\nfunction onContainerMouseMove(event: Event) {\n  if (!(event instanceof MouseEvent)) return\n  if (mousePosition.x !== event.clientX || mousePosition.y !== event.clientY) {\n    disableMouseEvents = false\n  }\n  mousePosition = {\n    x: event.clientX,\n    y: event.clientY\n  }\n}\n\nfunction onContainerMouseOver(event: Event) {\n  if (disableMouseEvents) {\n    return\n  }\n  const container = event.currentTarget\n  const {target} = event\n  if (\n    !(target instanceof Element) ||\n    !(container instanceof HTMLElement) ||\n    !container.closest('.js-active-navigation-container')\n  ) {\n    return\n  }\n  const item = target.closest('.js-navigation-item')\n  if (item) focusItem(item, container)\n}\n\nlet count = 0\nobserve('.js-active-navigation-container', {\n  add() {\n    count++\n    if (count === 1) document.addEventListener('keydown', fireCustomKeydown)\n  },\n  remove() {\n    count--\n    if (count === 0) document.removeEventListener('keydown', fireCustomKeydown)\n  }\n})\n\n// Dispatches custom events from focused items.\n//\n// It also makes it easy to bind custom hotkeys to focused items.\nfunction fireCustomKeydown(event: KeyboardEvent) {\n  if (\n    event.target !== document.body &&\n    event.target instanceof HTMLElement &&\n    !event.target.classList.contains('js-navigation-enable')\n  ) {\n    return\n  }\n\n  disableMouseEvents = true\n\n  const container = getActiveContainer()\n  let dispatched = false\n\n  if (container) {\n    const target = container.querySelector('.js-navigation-item.navigation-focus') || container\n    dispatched = fire(target, 'navigation:keydown', {\n      hotkey: eventToHotkeyString(event),\n      originalEvent: event,\n      originalTarget: event.target\n    })\n  }\n\n  if (!dispatched) {\n    event.preventDefault()\n  }\n}\n\non('navigation:keydown', '.js-active-navigation-container', function (event) {\n  const container = event.currentTarget as HTMLElement\n  const isInput = event.detail.originalTarget.matches('input, textarea')\n  const item = event.target as HTMLElement\n\n  if (item.classList.contains('js-navigation-item')) {\n    if (isInput) {\n      if (ctrlBindings) {\n        switch (eventToHotkeyString(event.detail.originalEvent)) {\n          case 'Control+n':\n            cursorDown(item, container)\n            break\n          case 'Control+p':\n            cursorUp(item, container)\n        }\n      }\n      switch (eventToHotkeyString(event.detail.originalEvent)) {\n        case 'ArrowUp':\n          cursorUp(item, container)\n          break\n        case 'ArrowDown':\n          cursorDown(item, container)\n          break\n        case 'Enter':\n        case `${hotkeyModifier}+Enter`:\n          keyOpen(item, event.detail.originalEvent[modifierKey])\n          break\n      }\n    } else {\n      if (ctrlBindings) {\n        switch (eventToHotkeyString(event.detail.originalEvent)) {\n          case 'Control+n':\n            cursorDown(item, container)\n            break\n          case 'Control+p':\n            cursorUp(item, container)\n            break\n          case 'Alt+v':\n            pageUp(item, container)\n            break\n          case 'Control+v':\n            pageDown(item, container)\n        }\n      }\n      switch (eventToHotkeyString(event.detail.originalEvent)) {\n        case 'j':\n        case 'J':\n          cursorDown(item, container)\n          break\n        case 'k':\n        case 'K':\n          cursorUp(item, container)\n          break\n        case 'o':\n        case 'Enter':\n        case `${hotkeyModifier}+Enter`:\n          keyOpen(item, event.detail[modifierKey])\n          break\n      }\n    }\n  } else {\n    const firstItem = getItems(container)[0]\n    if (firstItem) {\n      if (isInput) {\n        if (ctrlBindings) {\n          switch (eventToHotkeyString(event.detail.originalEvent)) {\n            case 'Control+n':\n              focusItem(firstItem, container)\n          }\n        }\n        switch (eventToHotkeyString(event.detail.originalEvent)) {\n          case 'ArrowDown':\n            focusItem(firstItem, container)\n        }\n      } else {\n        if (ctrlBindings) {\n          switch (eventToHotkeyString(event.detail.originalEvent)) {\n            case 'Control+n':\n            case 'Control+v':\n              focusItem(firstItem, container)\n          }\n        }\n        switch (eventToHotkeyString(event.detail.originalEvent)) {\n          case 'j':\n            focusItem(firstItem, container)\n        }\n      }\n    }\n  }\n\n  if (isInput) {\n    if (ctrlBindings) {\n      switch (eventToHotkeyString(event.detail.originalEvent)) {\n        case 'Control+n':\n        case 'Control+p':\n          event.preventDefault()\n      }\n    }\n    switch (eventToHotkeyString(event.detail.originalEvent)) {\n      case 'ArrowUp':\n      case 'ArrowDown':\n        event.preventDefault()\n        break\n      case 'Enter':\n        event.preventDefault()\n    }\n  } else {\n    if (ctrlBindings) {\n      switch (eventToHotkeyString(event.detail.originalEvent)) {\n        case 'Control+n':\n        case 'Control+p':\n        case 'Control+v':\n        case 'Alt+v':\n          event.preventDefault()\n      }\n    }\n    switch (eventToHotkeyString(event.detail.originalEvent)) {\n      case 'j':\n      case 'k':\n        event.preventDefault()\n        break\n      case 'o':\n      case 'Enter':\n      case `${modifierKey}+Enter`:\n        event.preventDefault()\n    }\n  }\n})\n\n// Fire custom navigation:open event.\n//\n// Examples:\n//\n// on('navigation:open', '.listings .listing', function() {\n//   window.location = this.querySelector('a').getAttribute('href')\n// }).\nfunction fireOpen(\n  event: Event & {modifierKey?: boolean; altKey?: boolean; ctrlKey?: boolean; metaKey?: boolean; shiftKey?: boolean}\n) {\n  const modifier = event.modifierKey || event.altKey || event.ctrlKey || event.metaKey\n  const dispatched = fire(event.currentTarget as Element, 'navigation:open', {\n    modifierKey: modifier,\n    shiftKey: event.shiftKey\n  })\n\n  if (!dispatched) {\n    event.preventDefault()\n  }\n}\n\n// Open the item on click.\non('click', '.js-active-navigation-container .js-navigation-item', function (event) {\n  fireOpen(event)\n})\n\n// Handle keydown open events.\non('navigation:keyopen', '.js-active-navigation-container .js-navigation-item', function (event) {\n  const a = event.currentTarget.classList.contains('js-navigation-open')\n    ? event.currentTarget\n    : event.currentTarget.querySelector('.js-navigation-open')\n  if (a instanceof HTMLAnchorElement) {\n    if (event.detail.modifierKey) {\n      window.open(a.href, '_blank')\n      window.focus()\n    } else {\n      const clicked = a.dispatchEvent(\n        new MouseEvent('click', {\n          bubbles: true,\n          cancelable: true\n        })\n      )\n      if (clicked) {\n        a.click()\n      }\n    }\n    event.preventDefault()\n  } else {\n    fireOpen(event)\n  }\n})\n\n// Make container active by adding the js-active-navigation-container class to it.\nexport function activate(container: Element) {\n  const activeContainer = getActiveContainer()\n  if (container !== activeContainer) {\n    if (activeContainer) deactivate(activeContainer)\n    container.classList.add('js-active-navigation-container')\n  }\n}\n\n// Remove active id from container.\nexport function deactivate(container: Element) {\n  container.classList.remove('js-active-navigation-container')\n}\n\nconst containerStack: Element[] = []\n\n// Active container and push previous onto a stack.\nexport function push(container: HTMLElement) {\n  const activeContainer = getActiveContainer()\n  if (activeContainer) {\n    containerStack.push(activeContainer)\n  }\n  activate(container)\n}\n\n// Deactivate container and activate the next on the stack.\nexport function pop(container: Element) {\n  deactivate(container)\n  clear(container)\n\n  const activeContainer = containerStack.pop()\n  if (activeContainer) {\n    activate(activeContainer)\n  }\n}\n\n// Active the container and focus on the target or first element.\nexport function focus(container: HTMLElement, targetElement?: HTMLElement) {\n  const target = targetElement || container\n\n  const firstItem = getItems(container)[0]\n  const item = target.closest('.js-navigation-item') || firstItem\n\n  activate(container)\n\n  if (item instanceof HTMLElement) {\n    const focusPrevented = focusItem(item, container)\n    if (focusPrevented) {\n      return\n    }\n    const parent = overflowParent(item)\n    scrollItemTo(parent!, item)\n  }\n}\n\n// Clear current focus.\nexport function clear(container: Element) {\n  const elements = container.querySelectorAll('.js-navigation-item.navigation-focus')\n  for (const element of elements) {\n    element.classList.remove('navigation-focus')\n  }\n}\n\n// Clear current focus and focus on the target or first element.\nexport function refocus(container: HTMLElement, target?: HTMLElement) {\n  clear(container)\n  focus(container, target)\n}\n\n// Select the previous item and scroll to it if its off screen.\nfunction cursorUp(item: HTMLElement, container: HTMLElement) {\n  const items = getItems(container)\n  const index = items.indexOf(item)\n  const previous = items[index - 1]\n  if (previous) {\n    const focusPrevented = focusItem(previous, container)\n    if (focusPrevented) {\n      return\n    }\n\n    const overflowParentEl = overflowParent(previous)\n    if (getScrollStyle(container) === 'page') {\n      scrollPageTo(overflowParentEl!, previous)\n    } else {\n      scrollItemTo(overflowParentEl!, previous)\n    }\n  }\n}\n\n// Select the next item and scroll to it if its off screen.\nfunction cursorDown(item: HTMLElement, container: HTMLElement) {\n  const items = getItems(container)\n  const index = items.indexOf(item)\n  const next = items[index + 1]\n\n  if (next) {\n    const focusPrevented = focusItem(next, container)\n    if (focusPrevented) {\n      return\n    }\n\n    const overflowParentEl = overflowParent(next)\n    if (getScrollStyle(container) === 'page') {\n      scrollPageTo(overflowParentEl!, next)\n    } else {\n      scrollItemTo(overflowParentEl!, next)\n    }\n  }\n}\n\n// Scrolls up to the previous item that is above the viewport.\nfunction pageUp(item: HTMLElement, container: HTMLElement) {\n  const items = getItems(container)\n  let index = items.indexOf(item)\n  const overflowParentEl = overflowParent(item)\n\n  if (overflowParentEl == null) {\n    return\n  }\n\n  let previous\n  let dimension\n  while (\n    (previous = items[index - 1]) &&\n    (dimension = overflowOffset(previous, overflowParentEl)) &&\n    dimension.top >= 0\n  ) {\n    index--\n  }\n\n  if (previous) {\n    const focusPrevented = focusItem(previous, container)\n    if (focusPrevented) {\n      return\n    }\n\n    scrollPageTo(overflowParentEl, previous)\n  }\n}\n\n// Scrolls down to the next item that is below the viewport.\nfunction pageDown(item: HTMLElement, container: HTMLElement) {\n  const items = getItems(container)\n  let index = items.indexOf(item)\n  const overflowParentEl = overflowParent(item)\n\n  if (overflowParentEl == null) {\n    return\n  }\n\n  let next\n  let dimension\n  while ((next = items[index + 1]) && (dimension = overflowOffset(next, overflowParentEl)) && dimension.bottom >= 0) {\n    index++\n  }\n\n  if (next) {\n    const focusPrevented = focusItem(next, container)\n    if (focusPrevented) {\n      return\n    }\n    scrollPageTo(overflowParentEl, next)\n  }\n}\n\n// Handle opening item from keyboard.\n//\n// Hitting o or enter on a item will call this method.\nfunction keyOpen(item: Element, modifier = false) {\n  fire(item, 'navigation:keyopen', {\n    modifierKey: modifier\n  })\n}\n\nfunction focusItem(target: Element, container: Element): boolean {\n  if (fire(target, 'navigation:focus')) {\n    clear(container)\n    target.classList.add('navigation-focus')\n\n    return false\n  } else {\n    return true\n  }\n}\n\nfunction getActiveContainer() {\n  return document.querySelector('.js-active-navigation-container')\n}\n\nfunction getItems(container: Element): HTMLElement[] {\n  const items = []\n  for (const element of container.querySelectorAll('.js-navigation-item')) {\n    if (element instanceof HTMLElement && visible(element)) {\n      items.push(element)\n    }\n  }\n\n  return items\n}\n\nfunction getScrollStyle(container: HTMLElement): string {\n  return container.getAttribute('data-navigation-scroll') || 'item'\n}\n\nfunction scrollPageTo(container: HTMLElement, element: HTMLElement, behavior: ScrollBehavior = 'smooth') {\n  const overflow = overflowOffset(element, container)\n  if (!overflow) return\n\n  if (overflow.bottom <= 0) {\n    element.scrollIntoView({behavior, block: 'start'})\n  } else if (overflow.top <= 0) {\n    element.scrollIntoView({behavior, block: 'end'})\n  }\n}\n\nfunction scrollItemTo(container: HTMLElement, element: HTMLElement) {\n  const position = positionedOffset(element, container)\n  const overflow = overflowOffset(element, container)\n\n  if (position == null || overflow == null) {\n    return\n  }\n\n  if (overflow.bottom <= 0 && document.body) {\n    const scrollHeight = container.offsetParent != null ? container.scrollHeight : document.body.scrollHeight\n    const scrollTop = scrollHeight - (position.bottom + overflow.height!)\n    scrollTo(container, {\n      top: scrollTop\n    })\n  } else if (overflow.top <= 0) {\n    scrollTo(container, {\n      top: position.top\n    })\n  }\n}\n","type Dimensions = {\n  top: number\n  left: number\n  bottom: number\n  right: number\n  height?: number\n  width?: number\n}\n\ntype Offset = {\n  top: number\n  left: number\n}\n\n// Returns the current coordinates of the element relative to the document.\nexport function offset(element: HTMLElement): Offset {\n  const rect = element.getBoundingClientRect()\n  return {\n    top: rect.top + window.pageYOffset,\n    left: rect.left + window.pageXOffset\n  }\n}\n\n// Get the closest ancestor element that has a scroll overflow.\n//\n// Will walk up the DOM from the element until it reaches an element with\n// overflow scroll. Basically, an element that can have scroll bars.\nexport function overflowParent(targetElement: HTMLElement): HTMLElement | null | undefined {\n  let element = targetElement\n  const document = element.ownerDocument\n  if (!document) {\n    return\n  }\n\n  if (!element.offsetParent) {\n    return\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n  // @ts-ignore\n  const HTMLElement = document.defaultView.HTMLElement\n\n  if (element === document.body) {\n    return\n  }\n\n  while (element !== document.body) {\n    if (element.parentElement instanceof HTMLElement) {\n      element = element.parentElement!\n    } else {\n      return\n    }\n\n    const {position, overflowY, overflowX} = getComputedStyle(element)\n    if (\n      position === 'fixed' ||\n      overflowY === 'auto' ||\n      overflowX === 'auto' ||\n      overflowY === 'scroll' ||\n      overflowX === 'scroll'\n    ) {\n      break\n    }\n  }\n\n  return element instanceof Document ? null : element\n}\n\n// Returns overflow/scroll offset relative to the container.\n//\n// Get element overflow offset.\n//\n// This value is useful for figuring out if the element is outside the\n// scrollbars of the container. If `top` is negative, the top of the\n// element is above the scroll view. If `bottom` is negative, the\n// bottom of the element is below the scroll view.\n//\n// +--------------------+.\n// | (outside viewport) |\n// +--------------------+ -|\n// |          |         |  |\n// |    top > |         |  |\n// |          |         |  | h\n// |          |         |  | e\n// |  v left  V right v |  | i\n// |-----> Element <----|  | g\n// |          ^         |  | h\n// |          |         |  | t\n// | bottom > |         |  |\n// |          |         |  |\n// +--------------------+ -|\n// | (outside viewport) |\n// +--------------------+.\n//\n// //=> {top: 100, left: 100, bottom: 800, right: 800, height: 1000, width 1000}.\nexport function overflowOffset(\n  element: HTMLElement,\n  targetContainer: Document | HTMLElement | null\n): Dimensions | undefined {\n  let container = targetContainer\n  const document = element.ownerDocument\n  if (!document) {\n    return\n  }\n\n  const documentElement = document.documentElement\n  if (!documentElement) {\n    return\n  }\n\n  if (element === documentElement) {\n    return\n  }\n\n  const elementOffset = positionedOffset(element, container)\n  if (!elementOffset) {\n    return\n  }\n\n  container = elementOffset._container\n\n  const scroll =\n    container === document.documentElement && document.defaultView\n      ? {\n          top: document.defaultView.pageYOffset,\n          left: document.defaultView.pageXOffset\n        }\n      : {\n          top: container.scrollTop,\n          left: container.scrollLeft\n        }\n\n  const top = elementOffset.top - scroll.top\n  const left = elementOffset.left - scroll.left\n  const height = container.clientHeight\n  const width = container.clientWidth\n  const bottom = height - (top + element.offsetHeight)\n  const right = width - (left + element.offsetWidth)\n  return {top, left, bottom, right, height, width}\n}\n\n// Returns position offset relative to the container.\n//\n// Measures the number of pixels from the top of the container to the\n// top of the element and the number of pixels from the bottom of the\n// containers full scroll height to the bottom of the element. If\n// container is `body`, this is the same as $(element).offset().\n//\n//     +---------------------+ -|\n//     |  outside | viewport |  |\n//     +----------|----------+  |\n//     |          |          |  |\n//     |    top > |          |  |\n//     |          |          |  | h\n//     |          |          |  | e\n//     |  v left  V right v  |  | i\n//     |-----> Element <-----|  | g\n//     |          ^          |  | h\n//     |          |          |  | t\n//     | bottom > |          |  |\n//     |          |          |  |\n//     +----------|----------+  |\n//     |  outside | viewport |  |\n//     +---------------------+ -|\n//\n//   {top: 100, left: 100, bottom: 800, right: 800}.\n//\n// Get element positioned offset.\n//\n// This value is useful for assigning to `scrollTop` to scroll to the item.\nexport function positionedOffset(\n  targetElement: HTMLElement,\n  container: HTMLElement | Document | Window | null\n): (Dimensions & {_container: HTMLElement}) | undefined {\n  let element = targetElement\n  const document = element.ownerDocument\n  if (!document) {\n    return\n  }\n\n  const documentElement = document.documentElement\n  if (!documentElement) {\n    return\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n  // @ts-ignore\n  const HTMLElement = document.defaultView.HTMLElement\n\n  let top = 0\n  let left = 0\n  const height = element.offsetHeight\n  const width = element.offsetWidth\n\n  while (!(element === document.body || element === container)) {\n    top += element.offsetTop || 0\n    left += element.offsetLeft || 0\n\n    if (element.offsetParent instanceof HTMLElement) {\n      element = (element.offsetParent as HTMLElement)!\n    } else {\n      return\n    }\n  }\n\n  let scrollHeight\n  let scrollWidth\n  let measuredContainer: HTMLElement\n\n  if (\n    !container ||\n    container === document ||\n    container === document.defaultView ||\n    container === document.documentElement ||\n    container === document.body\n  ) {\n    measuredContainer = documentElement\n    scrollHeight = getDocumentHeight(document.body, documentElement)\n    scrollWidth = getDocumentWidth(document.body, documentElement)\n  } else if (container instanceof HTMLElement) {\n    measuredContainer = container as HTMLElement\n    scrollHeight = (container as HTMLElement).scrollHeight\n    scrollWidth = (container as HTMLElement).scrollWidth\n  } else {\n    return\n  }\n\n  const bottom = scrollHeight - (top + height)\n  const right = scrollWidth - (left + width)\n  return {top, left, bottom, right, _container: measuredContainer}\n}\n\nfunction getDocumentHeight(documentBody: HTMLElement, documentElement: HTMLElement): number {\n  return Math.max(\n    documentBody.scrollHeight,\n    documentElement.scrollHeight,\n    documentBody.offsetHeight,\n    documentElement.offsetHeight,\n    documentElement.clientHeight\n  )\n}\n\nfunction getDocumentWidth(documentBody: HTMLElement, documentElement: HTMLElement): number {\n  return Math.max(\n    documentBody.scrollWidth,\n    documentElement.scrollWidth,\n    documentBody.offsetWidth,\n    documentElement.offsetWidth,\n    documentElement.clientWidth\n  )\n}\n","/*\n * Applies state updates from a form (e.g. Mark as read/archive/unsubscribe/star) to the element\n * that represents the notification (e.g. The notification item in the list view, or the\n * notification shelf on an Issue page).\n */\nexport function updateNotificationStates(element: HTMLElement, form: HTMLFormElement) {\n  const notification = element.closest<HTMLElement>('[data-notification-id]')!\n\n  // Toggles read/unread/archive status\n  if (form.hasAttribute('data-status')) {\n    toggleNotificationStatus(notification, form.getAttribute('data-status')!)\n  }\n\n  // Toggles subscribed/unsubscribed status\n  if (form.hasAttribute('data-subscription-status')) {\n    toggleNotificationSubscriptionStatus(notification, form.getAttribute('data-subscription-status')!)\n  }\n\n  // Toggles starred/unstarred status\n  if (form.hasAttribute('data-starred-status')) {\n    toggleNotificationStarredStatus(notification, form.getAttribute('data-starred-status')!)\n  }\n}\n\nfunction toggleNotificationStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-archived', status === 'archived')\n  notification.classList.toggle('notification-unread', status === 'unread')\n  notification.classList.toggle('notification-read', status === 'read')\n}\n\nfunction toggleNotificationSubscriptionStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-unsubscribed', status === 'unsubscribed')\n}\n\nfunction toggleNotificationStarredStatus(notification: HTMLElement, status: string) {\n  notification.classList.toggle('notification-starred', status === 'starred')\n}\n","// This is a simple function that just returns Promise.resolve() It is used in instances when we want to queue a\n// microtask before moving onto the next operation, but want to do so in a very explicit manner: `await microtask`\n// looks a lot clearer in intent than `await void 0` or `await Promise.resolve()`.\n//\n// You would want to use `await microtask()` if you have something that needs to be done very urgently, but still\n// needs to be done asynchronously. This will _not_ yield to the browser for any UI updates or wait for idle, instead\n// it queues a task in the \"microtask\" which is run immediately after the current stack. Use this sparingly. This\n// will likely delay subsequent code for 0-10ms.\nexport function microtask(): Promise<void> {\n  return Promise.resolve()\n}\n\n// This function simply Promisifies requestAnimationFrame so it is awaitable.\n//\n// You would want to use `await animationFrame()` if you're happy to yield to the browser to complete any UI updates\n// before calling your next piece of code. This is useful if - for example - you need to wait for scroll events,\n// or CSS transitions or something. This will likely delay subsequent code for 16ms or so - much longer (30-60ms)\n// if the tab is not focussed.\nexport function animationFrame(): Promise<number> {\n  return new Promise(window.requestAnimationFrame)\n}\n\n// Rejects a promise after a timeout has elapsed. The promise is never\n// successfully fulfilled.\n//\n// Examples\n//\n//   try {\n//     const value = await Promise.race([timeout(100), somethingSlow()])\n//     console.log('Slow operation finished within the timeout', value)\n//   } catch (e) {\n//     console.log('Slow operation did not finish', e)\n//   }\n//\n// Returns a rejected Promise rejected after a timeout.\nexport async function timeout(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>((resolve, reject) => {\n    id = self.setTimeout(() => reject(new Error('timeout')), ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\n// Fulfills a promise after a timeout has elapsed. The promise is never rejected.\n//\n// Examples\n//\n//   step1()\n//   await wait(100)\n//   step2()\n//\n// Returns a Promise fulfilled after a timeout.\nexport async function wait(ms: number, signal?: AbortSignal): Promise<void> {\n  let id\n  const done = new Promise<void>(resolve => {\n    id = self.setTimeout(resolve, ms)\n  })\n  if (!signal) return done\n  try {\n    await Promise.race([done, whenAborted(signal)])\n  } catch (e) {\n    self.clearTimeout(id)\n    throw e\n  }\n}\n\n// Attempt to yield a value from an async function, retrying on rejections\n// with an exponential backoff delay between attempts. If the function never\n// yields a fulfilled promise, the final rejection error is thrown.\n//\n// Examples\n//\n//   try {\n//     const connect = async () => {}\n//     const value = await retry(connect, 3)\n//     console.log('Connected eventually', value)\n//   } catch (e) {\n//     console.log('Could not connect after three attempts', e)\n//   }\n//\n// Returns a promise fulfilled by the function or rejected after attempts expire.\nexport async function retry<T>(\n  fn: () => Promise<T>,\n  attempts: number,\n  maxDelay = Infinity,\n  signal?: AbortSignal\n): Promise<T> {\n  const aborted = signal ? whenAborted(signal) : null\n  for (let i = 0; i < attempts; i++) {\n    try {\n      const op = aborted ? Promise.race([fn(), aborted]) : fn()\n      return await op\n    } catch (e) {\n      if (e.name === 'AbortError') throw e\n      if (i === attempts - 1) throw e\n      const ms = Math.pow(2, i) * 1000\n      const vary = rand(ms * 0.1)\n      await wait(Math.min(maxDelay, ms + vary), signal)\n    }\n  }\n  throw new Error('retry failed')\n}\n\nfunction whenAborted(signal: AbortSignal): Promise<never> {\n  return new Promise((resolve, reject) => {\n    const error = new Error('aborted')\n    error.name = 'AbortError'\n    if (signal.aborted) {\n      reject(error)\n    } else {\n      signal.addEventListener('abort', () => reject(error))\n    }\n  })\n}\n\nfunction rand(max: number): number {\n  return Math.floor(Math.random() * Math.floor(max))\n}\n\nexport function taskQueue<T>(fn: (values: T[]) => unknown): (value: T) => void {\n  const queue: T[] = []\n  return function (value: T) {\n    queue.push(value)\n    if (queue.length === 1) {\n      queueMicrotask(() => {\n        const values = [...queue]\n        queue.length = 0\n        fn(values)\n      })\n    }\n  }\n}\n","export function* eachSlice<T>(values: T[], size: number): Iterable<T[]> {\n  for (let i = 0; i < values.length; i += size) {\n    yield values.slice(i, i + size)\n  }\n}\n\nexport function* filterMap<T, U>(items: T[], map: (item: T) => U | null | undefined): Iterable<U> {\n  for (const item of items) {\n    const value = map(item)\n    if (value != null) {\n      yield value\n    }\n  }\n}\n","import {dialog} from './details-dialog'\nimport {fetchSafeDocumentFragment} from './fetch'\nimport {remoteForm} from '@github/remote-form'\nimport {webauthnSupportLevel} from './webauthn-support-level'\n\nlet sudoPromptExist = false\n\n/**\n * Take a URL and add webauthn params to it.\n *\n * @param {string} oldURL - The old URL.\n * @returns {string} - The new URL with added params.\n */\nfunction urlWithParams(oldURL: string): string {\n  const newURL = new URL(oldURL, window.location.origin)\n  const params = new URLSearchParams(newURL.search.slice(1))\n  params.set('webauthn-support', webauthnSupportLevel())\n  newURL.search = params.toString()\n  return newURL.toString()\n}\n\nasync function loadPromptTemplate(): Promise<HTMLTemplateElement> {\n  const link = document.querySelector<HTMLLinkElement>('link[rel=sudo-modal]')!\n  const template = document.querySelector('.js-sudo-prompt')\n  if (template instanceof HTMLTemplateElement) {\n    return template\n  } else if (link) {\n    const fragment = await fetchSafeDocumentFragment(document, urlWithParams(link.href))\n    document.body.appendChild(fragment)\n    return document.querySelector<HTMLTemplateElement>('.js-sudo-prompt')!\n  } else {\n    throw new Error(\"couldn't load sudo prompt\")\n  }\n}\n\nlet succeeded = false\n\n/**\n * Provide a sudo prompt, and return when it has been filled in or dismissed.\n *\n * @returns {Promise<boolean>} - Resolves to `true` if the user successfully authed with sudo.\n */\nasync function sudoPrompt(): Promise<boolean> {\n  if (sudoPromptExist) return false\n  sudoPromptExist = true\n  succeeded = false\n  const template = await loadPromptTemplate()\n  const content = template.content.cloneNode(true)\n  const prompt = await dialog({content})\n  await new Promise<void>(resolve => {\n    prompt.addEventListener(\n      'dialog:remove',\n      function () {\n        sudoPromptExist = false\n        resolve()\n      },\n      {once: true}\n    )\n  })\n  return succeeded\n}\n\nremoteForm('.js-sudo-form', async function (form, wants) {\n  try {\n    await wants.text()\n  } catch (error) {\n    if (!error.response) throw error\n    let errorMessage\n    switch (error.response.status) {\n      case 401:\n        // eslint-disable-next-line i18n-text/no-en\n        errorMessage = 'Incorrect password.'\n        break\n      case 429:\n        // eslint-disable-next-line i18n-text/no-en\n        errorMessage = 'Too many password attempts. Please wait and try again later.'\n        break\n      default:\n        // eslint-disable-next-line i18n-text/no-en\n        errorMessage = 'Failed to receive a response. Please try again later.'\n    }\n\n    form.querySelector<HTMLElement>('.js-sudo-error')!.textContent = errorMessage\n    form.querySelector<HTMLElement>('.js-sudo-error')!.hidden = false\n    form.querySelector<HTMLInputElement>('.js-sudo-password')!.value = ''\n\n    return\n  }\n  succeeded = true\n  form.closest<HTMLElement>('details')!.removeAttribute('open')\n})\n\n/**\n * Check if user is in sudo mode. If not, show a sudo prompt.\n *\n * @returns {Promise<boolean>} - Will be `true` if user is in or got in sudo mode after prompt.\n */\nexport default async function triggerSudoPrompt(): Promise<boolean> {\n  const response = await fetch('/sessions/in_sudo', {\n    headers: {accept: 'application/json', 'X-Requested-With': 'XMLHttpRequest'}\n  })\n  if (response.ok) {\n    const sudoResponse = await response.text()\n    if (sudoResponse === 'true') {\n      return true\n    } else {\n      return sudoPrompt()\n    }\n  }\n  return sudoPrompt()\n}\n","/* eslint eslint-comments/no-use: off */\n/* eslint-disable github/no-then */\n\n/**\n * Details toggle.\n *\n * Use the details toggle to toggle content on the page. Similar to the\n * [HTML5 details element](https://www.w3.org/wiki/HTML/Elements/details).\n *\n * There are minimum two classes you will need to trigger the JS behavior.\n *\n * Apply the `.js-details-target` class to the element that will trigger\n * the toggle through a mouse click. For accessibility reasons, we recommend using a\n * `<button>` tag for this, but it can be applied to any element.\n *\n * A single `.js-details-container` class will be applied to a parent element that is wrapping\n * all the details components. The behavior will toggle an `Details--on` class on this element\n * which the CSS will use to show and hide the appropriate objects.\n *\n * There are default styling classes that will show and hide content for you. `.Details`\n * is a component that is built to show hidden content on open, and hide shown content\n * on close.\n *\n * The default state of the component is closed. Wrap the content and target with the `Details`\n * class. And apply `Details-content--hidden` to any element that you want *hidden* when closed\n * and *shown* when open.\n *\n * @example\n * ```html\n * <div class=\"Details js-details-container\">\n *   <button type=\"button\" class=\"js-details-target\" aria-expanded=\"false\">See more info</button>\n *   <div class=\"Details-content--hidden\">Hidden details</div>\n * </div>\n * ```\n *\n * Shown content\n *\n * If you have some content that you would like to be *shown* by default and\n * *hidden* when the details is `Details--on`. Then you can use the `Details-content--shown`\n * class.\n *\n * @example\n * ```html\n * <div class=\"Details js-details-container\">\n *   <button type=\"button\" class=\"js-details-target\" aria-expanded=\"false\" aria-label=\"Expand and collapse\">\n *     <%= octicon(\"chevron-down\", :class => \"Details-content--shown\") %>\n *     <%= octicon(\"chevron-up\", :class => \"Details-content--hidden\") %>\n *   </button>\n *   <div class=\"Details-content--shown\">Shown details</div>\n * </div>\n * ```\n */\n\nimport hashChange from './hash-change'\nimport {on} from 'delegated-events'\nimport performTransition from '../perform-transition'\nimport {preservePosition} from 'scroll-anchoring'\n\nfunction restoreAutofocus(container: HTMLElement) {\n  const autofocusEls = container.querySelectorAll<HTMLElement>('input[autofocus], textarea[autofocus]')\n  const autofocusEl = autofocusEls[autofocusEls.length - 1]\n  if (autofocusEl && document.activeElement !== autofocusEl) {\n    autofocusEl.focus()\n  }\n}\n\nfunction hideTooltip(target: HTMLElement) {\n  if (!target.classList.contains('tooltipped')) return\n  target.classList.remove('tooltipped')\n  target.addEventListener(\n    'mouseleave',\n    () => {\n      target.classList.add('tooltipped')\n      // eslint-disable-next-line github/no-blur\n      target.blur()\n    },\n    {once: true}\n  )\n}\n\nfunction groupMembers(group: string): Element[] {\n  return [...document.querySelectorAll('.js-details-container')].filter(\n    el => el.getAttribute('data-details-container-group') === group\n  )\n}\n\nfunction containerTargets(container: Element): Element[] {\n  return [...container.querySelectorAll('.js-details-target')].filter(\n    target => target.closest('.js-details-container') === container\n  )\n}\n\nfunction toggleGroup(container: Element, open: boolean): string | null {\n  const group = container.getAttribute('data-details-container-group')\n  if (!group) return null\n  preservePosition(container, () => {\n    for (const otherContainer of groupMembers(group)) {\n      if (otherContainer !== container) {\n        updateOpenState(otherContainer, open)\n      }\n    }\n  })\n  return group\n}\n\nfunction updateOpenState(container: Element, open: boolean) {\n  container.classList.toggle('open', open)\n  container.classList.toggle('Details--on', open)\n  for (const target of containerTargets(container)) {\n    target.setAttribute('aria-expanded', open.toString())\n  }\n}\n\nexport function toggleDetailsTarget(target: HTMLElement, opts?: {withGroup?: boolean; force?: boolean}) {\n  const containerSelector = target.getAttribute('data-details-container') || '.js-details-container'\n  const container = target.closest<HTMLElement>(containerSelector)!\n  const open = opts?.force ?? !container.classList.contains('open')\n  const withGroup = opts?.withGroup ?? false\n  performTransition(container, () => {\n    updateOpenState(container, open)\n    const group = withGroup ? toggleGroup(container, open) : null\n    Promise.resolve().then(() => {\n      restoreAutofocus(container)\n      hideTooltip(target)\n      container.dispatchEvent(\n        new CustomEvent('details:toggled', {\n          bubbles: true,\n          cancelable: false,\n          detail: {open}\n        })\n      )\n      if (group) {\n        container.dispatchEvent(\n          new CustomEvent('details:toggled-group', {\n            bubbles: true,\n            cancelable: false,\n            detail: {open, group}\n          })\n        )\n      }\n    })\n  })\n}\n\nexport function isDetailsTargetExpanded(target: HTMLElement): boolean {\n  const containerSelector = target.getAttribute('data-details-container') || '.js-details-container'\n  const container = target.closest<HTMLElement>(containerSelector)!\n  const classList = container.classList\n  return classList.contains('Details--on') || classList.contains('open')\n}\n\nexport function handleDetailsTargetClick(event: Event) {\n  const withGroup = (event as MouseEvent).altKey\n  const target = event.currentTarget as HTMLElement\n  toggleDetailsTarget(target, {withGroup})\n  event.preventDefault()\n}\non('click', '.js-details-target', handleDetailsTargetClick)\n\non('click', '.js-close-menu', function (event) {\n  const closeButton = event.target\n  if (!(closeButton instanceof HTMLElement)) return\n  const containerSelector = closeButton.getAttribute('data-details-container') || '.js-details-container'\n  const container = closeButton.closest<HTMLElement>(containerSelector)!\n  container.querySelector<HTMLElement>('.js-open-menu')?.focus()\n})\n\n// Expand collapsed outdated diff if anchor points to it\n//   /github/github/pull/123#discussion-diff-456\n//   /github/github/pull/123#discussion-r345\nhashChange(function ({target}) {\n  if (target) ensureExpanded(target)\n})\n\nexport function ensureExpanded(target: Element) {\n  let toCollapse = false\n  let node = target.parentElement\n  while (node) {\n    if (node.classList.contains('Details-content--shown')) {\n      toCollapse = true\n    }\n    if (node.classList.contains('js-details-container')) {\n      node.classList.toggle('open', !toCollapse)\n      node.classList.toggle('Details--on', !toCollapse)\n      toCollapse = false\n    }\n    node = node.parentElement\n  }\n}\n","export default function timezone(): string | void {\n  if ('Intl' in window) {\n    try {\n      const format = new window.Intl.DateTimeFormat()\n      return format.resolvedOptions().timeZone\n    } catch {\n      // ignore\n    }\n  }\n}\n","function e(e){const t=\"==\".slice(0,(4-e.length%4)%4),n=e.replace(/-/g,\"+\").replace(/_/g,\"/\")+t,r=atob(n),o=new ArrayBuffer(r.length),c=new Uint8Array(o);for(let e=0;e<r.length;e++)c[e]=r.charCodeAt(e);return o}function t(e){const t=new Uint8Array(e);let n=\"\";for(const e of t)n+=String.fromCharCode(e);return btoa(n).replace(/\\+/g,\"-\").replace(/\\//g,\"_\").replace(/=/g,\"\")}function n(e,t,r){if(\"copy\"===t)return r;if(\"convert\"===t)return e(r);if(t instanceof Array)return r.map((r=>n(e,t[0],r)));if(t instanceof Object){const o={};for(const[c,i]of Object.entries(t))if(c in r)null!=r[c]?o[c]=n(e,i.schema,r[c]):o[c]=null;else if(i.required)throw new Error(\"Missing key: \"+c);return o}}function r(e){return{required:!0,schema:e}}function o(e){return{required:!1,schema:e}}const c={type:r(\"copy\"),id:r(\"convert\"),transports:o(\"copy\")},i={appid:o(\"copy\"),appidExclude:o(\"copy\"),credProps:o(\"copy\")},a={appid:o(\"copy\"),appidExclude:o(\"copy\"),credProps:o(\"copy\")},s={publicKey:r({rp:r(\"copy\"),user:r({id:r(\"convert\"),name:r(\"copy\"),displayName:r(\"copy\")}),challenge:r(\"convert\"),pubKeyCredParams:r(\"copy\"),timeout:o(\"copy\"),excludeCredentials:o([c]),authenticatorSelection:o(\"copy\"),attestation:o(\"copy\"),extensions:o(i)}),signal:o(\"copy\")},p={type:r(\"copy\"),id:r(\"copy\"),rawId:r(\"convert\"),response:r({clientDataJSON:r(\"convert\"),attestationObject:r(\"convert\")}),clientExtensionResults:r(a)},l={mediation:o(\"copy\"),publicKey:r({challenge:r(\"convert\"),timeout:o(\"copy\"),rpId:o(\"copy\"),allowCredentials:o([c]),userVerification:o(\"copy\"),extensions:o(i)}),signal:o(\"copy\")},u={type:r(\"copy\"),id:r(\"copy\"),rawId:r(\"convert\"),response:r({clientDataJSON:r(\"convert\"),authenticatorData:r(\"convert\"),signature:r(\"convert\"),userHandle:r(\"convert\")}),clientExtensionResults:r(a)};export const schema={credentialCreationOptions:s,publicKeyCredentialWithAttestation:p,credentialRequestOptions:l,publicKeyCredentialWithAssertion:u};export async function create(r){return function(e){const r=e;return r.clientExtensionResults=e.getClientExtensionResults(),n(t,p,r)}(await navigator.credentials.create(function(t){return n(e,s,t)}(r)))}export async function get(r){return function(e){const r=e;return r.clientExtensionResults=e.getClientExtensionResults(),n(t,u,r)}(await navigator.credentials.get(function(t){return n(e,l,t)}(r)))}export function supported(){return!!(navigator.credentials&&navigator.credentials.create&&navigator.credentials.get&&window.PublicKeyCredential)}\n//# sourceMappingURL=webauthn-json.js.map\n","import {getUtf8StringLength} from '../text'\nimport {onFocus} from '../onfocus'\n\nfunction showRemainingCharacterCount(value: string, limit: number, field: HTMLTextAreaElement | HTMLInputElement) {\n  const container = field.closest('.js-characters-remaining-container')\n  if (!container) {\n    return\n  }\n\n  const remainingEl = container.querySelector<HTMLElement>('.js-characters-remaining')!\n  const suffix = String(remainingEl.getAttribute('data-suffix'))\n  const valueLength = getUtf8StringLength(value)\n  const remainingCount = limit - valueLength\n\n  if (remainingCount <= 20) {\n    remainingEl.textContent = `${remainingCount} ${suffix}`\n    remainingEl.classList.toggle('color-text-danger', remainingCount <= 5)\n    remainingEl.hidden = false\n  } else {\n    remainingEl.hidden = true\n  }\n}\n\nfunction getFieldLimit(input: HTMLTextAreaElement | HTMLInputElement): number {\n  if (input.hasAttribute('data-maxlength')) {\n    return parseInt(input.getAttribute('data-maxlength') || '')\n  }\n\n  return input.maxLength\n}\n\nexport function hasExceededCharacterLimit(input: HTMLTextAreaElement | HTMLInputElement): boolean {\n  const limit = getFieldLimit(input)\n  const valueLength = getUtf8StringLength(input.value)\n  const remainingCount = limit - valueLength\n\n  return remainingCount < 0\n}\n\nexport function updateInputRemainingCharacters(input: HTMLTextAreaElement | HTMLInputElement) {\n  const limit = getFieldLimit(input)\n  showRemainingCharacterCount(input.value, limit, input)\n}\n\nexport function resetCharactersRemainingCounts(container: Element) {\n  const charContainers = container.querySelectorAll('.js-characters-remaining-container')\n\n  for (const charContainer of charContainers) {\n    const input = charContainer.querySelector<HTMLInputElement>('.js-characters-remaining-field')!\n    updateInputRemainingCharacters(input)\n  }\n}\n\nonFocus('.js-characters-remaining-field', function (input) {\n  function onInput() {\n    if (input instanceof HTMLInputElement || input instanceof HTMLTextAreaElement) {\n      updateInputRemainingCharacters(input)\n    }\n  }\n  onInput()\n\n  input.addEventListener('input', onInput)\n  input.addEventListener(\n    'blur',\n    () => {\n      input.removeEventListener('input', onInput)\n    },\n    {once: true}\n  )\n})\n","export default function findNextElementSibling(element: HTMLElement, className: string): HTMLElement | null {\n  const nextSibling = element.nextElementSibling\n  if (nextSibling instanceof HTMLElement) {\n    if (nextSibling.classList.contains(className)) return nextSibling\n    return findNextElementSibling(nextSibling, className)\n  }\n  return null\n}\n","import {supported as webauthnSupported} from '@github/webauthn-json'\n\n// Note: the default feedback value stored in the form is 'unknown', but that\n// should not be used unless the JS fails to run.\ntype WebauthnSupportLevel = 'supported' | 'unsupported'\n\n// Calculates a string value to send to the server.\nexport function webauthnSupportLevel(): WebauthnSupportLevel {\n  return webauthnSupported() ? 'supported' : 'unsupported'\n}\n\n// Calculates a string value to send to the server.\nexport async function iuvpaaSupportLevel(): Promise<WebauthnSupportLevel> {\n  if (await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()) {\n    return 'supported'\n  }\n  return 'unsupported'\n}\n","import {ready} from './document-ready'\n\nlet container: HTMLElement | null = null\n\n;(async function () {\n  await ready\n  createNoticeContainer()\n})()\n\n// Announce an element's text to the screen reader.\nexport function announceFromElement(el: HTMLElement) {\n  announce(getTextContent(el))\n}\n\n// Announce message update to screen reader.\nexport function announce(message: string) {\n  if (!container) return\n  // Clear content first in case the new notice content is the same as the last\n  container.textContent = ''\n  container.textContent = message\n}\n\n// Get the global screen reader notice container.\nfunction createNoticeContainer() {\n  container = document.createElement('div')\n  container.setAttribute('aria-live', 'polite')\n  container.classList.add('sr-only')\n  document.body.append(container)\n}\n\n// Gets the trimmed text content of an element.\nfunction getTextContent(el: HTMLElement): string {\n  // innerText does not contain hidden text\n  /* eslint-disable-next-line github/no-innerText */\n  return (el.getAttribute('aria-label') || el.innerText || '').trim()\n}\n","// pjax behavior\n//\n// Pjaxifies any links with data-pjax or inside a container with\n// data-pjax.\n//\n// The container must be annotated with data-pjax-container and\n// have an ID.\n//\n//   <div id=\"my-container\" data-pjax-container>\n//\n//     <a href=\"/foo\" data-pjax>Foo</a>\n//\n//     <ul data-pjax>\n//       <li><a href=\"/bar\">Bar</a></li>\n//       <li><a href=\"/baz\">Baz</a></li>\n//     </ul>\n//\n//  </div>\n//\n//  <ul data-pjax=\"#my-container\">\n//    <li><a href=\"/bar\">Bar</a></li>\n//    <li><a href=\"/baz\">Baz</a></li>\n//  </ul>\n//\n\nimport {pushState, replaceState} from '../history'\nimport {replaceCachedElements, replaceTransientTags} from '../behaviors/pjax/head'\n\nimport {findFragmentTarget} from '../fragment-target'\nimport {isFeatureEnabled} from '../features'\nimport {parseHTML} from '../parse-html'\nimport {popPrefetchResponseForRequest} from './pjax/prefetch'\nimport {sendStats} from '../stats'\n\ndeclare global {\n  interface Document {\n    addEventListener(\n      type: 'pjax:start',\n      listener: (this: Document, ev: CustomEvent<{url?: string}>) => unknown,\n      options?: boolean | AddEventListenerOptions\n    ): void\n    addEventListener(\n      type: 'pjax:beforeReplace',\n      listener: (\n        this: Document,\n        ev: CustomEvent<{contents?: Array<Node | null>; state: State; previousState: State}>\n      ) => unknown,\n      options?: boolean | AddEventListenerOptions\n    ): void\n    addEventListener(\n      type: 'pjax:hardLoad',\n      listener: (this: Document, ev: CustomEvent<{reason?: string}>) => unknown,\n      options?: boolean | AddEventListenerOptions\n    ): void\n  }\n\n  interface Window {\n    addEventListener(\n      type: 'pjax:beforeReplace',\n      listener: (\n        this: Document,\n        ev: CustomEvent<{contents?: Array<Node | null>; state: State; previousState: State}>\n      ) => unknown,\n      options?: boolean | AddEventListenerOptions\n    ): void\n  }\n}\n\nexport interface PjaxOptions {\n  id?: number\n  url: string\n  container: Element\n  type?: string\n  push?: boolean\n  replace?: boolean\n  scrollTo?: number | false\n  dataType?: string\n  fragment?: string\n  data?: FormData\n  requestUrl?: string\n  target?: HTMLElement\n}\n\nconst maxCacheLength = 20\n\ntype State = {\n  id: number\n  url: string\n  title: string\n  container: string | null\n  fragment?: string\n}\n\nlet currentState: State | null\nlet previousController: AbortController | null = null\n\nfunction dispatch(target: Element, name: string, detail?: unknown): boolean {\n  return target.dispatchEvent(\n    new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true,\n      detail\n    })\n  )\n}\n\n// Loads a URL with ajax, puts the response body inside a container,\n// then pushState()'s the loaded URL.\nexport default async function pjaxRequest(opts: PjaxOptions) {\n  const options = {\n    push: true,\n    replace: false,\n    type: 'GET',\n    dataType: 'html',\n    scrollTo: 0,\n    ...opts\n  }\n\n  options.requestUrl = options.url!\n  const url = parseURL(options.url!)\n  const hash = url.hash\n\n  const context = options.container as HTMLElement\n  const contextSelector = getContainerSelector(context)\n\n  // We want the browser to maintain two separate internal caches: one\n  // for pjax'd partial page loads and one for normal page loads.\n  // Without adding this secret parameter, some browsers will often\n  // confuse the two.\n  if (options.type === 'GET') {\n    url.search += `${url.search ? '&' : ''}_pjax=${encodeURIComponent(contextSelector)}`\n    options.url = url.toString()\n  }\n\n  // Initialize currentState for the initial page load. Assume we're\n  // using the container and options of the link we're loading for the\n  // back button to the initial page. This ensures good back button\n  // behavior.\n  if (!currentState) {\n    currentState = {\n      id: uniqueId(),\n      url: window.location.href,\n      title: document.title,\n      container: contextSelector,\n      fragment: options.fragment\n    }\n    replaceState(currentState, currentState.title, currentState.url)\n  }\n\n  let fetching = isFeatureEnabled('JS_HTTP_CACHE_HEADERS')\n    ? null\n    : popPrefetchResponseForRequest(context, options.requestUrl!)\n\n  if (!fetching) {\n    previousController?.abort()\n    const {signal} = (previousController = new AbortController())\n\n    fetching = fetch(options.url!, {\n      signal,\n      method: options.type,\n      body: options.data,\n      headers: {\n        Accept: 'text/html',\n        'X-PJAX': 'true',\n        'X-PJAX-Container': contextSelector,\n        'X-Requested-With': 'XMLHttpRequest'\n      }\n    })\n  }\n\n  if (options.push === true && options.replace !== true) {\n    // Cache current container element before replacing it\n    cachePush(currentState.id, cloneContents(context))\n\n    pushState(null, '', options.requestUrl!)\n  }\n\n  dispatch(context, 'pjax:start', {url: options.url})\n  dispatch(context, 'pjax:send')\n\n  let response = undefined\n\n  try {\n    response = await fetching\n  } catch (e) {\n    response = undefined\n  }\n\n  if (!response || !response.ok) {\n    const allowed = dispatch(context, 'pjax:error')\n\n    if (options.type === 'GET' && allowed) {\n      // Prefer X-PJAX-URL header if it was set, otherwise fallback to\n      // using the original requested url.\n      const serverUrl = response && response.headers.get('X-PJAX-URL')\n      const responseUrl = serverUrl ? stripInternalParams(parseURL(serverUrl)) : options.requestUrl\n\n      sendStats({pjaxFailureReason: 'response_error', requestUrl: options.requestUrl})\n      locationReplace(responseUrl)\n    }\n\n    dispatch(context, 'pjax:complete')\n    dispatch(context, 'pjax:end')\n    return\n  }\n\n  const previousState = currentState\n  const currentVersion = findVersion()\n  const latestVersion = response.headers.get('X-PJAX-Version')\n  const data = await response.text()\n\n  const container = extractContainer(data, response, options)\n  const {contents} = container\n\n  const containerUrl = parseURL(container.url)\n  if (hash) {\n    containerUrl.hash = hash\n    container.url = containerUrl.href\n  }\n\n  // If there is a layout version mismatch, hard load the new url\n  if (currentVersion && latestVersion && currentVersion !== latestVersion) {\n    dispatch(context, 'pjax:hardLoad', {reason: 'version_mismatch'})\n    sendStats({pjaxFailureReason: 'version_mismatch', requestUrl: options.requestUrl})\n\n    locationReplace(container.url)\n    return\n  }\n\n  // If the new response is missing a body, hard load the page\n  if (!contents) {\n    dispatch(context, 'pjax:hardLoad', {reason: 'missing_response_body'})\n    sendStats({pjaxFailureReason: 'missing_response_body', requestUrl: options.requestUrl})\n    locationReplace(container.url)\n    return\n  }\n\n  currentState = {\n    id: options.id != null ? options.id : uniqueId(),\n    url: container.url,\n    title: container.title,\n    container: contextSelector,\n    fragment: options.fragment\n  }\n\n  if (options.push === true || options.replace === true) {\n    replaceState(currentState, container.title, container.url)\n  }\n\n  // Only blur the focus if the focused element is within the container.\n  const activeElement = document.activeElement\n  const blurFocus = options.container != null && options.container.contains(activeElement)\n\n  // Clear out any focused controls before inserting new page contents.\n  if (activeElement instanceof HTMLElement && blurFocus) {\n    try {\n      // eslint-disable-next-line github/no-blur\n      activeElement.blur()\n    } catch (e) {\n      // nothing\n    }\n  }\n\n  if (container.title) document.title = container.title\n\n  dispatch(context, 'pjax:beforeReplace', {\n    contents,\n    state: currentState,\n    previousState\n  })\n\n  replaceWithNodes(context, contents)\n  replaceCachedElements()\n  replaceTransientTags()\n\n  // FF bug: Won't autofocus fields that are inserted via JS.\n  // This behavior is incorrect. So if theres no current focus, autofocus\n  // the last field.\n  //\n  // http://www.w3.org/html/wg/drafts/html/master/forms.html\n  const autofocusEl = context.querySelector<HTMLElement>('input[autofocus], textarea[autofocus]')\n  if (autofocusEl && document.activeElement !== autofocusEl) {\n    autofocusEl.focus()\n  }\n\n  if (container.scripts) {\n    executeScriptTags(container.scripts)\n  }\n\n  if (container.stylesheets) {\n    injectStyleTags(container.stylesheets)\n  }\n\n  let scrollTo = options.scrollTo\n\n  // Ensure browser scrolls to the element referenced by the URL anchor\n  if (hash) {\n    const target = findFragmentTarget(document, hash)\n    if (target) {\n      const targetRect = target.getBoundingClientRect()\n      scrollTo = targetRect.top + window.pageYOffset\n    }\n  }\n\n  if (typeof scrollTo === 'number') {\n    window.scrollTo(window.pageXOffset, scrollTo)\n  }\n\n  dispatch(context, 'pjax:success')\n  dispatch(context, 'pjax:complete')\n  dispatch(context, 'pjax:end')\n}\n\n// Hard replace current state with url.\n//\n// Work for around WebKit\n//   https://bugs.webkit.org/show_bug.cgi?id=93506\nfunction locationReplace(url: string) {\n  if (currentState) {\n    replaceState(null, '', currentState.url)\n  }\n  window.location.replace(url)\n}\n\nlet initialPop = true\nconst initialURL: string = window.location.href\nconst initialState: State | null = window.history.state\n\n// Initialize currentState if possible\n// Happens when reloading a page and coming forward from a different\n// session history.\nif (initialState && initialState.container) {\n  currentState = initialState\n}\n\n// Non-webkit browsers don't fire an initial popstate event\nif ('state' in window.history) {\n  initialPop = false\n}\n\n// popstate handler takes care of the back and forward buttons\n//\n// You probably shouldn't use pjax on pages with other pushState\n// stuff yet.\nfunction onPjaxPopstate(event: PopStateEvent) {\n  // Hitting back or forward should override any pending PJAX request.\n  if (!initialPop) {\n    previousController?.abort()\n  }\n\n  const previousState = currentState\n  const state: State | null = event.state\n  let direction: Direction = null\n\n  if (state && state.container) {\n    // When coming forward from a separate history session, will get an\n    // initial pop with a state we are already at. Skip reloading the current\n    // page.\n    if (initialPop && initialURL === state.url) return\n\n    if (previousState) {\n      // If popping back to the same state, just skip.\n      // Could be clicking back from hashchange rather than a pushState.\n      if (previousState.id === state.id) return\n\n      // Since state IDs always increase, we can deduce the navigation direction\n      direction = previousState.id < state.id ? 'forward' : 'back'\n    }\n\n    const [containerSelector, contents, cachedAt] = cacheMapping[state.id] || []\n    const container = document.querySelector(containerSelector || state.container)\n\n    if (container instanceof HTMLElement) {\n      if (previousState) {\n        // Cache current container before replacement and inform the\n        // cache which direction the history shifted.\n        cachePop(direction, previousState.id, cloneContents(container))\n      }\n\n      dispatch(container, 'pjax:popstate', {state, direction, cachedAt})\n\n      const options: PjaxOptions = {\n        id: state.id,\n        url: state.url,\n        container,\n        push: false,\n        fragment: state.fragment || '',\n        scrollTo: false\n      }\n\n      if (contents) {\n        dispatch(container, 'pjax:start')\n\n        currentState = state\n        if (state.title) document.title = state.title\n        dispatch(container, 'pjax:beforeReplace', {contents, state, previousState})\n\n        replaceWithNodes(container, contents)\n        replaceCachedElements()\n        replaceTransientTags()\n        dispatch(container, 'pjax:end')\n      } else {\n        pjaxRequest(options)\n      }\n\n      // Force reflow/relayout before the browser tries to restore the\n      // scroll position.\n      container.offsetHeight\n    } else {\n      // No pjax container is an error on the source page, report using the previous state's url\n      sendStats({pjaxFailureReason: 'no_container', requestUrl: previousState?.url})\n      locationReplace(location.href)\n    }\n  }\n  initialPop = false\n}\n\n// Generate unique id for state object.\n//\n// Use a timestamp instead of a counter since ids should still be\n// unique across page loads.\nfunction uniqueId(): number {\n  return new Date().getTime()\n}\n\nfunction cloneContents(container: Element): CacheItem {\n  const cloned = container.cloneNode(true)\n  const contextSelector = getContainerSelector(container)\n  return [contextSelector, Array.from(cloned.childNodes), Date.now()]\n}\n\nfunction stripInternalParams(url: HTMLAnchorElement): string {\n  url.search = url.search.replace(/([?&])(_pjax|_)=[^&]*/g, '')\n  return url.href.replace(/\\?($|#)/, '$1')\n}\n\nfunction parseURL(url: string): HTMLAnchorElement {\n  const a = document.createElement('a')\n  a.href = url\n  return a\n}\n\nfunction getContainerSelector(container: Element): string {\n  if (container.id) {\n    return `#${container.id}`\n  } else {\n    throw new Error('pjax container has no id')\n  }\n}\n\nfunction findAll<T extends Element>(nodes: Node[], selector: string, klass: new () => T): T[] {\n  let matches: T[] = []\n  for (const node of nodes) {\n    if (node instanceof Element) {\n      if (node instanceof klass && node.matches(selector)) {\n        matches.push(node)\n      }\n      matches = matches.concat(Array.from(node.querySelectorAll(selector)))\n    }\n  }\n  return matches\n}\n\n// Clear the container and append all the given nodes to it\nfunction replaceWithNodes(container: Element, nodes: Node[]) {\n  container.innerHTML = ''\n  for (const node of nodes) {\n    // A node may be null if a pjax:beforeReplace listener nulls them out\n    // directly from the array emitted with the event\n    if (node != null) {\n      container.appendChild(node)\n    }\n  }\n}\n\nfunction resolveUrl(response: Response, fallbackUrl: string) {\n  // Prefer X-PJAX-URL header if it was set, otherwise fallback to\n  // using the original requested url.\n  const serverUrl = response.headers.get('X-PJAX-URL')\n  return serverUrl ? stripInternalParams(parseURL(serverUrl)) : fallbackUrl\n}\n\ntype extractedContainer = {\n  url: string\n  title: string\n  contents?: Node[]\n  scripts?: HTMLScriptElement[]\n  stylesheets?: HTMLLinkElement[]\n}\n\n// Extracts container and metadata from response.\n//\n// 1. Extracts X-PJAX-URL header if set\n// 2. Extracts inline <title> tags\n// 3. Builds response Element and extracts fragment if set\nfunction extractContainer(data: string, response: Response, options: PjaxOptions): extractedContainer {\n  const obj: extractedContainer = {\n    url: resolveUrl(response, options.requestUrl!),\n    title: ''\n  }\n\n  const fullDocument = /<html/i.test(data)\n\n  // Return fast if response is of a type other than HTML\n  const contentType = (response.headers.get('Content-Type') || '').split(';', 1)[0].trim()\n  if (contentType !== 'text/html') {\n    return obj\n  }\n\n  let head\n  let body\n\n  // Attempt to parse response html into elements\n  if (fullDocument) {\n    const headMatch = data.match(/<head[^>]*>([\\s\\S.]*)<\\/head>/i)\n    const bodyMatch = data.match(/<body[^>]*>([\\s\\S.]*)<\\/body>/i)\n    head = headMatch ? Array.from(parseHTML(document, headMatch[0]).childNodes) : []\n    body = bodyMatch ? Array.from(parseHTML(document, bodyMatch[0]).childNodes) : []\n  } else {\n    head = body = Array.from(parseHTML(document, data).childNodes)\n  }\n\n  // If response data is empty, return fast\n  if (body.length === 0) return obj\n\n  // If there's a <title> tag in the header, use it as\n  // the page's title.\n  const titles = findAll(head, 'title', HTMLTitleElement)\n  obj.title = titles.length > 0 ? titles[titles.length - 1].textContent || '' : ''\n\n  let fragment\n  if (options.fragment) {\n    // If they specified a fragment, look for it in the response\n    // and pull it out.\n    if (options.fragment === 'body') {\n      fragment = body\n    } else {\n      const matchingFragments = findAll(body, options.fragment, Element)\n      // Use first fragment if multiple matches\n      fragment = matchingFragments.length > 0 ? [matchingFragments[0]] : []\n    }\n\n    if (fragment.length) {\n      if (options.fragment === 'body') {\n        obj.contents = fragment\n      } else {\n        obj.contents = fragment.flatMap(node => Array.from(node.childNodes))\n      }\n\n      // If there's no title, look for data-title and title attributes\n      // on the fragment\n      if (!obj.title) {\n        const firstNode = fragment[0]\n        if (firstNode instanceof Element) {\n          obj.title = firstNode.getAttribute('title') || firstNode.getAttribute('data-title') || ''\n        }\n      }\n    }\n  } else if (!fullDocument) {\n    obj.contents = body\n  }\n\n  // Clean up any <title> tags\n  if (obj.contents) {\n    // Remove any parent title elements\n    obj.contents = obj.contents.filter(function (node) {\n      if (node instanceof Element) {\n        return !node.matches('title')\n      }\n      return true\n    })\n\n    // Then scrub any titles from their descendants\n    for (const node of obj.contents) {\n      if (node instanceof Element) {\n        for (const title of node.querySelectorAll('title')) {\n          title.remove()\n        }\n      }\n    }\n\n    // Gather all script[src] elements\n    const scripts = findAll(obj.contents, 'script[src]', HTMLScriptElement)\n    for (const script of scripts) {\n      script.remove()\n    }\n    obj.scripts = scripts\n    obj.contents = obj.contents!.filter(node => scripts.indexOf(node as HTMLScriptElement) === -1)\n\n    // Gather all stylesheet elements\n    const stylesheets = findAll(obj.contents, 'link[rel=stylesheet]', HTMLLinkElement)\n    for (const stylesheet of stylesheets) {\n      stylesheet.remove()\n    }\n    obj.stylesheets = stylesheets\n    obj.contents = obj.contents!.filter(node => !stylesheets.includes(node as HTMLLinkElement))\n  }\n\n  // Trim any whitespace off the title\n  if (obj.title) obj.title = obj.title.trim()\n\n  return obj\n}\n\n// Load and execute scripts using standard script request.\nfunction executeScriptTags(scripts: HTMLScriptElement[]) {\n  const existingScripts = document.querySelectorAll<HTMLScriptElement>('script[src]')\n\n  for (const script of scripts) {\n    const {src} = script\n    if (Array.from(existingScripts).some(s => s.src === src)) {\n      continue\n    }\n\n    const newScript = document.createElement('script')\n    const type = script.getAttribute('type')\n    if (type) newScript.type = type\n    newScript.src = src\n    if (document.head) {\n      document.head.appendChild(newScript)\n    }\n  }\n}\n\n// Inject `link` elements that don't exist in the current document into the\n// documents <head>.\nfunction injectStyleTags(stylesheets: HTMLLinkElement[]) {\n  const existingStylesheets = document.querySelectorAll<HTMLLinkElement>('link[rel=stylesheet]')\n\n  for (const stylesheet of stylesheets) {\n    if (Array.from(existingStylesheets).some(s => s.href === stylesheet.href)) {\n      continue\n    }\n\n    if (document.head) {\n      document.head.appendChild(stylesheet)\n    }\n  }\n}\n\ntype CacheItem = [string, Node[], number]\n\n// History DOM caching class.\nconst cacheMapping: {[key: number]: CacheItem} = {}\nconst cacheForwardStack: number[] = []\nconst cacheBackStack: number[] = []\n\n// Push previous state id and container contents into the history\n// cache. Should be called in conjunction with `pushState` to save the\n// previous container contents.\nfunction cachePush(id: number, value: CacheItem) {\n  cacheMapping[id] = value\n  cacheBackStack.push(id)\n\n  // Remove all entries in forward history stack after pushing a new page.\n  trimCacheStack(cacheForwardStack, 0)\n\n  // Trim back history stack to max cache length.\n  trimCacheStack(cacheBackStack, maxCacheLength)\n}\n\ntype Direction = 'forward' | 'back' | null\n\n// Shifts cache from directional history cache. Should be\n// called on `popstate` with the previous state id and container\n// contents.\nfunction cachePop(direction: Direction, id: number, value: CacheItem) {\n  let pushStack\n  let popStack\n  cacheMapping[id] = value\n\n  if (direction === 'forward') {\n    pushStack = cacheBackStack\n    popStack = cacheForwardStack\n  } else {\n    pushStack = cacheForwardStack\n    popStack = cacheBackStack\n  }\n\n  pushStack.push(id)\n  const poppedId = popStack.pop()\n  if (poppedId) delete cacheMapping[poppedId]\n\n  // Trim whichever stack we just pushed to to max cache length.\n  trimCacheStack(pushStack, maxCacheLength)\n}\n\n// Trim a cache stack (either cacheBackStack or cacheForwardStack) to be no\n// longer than the specified length, deleting cached DOM elements as necessary.\n//\n// stack  - Array of state IDs\n// length - Maximum length to trim to\nfunction trimCacheStack(stack: number[], length: number) {\n  while (stack.length > length) {\n    const id = stack.shift()\n    if (id == null) return\n    delete cacheMapping[id]\n  }\n}\n\n// Find version identifier for the initial page load.\nfunction findVersion(): string | null {\n  for (const meta of document.getElementsByTagName('meta')) {\n    const name = meta.getAttribute('http-equiv')\n    if (name && name.toUpperCase() === 'X-PJAX-VERSION') {\n      return meta.content\n    }\n  }\n  return null\n}\n\nexport function getState(): State | null {\n  return currentState\n}\n\nwindow.addEventListener('popstate', onPjaxPopstate)\n","// TODO: Research replacing this module with a composable observable library.\n// The scope of this module simply returns a finalized subscription object.\n\n// Lightweight TC39 observable Subscription.\nclass Subscription {\n  constructor(cleanup: () => void) {\n    this.closed = false\n    this.unsubscribe = () => {\n      cleanup()\n      this.closed = true\n    }\n  }\n\n  // A boolean value indicating whether the subscription is closed.\n  closed: boolean\n  // Cancels the subscription.\n  unsubscribe: () => void\n}\n\n// Create a Subscription from an event.\nexport function fromEvent(\n  target: EventTarget,\n  eventName: string,\n  onNext: EventListenerOrEventListenerObject,\n  options: AddEventListenerOptions = {capture: false}\n): Subscription {\n  target.addEventListener(eventName, onNext, options)\n  return new Subscription(() => {\n    target.removeEventListener(eventName, onNext, options)\n  })\n}\n\n// Combine several subscriptions into a single subscription.\n//\n// subscriptions - A list of subscriptions to combine.\n//\n// Returns a single, combined, subscription.\nexport function compose(...subscriptions: Subscription[]): Subscription {\n  return new Subscription(() => {\n    for (const subscription of subscriptions) {\n      subscription.unsubscribe()\n    }\n  })\n}\n","type ScrollToOptions = {\n  top: number\n  left?: number\n}\n\nexport default function scrollTo(targetContainer: HTMLElement, options: ScrollToOptions) {\n  let container = targetContainer\n  const document = targetContainer.ownerDocument!\n\n  if (\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore - Suppress TS2367 error that I don't trust\n    container === document ||\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore - Suppress TS2367 error that I don't trust\n    container === document.defaultView ||\n    container === document.documentElement ||\n    container === document.body\n  ) {\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore - `container` is expected to be a `HTMLElement` and this sets it to a `Document`\n    container = document\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n  // @ts-ignore - Surpress TS2551 error that I don't trust\n  const Document = document.defaultView.Document\n\n  if (container instanceof Document) {\n    const top = options.top != null ? options.top : document.defaultView!.pageYOffset\n    const left = options.left != null ? options.left : document.defaultView!.pageXOffset\n    document.defaultView!.scrollTo(left, top)\n    return\n  }\n\n  /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n  // @ts-ignore - Suppress TS2339 error that I don't trust\n  const HTMLElement = document.defaultView.HTMLElement\n\n  if (!(container instanceof HTMLElement)) {\n    throw new Error('invariant')\n  }\n\n  container.scrollTop = options.top\n  if (options.left != null) {\n    container.scrollLeft = options.left\n  }\n}\n","// Due to the way `visible` is implemented, it causes the browser to\n// perform a full page reflow, it lays out all elements again, when called. This\n// is one of the most time consuming operations the browser can perform, so it\n// affects perceived page load times.\n//\n// The preferred way to determine element visibility is check for the presence\n// of the `hidden` attribute: `if (el.hidden) ...` and `el.hidden = false`.\n//\n// More info: https://github.com/github/eslint-plugin-github/blob/master/docs/rules/no-d-none.md.\n//\n// We would ideally like to remove the `visible` function and consistently\n// use the `hidden` attribute.\n//\n// Returns true if the element is hidden.\nfunction hidden(element: HTMLElement): boolean {\n  return element.offsetWidth <= 0 && element.offsetHeight <= 0\n}\n\nexport default function visible(element: HTMLElement): boolean {\n  return !hidden(element)\n}\n","export function defaultHash(...args) {\n    // JSON.stringify ellides `undefined` and function values by default. We do not want that.\n    return JSON.stringify(args, (_, v) => (typeof v === 'object' ? v : String(v)));\n}\nexport default function memoize(fn, opts = {}) {\n    const { hash = defaultHash, cache = new Map() } = opts;\n    return function (...args) {\n        const id = hash.apply(this, args);\n        if (cache.has(id))\n            return cache.get(id);\n        let result = fn.apply(this, args);\n        if (result instanceof Promise) {\n            // eslint-disable-next-line github/no-then\n            result = result.catch(error => {\n                cache.delete(id);\n                throw error;\n            });\n        }\n        cache.set(id, result);\n        return result;\n    };\n}\n","//  Get document's HTML Safe nonce.\n//\n// Example:\n//\n//   <meta name=\"html-safe-nonce\" content=\"de43a1f355c711f7f705e4f971964391ac0c8e13\">\nexport function getDocumentHtmlSafeNonces(document: Document): string[] {\n  const nonces = [...document.querySelectorAll<HTMLMetaElement>('meta[name=html-safe-nonce]')].map(meta => meta.content)\n\n  if (nonces.length < 1) {\n    throw new Error('could not find html-safe-nonce on document')\n  }\n  return nonces\n}\n\ninterface Response {\n  headers: Headers\n  status: number\n}\n\nclass ResponseError extends Error {\n  response: Response\n\n  constructor(message: string, response: Response) {\n    super(`${message} for HTTP ${response.status}`)\n    this.response = response\n  }\n}\n\nexport function verifyResponseHtmlSafeNonce(nonces: string[], response: Response, allowJson = false) {\n  const contentType = response.headers.get('content-type') || ''\n  if (!allowJson && !contentType.startsWith('text/html')) {\n    throw new ResponseError(`expected response with text/html, but was ${contentType}`, response)\n  }\n\n  if (allowJson && !(contentType.startsWith('text/html') || contentType.startsWith('application/json'))) {\n    throw new ResponseError(`expected response with text/html or application/json, but was ${contentType}`, response)\n  }\n\n  const responseNonce = response.headers.get('x-html-safe')\n  if (!responseNonce) {\n    throw new ResponseError(`missing X-HTML-Safe nonce`, response)\n  } else if (!nonces.includes(responseNonce)) {\n    throw new ResponseError(`response X-HTML-Safe nonce did not match`, response)\n  }\n}\n","export function parseHTML(document: Document, html: string): DocumentFragment {\n  const template = document.createElement('template')\n  template.innerHTML = html\n  return document.importNode(template.content, true)\n}\n","// React to elements receiving focus\n//\n// Often we need to apply some behavior to form elements when they start getting\n// interacted with. We could use `observe`, but that can be expensive if there\n// are many such elements on the page, and when we aren't actually interested in\n// those elements until they receive focus.\n//\n// This is a lightweight and preferred alternative to the family of methods\n// from `github/focused` module.\n//\n// Examples\n//\n//   onFocus('.js-widget', element => {\n//     // ...\n//   })\n\nimport SelectorSet from 'selector-set'\n\nlet initialized = false\nconst selectorSet: SelectorSet<(el: HTMLElement) => void> = new SelectorSet()\n\nfunction handleFocus(event: FocusEvent) {\n  const focused = event.target\n  if (focused instanceof HTMLElement && focused.nodeType !== Node.DOCUMENT_NODE) {\n    for (const match of selectorSet.matches(focused)) {\n      match.data.call(null, focused)\n    }\n  }\n}\n\nexport function onFocus(selector: string, fn: (el: HTMLElement) => unknown) {\n  if (!initialized) {\n    initialized = true\n    // We use the \"focus\" event in the capture phase because Firefox\n    // historically had a limitation with \"focusin\" not bubbling.\n    document.addEventListener('focus', handleFocus, true)\n  }\n  selectorSet.add(selector, fn)\n\n  if (document.activeElement instanceof HTMLElement && document.activeElement.matches(selector)) {\n    fn(document.activeElement)\n  }\n}\n\nexport function onKey(\n  eventType: 'keydown' | 'keypress' | 'keyup',\n  selector: string,\n  inputHandler: (event: KeyboardEvent) => unknown\n) {\n  function blurHandler(event: Event) {\n    const currentTarget = event.currentTarget as HTMLElement\n    if (!currentTarget) return\n    currentTarget.removeEventListener(eventType, inputHandler)\n    currentTarget.removeEventListener('blur', blurHandler)\n  }\n\n  onFocus(selector, function (field) {\n    field.addEventListener(eventType, inputHandler)\n    field.addEventListener('blur', blurHandler)\n  })\n}\n\nexport function onInput(selector: string, inputHandler: EventListener) {\n  function blurHandler(event: Event) {\n    const {currentTarget} = event\n    if (!currentTarget) return\n\n    currentTarget.removeEventListener('input', inputHandler)\n    currentTarget.removeEventListener('blur', blurHandler)\n  }\n\n  onFocus(selector, function (field) {\n    field.addEventListener('input', inputHandler)\n    field.addEventListener('blur', blurHandler)\n  })\n}\n","import {fire} from 'delegated-events'\n\ntype Options = {\n  content: DocumentFragment | Promise<DocumentFragment> | Node\n  dialogClass?: string\n  detailsClass?: string\n}\n\n// Open the site-wide Details Dialog element.\nexport async function dialog(options: Options): Promise<HTMLElement> {\n  const dialogTemplate = document.querySelector<HTMLTemplateElement>('#site-details-dialog')!\n  const clonedDetails = dialogTemplate.content.cloneNode(true) as Element\n  const details = clonedDetails.querySelector<HTMLElement>('details')!\n  const detailsDialog = details.querySelector<HTMLElement>('details-dialog')!\n  const spinner = details.querySelector<HTMLElement>('.js-details-dialog-spinner')!\n  if (options.detailsClass) details.classList.add(...options.detailsClass.split(' '))\n  if (options.dialogClass) detailsDialog.classList.add(...options.dialogClass.split(' '))\n\n  document.body.append(clonedDetails)\n\n  const content = await options.content\n  spinner.remove()\n  detailsDialog.prepend(content)\n\n  details.addEventListener('toggle', () => {\n    if (details.hasAttribute('open')) return\n    fire(detailsDialog, 'dialog:remove')\n    details.remove()\n  })\n\n  return detailsDialog\n}\n","// Emulates submit button submission values by inserting a hidden input to the form.\n//\n// Submit events can be triggerd in the following ways:\n// - User clicks on a submit button.\n// - User press Enter when focusing on a form field; also known as \"implicit submission\".\n// - Programmatically via requestSubmit helper.\n//\n// On GitHub.com, the submission is either handled by the browser or remoteForm.\n//\n// For submissions triggered by user actions, the name and value of the clicked submit button (also known as\n// \"the submitter\") is passed along in the request, and can be programmatically retrieved with FormData.entries().\n//\n// However, this value will be lost in the following cases:\n// - 1. When the submitter button is disabled, most commonly by [data-disable-with].\n// - 2. When submitting via requestSubmit (from form.js), because the submission does not originated from a submitter.\n// - 3. When submitting with remoteForm, because FormData(form).entries() does not know about the submitter. In Safari\n// the submitter is known during the submission steps, but this behavior is not supported in any other browsers.\n//\n// @see {@link https://github.com/github/form-data-entries/pull/7}.\n//\n// For the exact workarounds, refer to ./form.js and ./remote.js.\nexport function persistSubmitButtonValue(button: HTMLButtonElement | HTMLInputElement) {\n  const form = button.closest('form')\n  if (!(form instanceof HTMLFormElement)) {\n    return\n  }\n\n  let input = findPersistedSubmitButtonValue(form)\n\n  if (button.name) {\n    const defaultValue = button.matches('input[type=submit]') ? 'Submit' : ''\n    const value = button.value || defaultValue\n    if (!input) {\n      input = document.createElement('input')\n      input.type = 'hidden'\n      input.classList.add('is-submit-button-value')\n      form.prepend(input)\n    }\n    input.name = button.name\n    input.value = value\n  } else if (input) {\n    input.remove()\n  }\n}\n\nexport function findPersistedSubmitButtonValue(form: HTMLFormElement): HTMLInputElement | null {\n  const input = form.querySelector('input.is-submit-button-value')\n  return input instanceof HTMLInputElement ? input : null\n}\n","// Global handler for uncaught AJAX errors.\n//\n// Only enabled by default on new style `data-remote` requests.\n\nimport {on} from 'delegated-events'\n\nexport function showGlobalError() {\n  const ajaxErrorMessage = document.getElementById('ajax-error-message')\n  if (ajaxErrorMessage) {\n    ajaxErrorMessage.hidden = false\n  }\n}\n\nexport function hideGlobalError() {\n  const ajaxErrorMessage = document.getElementById('ajax-error-message')\n  if (ajaxErrorMessage) {\n    ajaxErrorMessage.hidden = true\n  }\n}\n\non('deprecatedAjaxError', '[data-remote]', function (event) {\n  const detail = (event as CustomEvent).detail\n  const {error, text} = detail\n\n  if (event.currentTarget !== event.target) {\n    return\n  }\n  if (error === 'abort' || error === 'canceled') {\n    return\n  }\n\n  if (/<html/.test(text)) {\n    showGlobalError()\n    event.stopImmediatePropagation()\n  } else {\n    setTimeout(function () {\n      if (event.defaultPrevented) {\n        return\n      }\n      showGlobalError()\n    }, 0)\n  }\n})\n\n// Clear any errors when the request is tried again\non('deprecatedAjaxSend', '[data-remote]', function () {\n  hideGlobalError()\n})\n\n// \"Dismiss\" button\non('click', '.js-ajax-error-dismiss', function () {\n  hideGlobalError()\n})\n","import DetailsDialogElement from '@github/details-dialog-element'\nimport {isFormField} from './form'\n\n// Check if container has any user interactions that could be lost if replaced.\n//\n// container - An Element to check for user interactions.\n// ignoreFocusedContainer - A Boolean, `true` to skip the\n// focus check if the container is the focused element. Dirty field and\n// mousedown checks are still performed.\nexport function hasInteractions(container: Element, ignoreFocusedContainer = false): boolean {\n  return (\n    hasDirtyFields(container) ||\n    hasFocus(container, ignoreFocusedContainer) ||\n    hasMousedown(container) ||\n    markedAsDirty(container)\n  )\n}\n\nexport function hasDirtyFields(container: Element): boolean {\n  for (const field of container.querySelectorAll('input, textarea')) {\n    if (field instanceof HTMLInputElement || field instanceof HTMLTextAreaElement) {\n      if (formFieldValueChanged(field)) {\n        return true\n      }\n    }\n  }\n  return false\n}\n\nfunction formFieldValueChanged(input: HTMLInputElement | HTMLTextAreaElement): boolean {\n  if (input instanceof HTMLInputElement && (input.type === 'checkbox' || input.type === 'radio')) {\n    if (input.checked !== input.defaultChecked) return true\n  } else {\n    if (input.value !== input.defaultValue) return true\n  }\n  return false\n}\n\nlet stubbedActiveElement: Element | null\n\nexport async function withActiveElement(element: Element, fn: () => unknown): Promise<void> {\n  stubbedActiveElement = element\n  try {\n    await fn()\n  } finally {\n    stubbedActiveElement = null\n  }\n}\n\nfunction getActiveElement(container: Element): Element | null {\n  if (stubbedActiveElement instanceof Element) {\n    return stubbedActiveElement\n  } else if (container && container.ownerDocument && container.ownerDocument.activeElement) {\n    return container.ownerDocument.activeElement\n  }\n  return null\n}\n\nlet latestMouseupTarget: EventTarget | null\n\ndocument.addEventListener('mouseup', function (event: Event) {\n  latestMouseupTarget = event.target\n})\n\nfunction hasFocus(container: Element, ignoreFocusedContainer: boolean): boolean {\n  const activeElement = getActiveElement(container)\n  if (activeElement === null) return false\n  if (ignoreFocusedContainer && activeElement === container) return false\n\n  // Updatable container hasFocus if one of the following is true:\n  // 1. Focus target is both a form field AND the update target\n  const formFieldFocused = activeElement === container && isFormField(activeElement)\n  if (formFieldFocused) return true\n  // 2. Focus target is relevent (ie not a UPDATABLE_INTERACTIVE_TARGET)\n  //\n  // We consider it safe to update content if the focused element is a button or a link, as\n  // both likely only trigger transient actions\n  const focusTargetIsRelevent = container.contains(activeElement) && !activeElementIsSafe(activeElement)\n  if (focusTargetIsRelevent) return true\n\n  // 3. The last clicked element is an open details summary\n  const interactingWithOpenDetails =\n    latestMouseupTarget instanceof Element &&\n    container.contains(latestMouseupTarget) &&\n    !!latestMouseupTarget.closest('details[open] > summary')\n  return interactingWithOpenDetails\n}\n\nconst UPDATABLE_INTERACTIVE_TARGET = 'a[href], button'\n\nfunction activeElementIsSafe(activeElement: Element): boolean {\n  if (activeElement instanceof DetailsDialogElement) return true\n\n  const isLinkOrButton = activeElement instanceof HTMLAnchorElement || activeElement instanceof HTMLButtonElement\n  const isInsideTaskItem = activeElement.parentElement?.classList.contains('task-list-item')\n  if (isLinkOrButton && isInsideTaskItem) {\n    return true\n  }\n\n  if (!(latestMouseupTarget instanceof Element)) return false\n  const updatableActiveElement = activeElement.closest(UPDATABLE_INTERACTIVE_TARGET)\n  if (!updatableActiveElement) return false\n  const updatableMouseupElement = latestMouseupTarget.closest(UPDATABLE_INTERACTIVE_TARGET)\n  return updatableActiveElement === updatableMouseupElement\n}\n\nfunction hasMousedown(container: Element): boolean {\n  return container.matches(':active')\n}\n\nfunction markedAsDirty(container: Element): boolean {\n  return container.closest('.is-dirty') || container.querySelector('.is-dirty') ? true : false\n}\n","function preserveAnchorNodePosition(document, callback) {\n  return preservePosition(findAnchorNode(document), callback);\n}\nfunction preservePosition(anchorNode, callback) {\n  var node = anchorNode;\n\n  if (!node) {\n    return Promise.resolve(callback());\n  }\n\n  var documentElement = node.ownerDocument.documentElement;\n\n  function computeAncestorBoundingRects(element) {\n    var rects = [];\n\n    while (element) {\n      var _element$getBoundingC = element.getBoundingClientRect(),\n          top = _element$getBoundingC.top,\n          left = _element$getBoundingC.left;\n\n      rects.push({\n        element: element,\n        top: top,\n        left: left\n      });\n      element = element.parentElement;\n    }\n\n    return rects;\n  }\n\n  function firstAttachedBoundingRect(rects) {\n    for (var i = 0; i < rects.length; i++) {\n      var rect = rects[i];\n\n      if (documentElement.contains(rect.element)) {\n        return rect;\n      }\n    }\n  }\n\n  var origBoundingRects = computeAncestorBoundingRects(node);\n  return Promise.resolve(callback()).then(function (result) {\n    var origBoundingRect = firstAttachedBoundingRect(origBoundingRects);\n\n    if (origBoundingRect) {\n      node = origBoundingRect.element;\n      var origTop = origBoundingRect.top;\n      var origLeft = origBoundingRect.left;\n\n      var _node$getBoundingClie = node.getBoundingClientRect(),\n          top = _node$getBoundingClie.top,\n          left = _node$getBoundingClie.left;\n\n      cumulativeScrollBy(node, left - origLeft, top - origTop);\n    }\n\n    return result;\n  });\n}\nfunction findAnchorNode(document) {\n  if (document.activeElement !== document.body) {\n    return document.activeElement;\n  }\n\n  var hoverElements = document.querySelectorAll(':hover');\n  var len = hoverElements.length;\n\n  if (len) {\n    return hoverElements[len - 1];\n  }\n}\n\nfunction cumulativeScrollBy(element, x, y) {\n  var document = element.ownerDocument;\n  var window = document.defaultView;\n\n  function scrollOffsets(element) {\n    if (element.offsetParent) {\n      return {\n        top: element.scrollTop,\n        left: element.scrollLeft\n      };\n    } else {\n      return {\n        top: window.pageYOffset,\n        left: window.pageXOffset\n      };\n    }\n  }\n\n  function scrollBy(element, x, y) {\n    if (x === 0 && y === 0) {\n      return [0, 0];\n    }\n\n    var origScroll = scrollOffsets(element);\n    var top = origScroll.top + y;\n    var left = origScroll.left + x;\n\n    if (element === document || element === window || element === document.documentElement || element === document.body) {\n      document.defaultView.scrollTo(left, top);\n    } else {\n      element.scrollTop = top;\n      element.scrollLeft = left;\n    }\n\n    var newScroll = scrollOffsets(element);\n    return [newScroll.left - origScroll.left, newScroll.top - origScroll.top];\n  }\n\n  function overflowParent(el) {\n    var element = el;\n\n    if (!element.offsetParent || element === document.body) {\n      return;\n    }\n\n    while (element !== document.body) {\n      if (element.parentElement) {\n        element = element.parentElement;\n      } else {\n        return;\n      }\n\n      var _window$getComputedSt = window.getComputedStyle(element),\n          position = _window$getComputedSt.position,\n          overflowY = _window$getComputedSt.overflowY,\n          overflowX = _window$getComputedSt.overflowX;\n\n      if (position === 'fixed' || overflowY === 'auto' || overflowX === 'auto' || overflowY === 'scroll' || overflowX === 'scroll') {\n        break;\n      }\n    }\n\n    return element;\n  }\n\n  var container = overflowParent(element);\n  var cumulativeX = 0;\n  var cumulativeY = 0;\n\n  while (container) {\n    var scrolled = scrollBy(container, x - cumulativeX, y - cumulativeY);\n    cumulativeX += scrolled[0];\n    cumulativeY += scrolled[1];\n\n    if (cumulativeX === x && cumulativeY === y) {\n      break;\n    }\n\n    container = overflowParent(container);\n  }\n}\n\nexport { preserveAnchorNodePosition, preservePosition, findAnchorNode };\n","// Check if document has passed interactive state.\n//\n// The document has finished loading and the document has been parsed but\n// sub-resources such as images, stylesheets and frames are still loading.\n// The state indicates that the DOMContentLoaded event has been fired.\nexport const ready: Promise<void> = (function () {\n  if (document.readyState === 'interactive' || document.readyState === 'complete') {\n    return Promise.resolve()\n  } else {\n    return new Promise<void>(resolve => {\n      document.addEventListener('DOMContentLoaded', () => {\n        resolve()\n      })\n    })\n  }\n})()\n\n// Check if document has passed loaded state.\n//\n// The document and all sub-resources have finished loading. The state\n// indicates that the load event has been fired.\nexport const loaded: Promise<unknown> = (function () {\n  if (document.readyState === 'complete') {\n    return Promise.resolve()\n  } else {\n    return new Promise(resolve => {\n      window.addEventListener('load', resolve)\n    })\n  }\n})()\n","// Variant on the native `hashchange` event with extra features:\n//\n// * Guarantees that handlers run on DOMContentLoaded, or immediately if page has\n//   already loaded;\n// * If the anchor references an element by id, the `data.target` property of the\n//   argument passed to handlers will be a reference to that DOM element.\n//\n// Each handler will be invoked with a `data` object containing properties:\n//\n// * `oldURL` - String URL prior to the hash change, or `null` on initial page load;\n// * `newURL` - String URL after hash change, or current page URL;\n// * `target` - DOM element whose id matches the anchor value, or `null`.\n//\n// Examples\n//\n// ```js\n// // Redirect old anchor issue urls\n// hashChange((data) => {\n//   const m = data.newURL.match(/\\/issues#issue\\/(\\d+)$/)\n//   if (m) window.location = data.newURL.replace(/\\/?#issue\\/.+/, \"/#{m[1]}\")\n// })\n//\n// // Ensure that the referenced comment's parent container is visible\n// hashChange((data) => {\n//   const container = data.target && data.target.closest('.js-comments-container')\n//   if (container) container.classList.remove('d-none')\n// })\n// ```\n\nimport {ready} from '../document-ready'\n\nconst handlers: HashChangeListener[] = []\nlet ran = 0\n\ntype HashChangeListener = (opts: {oldURL: string | null; newURL: string; target?: Element | null}) => unknown\n\nexport default function hashChange(handler: HashChangeListener) {\n  ;(async function () {\n    handlers.push(handler)\n    await ready\n    runRemainingHandlers()\n  })()\n}\n\nhashChange.clear = () => {\n  handlers.length = ran = 0\n}\n\nfunction runRemainingHandlers() {\n  const index = ran\n  ran = handlers.length\n  runHandlers(handlers.slice(index), null, window.location.href)\n}\n\nfunction runHandlers(handlersToRun: HashChangeListener[], oldURL: string | null, newURL: string) {\n  const id = window.location.hash.slice(1)\n  const target = id ? document.getElementById(id) : null\n  const data = {oldURL, newURL, target}\n\n  for (const fn of handlersToRun) {\n    fn.call(null, data)\n  }\n}\n\n// Track ieOldURL manually to work around an open IE bug where the hashchange\n// event does not have oldURL or newURL attributes. See\n// https://connect.microsoft.com/IE/feedback/details/828283/implement-hashchangeevent-oldurl-and-newurl\nlet ieOldURL = window.location.href\nwindow.addEventListener('popstate', function () {\n  ieOldURL = window.location.href\n})\n\nwindow.addEventListener('hashchange', function (event) {\n  const newURL = window.location.href\n  try {\n    runHandlers(handlers, event.oldURL || ieOldURL, newURL)\n  } finally {\n    ieOldURL = newURL\n  }\n})\n\nlet pjaxOldURL: string | null = null\ndocument.addEventListener('pjax:start', function () {\n  pjaxOldURL = window.location.href\n})\n\ndocument.addEventListener('pjax:end', function () {\n  runHandlers(handlers, pjaxOldURL, window.location.href)\n})\n","// performTransition\n//\n// CSS3 transitions have some major pitfalls. First trying to transition\n// elements from `display:none` to `display:block.` And also dealing with\n// computed properties like `height:auto`.\n//\n// This helper attempts to deal with those issues while still defining\n// the transitions in pure css.\n//\n// Behaviors that intend to support these special case transitions\n// should call `performTransition` when they add or remove their state\n// classes.\n//\n// Any element that is performing a transition needs to be annotated\n// with the `js-transitionable` class name.\n//\n// @example\n//\n// <div class=\"js-transitionable collapse\">\n//   Slide down\n// </div>\n//\n// .collapse {\n//   display: none;\n//   position: relative;\n//   height: 0;\n//   overflow: hidden;\n//   @include transition(0.35s, height, ease);\n// }\n// .collapse.open {\n//   display: block;\n//   height: auto;\n// }\n//\n// performTransition document.querySelector('.collapse', () => {\n//   this.classList.add('open')\n// })\n\nconst supportsTransitions = 'ontransitionend' in window\n\n// DEPRECATED: PerformTransition is deprecated.\nexport default function performTransition(container: HTMLElement, cb: () => void) {\n  if (!supportsTransitions) {\n    cb()\n    return\n  }\n\n  const els = Array.from(container.querySelectorAll('.js-transitionable'))\n  if (container.classList.contains('js-transitionable')) els.push(container)\n\n  for (const el of els) {\n    const transitionHeight = isTransitioningHeight(el)\n    if (!(el instanceof HTMLElement)) continue\n\n    el.addEventListener(\n      'transitionend',\n      () => {\n        el.style.display = ''\n        el.style.visibility = ''\n\n        if (transitionHeight) {\n          withoutTransition(el, function () {\n            el.style.height = ''\n          })\n        }\n      },\n      {once: true}\n    )\n\n    el.style.boxSizing = 'content-box'\n    el.style.display = 'block'\n    el.style.visibility = 'visible'\n\n    if (transitionHeight) {\n      withoutTransition(el, function () {\n        el.style.height = getComputedStyle(el).height\n      })\n    }\n\n    // force reflow\n    el.offsetHeight\n  }\n\n  cb()\n\n  for (const el of els) {\n    if (!(el instanceof HTMLElement)) continue\n    if (isTransitioningHeight(el)) {\n      const currentHeight = getComputedStyle(el).height\n      el.style.boxSizing = ''\n      if (currentHeight === '0px') {\n        el.style.height = `${el.scrollHeight}px`\n      } else {\n        el.style.height = '0px'\n      }\n    }\n  }\n}\n\n// Detect if element is transitioning its height property.\nfunction isTransitioningHeight(el: Element) {\n  return getComputedStyle(el).transitionProperty === 'height'\n}\n\n// Apply style change callback w/o triggering a transition.\nfunction withoutTransition(el: HTMLElement, cb: () => void) {\n  el.style.transition = 'none'\n  cb()\n  el.offsetHeight\n  el.style.transition = ''\n}\n","import {onFocus, onInput} from '../onfocus'\nimport {observe} from 'selector-observer'\nimport {on} from 'delegated-events'\n\nconst supportedFields = [\n  'input[pattern]',\n  'input[required]',\n  'textarea[required]',\n  'input[data-required-change]',\n  'textarea[data-required-change]',\n  'input[data-required-value]',\n  'textarea[data-required-value]'\n].join(',')\n\ntype Field = HTMLInputElement | HTMLTextAreaElement\n\nfunction checkValidityForRequiredValueField(field: Field) {\n  const requiredValue = field.getAttribute('data-required-value')!\n  const prefix = field.getAttribute('data-required-value-prefix')\n\n  if (field.value === requiredValue) {\n    field.setCustomValidity('')\n  } else {\n    let message = requiredValue\n    if (prefix) {\n      message = prefix + message\n    }\n    field.setCustomValidity(message)\n  }\n}\n\nonInput('[data-required-value]', function (event) {\n  const field = event.currentTarget as Field\n  checkValidityForRequiredValueField(field)\n})\n\non('change', '[data-required-value]', function (event) {\n  const field = event.currentTarget as Field\n  checkValidityForRequiredValueField(field)\n\n  // We need to call validate since we don't fire a `change` event on the form\n  // when session-resume dumps the text back into the field.\n  validate(field.form!)\n})\n\nonInput('[data-required-trimmed]', function (event) {\n  const field = event.currentTarget as Field\n  if (field.value.trim() === '') {\n    field.setCustomValidity(field.getAttribute('data-required-trimmed')!)\n  } else {\n    field.setCustomValidity('')\n  }\n})\n\non('change', '[data-required-trimmed]', function (event) {\n  const field = event.currentTarget as Field\n  if (field.value.trim() === '') {\n    field.setCustomValidity(field.getAttribute('data-required-trimmed')!)\n  } else {\n    field.setCustomValidity('')\n  }\n\n  // We need to call validate since we don't fire a `change` event on the form\n  // when session-resume dumps the text back into the field.\n  validate(field.form!)\n})\n\n// Observe required fields and validate form when their validation state\n// changes.\nonFocus(supportedFields, field => {\n  let previousValid = (field as Field).checkValidity()\n  function inputHandler() {\n    const currentValid = (field as Field).checkValidity()\n    if (currentValid !== previousValid && (field as Field).form) {\n      validate((field as Field).form!)\n    }\n    previousValid = currentValid\n  }\n\n  field.addEventListener('input', inputHandler)\n  field.addEventListener('blur', function blurHandler() {\n    field.removeEventListener('input', inputHandler)\n    field.removeEventListener('blur', blurHandler)\n  })\n})\n\nconst installedForms = new WeakMap()\n\n// Install validation handlers on a form.\nfunction installHandlers(form: HTMLFormElement) {\n  if (installedForms.get(form)) return\n  form.addEventListener('change', () => validate(form))\n  installedForms.set(form, true)\n}\n\n// Validate a form or input.\nexport function validate(form: HTMLInputElement | HTMLFormElement) {\n  const validity = form.checkValidity()\n  for (const button of form.querySelectorAll<HTMLButtonElement>('button[data-disable-invalid]')) {\n    button.disabled = !validity\n  }\n}\n\nobserve('button[data-disable-invalid]', {\n  constructor: HTMLButtonElement,\n  initialize(button) {\n    const form = button.form\n    if (form) {\n      installHandlers(form)\n      button.disabled = !form.checkValidity()\n    }\n  }\n})\n\n// A custom attribute similar to `required`, but only passes validation once\n// the value of the field has changed from its initial value.\nobserve('input[data-required-change], textarea[data-required-change]', function (element) {\n  const field = element as Field\n  const radioInputDefault =\n    field.type === 'radio' && field.form ? (field.form!.elements.namedItem(field.name) as RadioNodeList).value : null\n\n  // Custom Validity Event Handler.\n  function customValidity(event?: Event) {\n    const form = field.form!\n    if (event && field.type === 'radio' && form && radioInputDefault) {\n      for (const radio of form.elements.namedItem(field.name) as RadioNodeList) {\n        if (radio instanceof HTMLInputElement) {\n          radio.setCustomValidity(field.value === radioInputDefault ? 'unchanged' : '')\n        }\n      }\n    } else {\n      field.setCustomValidity(field.value === (radioInputDefault || field.defaultValue) ? 'unchanged' : '')\n    }\n  }\n\n  field.addEventListener('input', customValidity)\n  field.addEventListener('change', customValidity)\n  customValidity()\n\n  if ((field as Field).form) {\n    validate((field as Field).form!)\n  }\n})\n\ndocument.addEventListener('reset', function (event: Event) {\n  if (event.target instanceof HTMLFormElement) {\n    const form = event.target\n    setTimeout(() => validate(form))\n  }\n})\n","var SCORE_MIN = -Infinity;\nvar SCORE_MAX = Infinity;\n\nvar SCORE_GAP_LEADING = -0.005\nvar SCORE_GAP_TRAILING = -0.005\nvar SCORE_GAP_INNER = -0.01\nvar SCORE_MATCH_CONSECUTIVE = 1.0\nvar SCORE_MATCH_SLASH = 0.9\nvar SCORE_MATCH_WORD = 0.8\nvar SCORE_MATCH_CAPITAL = 0.7\nvar SCORE_MATCH_DOT = 0.6\n\nfunction islower(s) {\n\treturn s.toLowerCase() === s;\n}\n\nfunction isupper(s) {\n\treturn s.toUpperCase() === s;\n}\n\nfunction precompute_bonus(haystack) {\n\t/* Which positions are beginning of words */\n\tvar m = haystack.length;\n\tvar match_bonus = new Array(m);\n\n\tvar last_ch = '/';\n\tfor (var i = 0; i < m; i++) {\n\t\tvar ch = haystack[i];\n\n\t\tif (last_ch === '/') {\n\t\t\tmatch_bonus[i] = SCORE_MATCH_SLASH;\n\t\t} else if (last_ch === '-' || last_ch === '_' || last_ch === ' ') {\n\t\t\tmatch_bonus[i] = SCORE_MATCH_WORD;\n\t\t} else if (last_ch === '.') {\n\t\t\tmatch_bonus[i] = SCORE_MATCH_DOT;\n\t\t} else if (islower(last_ch) && isupper(ch)) {\n\t\t\tmatch_bonus[i] = SCORE_MATCH_CAPITAL;\n\t\t} else {\n\t\t\tmatch_bonus[i] = 0;\n\t\t}\n\n\t\tlast_ch = ch;\n\t}\n\n\treturn match_bonus;\n}\n\nfunction compute(needle, haystack, D, M) {\n\tvar n = needle.length;\n\tvar m = haystack.length;\n\n\tvar lower_needle = needle.toLowerCase();\n\tvar lower_haystack = haystack.toLowerCase();\n\n\tvar match_bonus = precompute_bonus(haystack, match_bonus);\n\n\t/*\n\t * D[][] Stores the best score for this position ending with a match.\n\t * M[][] Stores the best possible score at this position.\n\t */\n\n\tfor (var i = 0; i < n; i++) {\n\t\tD[i] = new Array(m);\n\t\tM[i] = new Array(m);\n\n\t\tvar prev_score = SCORE_MIN;\n\t\tvar gap_score = i === n - 1 ? SCORE_GAP_TRAILING : SCORE_GAP_INNER;\n\n\t\tfor (var j = 0; j < m; j++) {\n\t\t\tif (lower_needle[i] === lower_haystack[j]) {\n\t\t\t\tvar score = SCORE_MIN;\n\t\t\t\tif (!i) {\n\t\t\t\t\tscore = (j * SCORE_GAP_LEADING) + match_bonus[j];\n\t\t\t\t} else if (j) { /* i > 0 && j > 0*/\n\t\t\t\t\tscore = Math.max(\n\t\t\t\t\t\tM[i - 1][j - 1] + match_bonus[j],\n\n\t\t\t\t\t\t/* consecutive match, doesn't stack with match_bonus */\n\t\t\t\t\t\tD[i - 1][j - 1] + SCORE_MATCH_CONSECUTIVE);\n\t\t\t\t}\n\t\t\t\tD[i][j] = score;\n\t\t\t\tM[i][j] = prev_score = Math.max(score, prev_score + gap_score);\n\t\t\t} else {\n\t\t\t\tD[i][j] = SCORE_MIN;\n\t\t\t\tM[i][j] = prev_score = prev_score + gap_score;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction score(needle, haystack) {\n\tvar n = needle.length;\n\tvar m = haystack.length;\n\n\tif (!n || !m)\n\t\treturn SCORE_MIN;\n\n\tif (n === m) {\n\t\t/* Since this method can only be called with a haystack which\n\t\t * matches needle. If the lengths of the strings are equal the\n\t\t * strings themselves must also be equal (ignoring case).\n\t\t */\n\t\treturn SCORE_MAX;\n\t}\n\n\tif (m > 1024) {\n\t\t/*\n\t\t * Unreasonably large candidate: return no score\n\t\t * If it is a valid match it will still be returned, it will\n\t\t * just be ranked below any reasonably sized candidates\n\t\t */\n\t\treturn SCORE_MIN;\n\t}\n\n\tvar D = new Array(n);\n\tvar M = new Array(n);\n\n\tcompute(needle, haystack, D, M)\n\n\treturn M[n - 1][m - 1];\n}\n\nfunction positions(needle, haystack) {\n\tvar n = needle.length;\n\tvar m = haystack.length;\n\n\tvar positions = new Array(n);\n\n\tif (!n || !m)\n\t\treturn positions;\n\n\tif (n === m) {\n\t\tfor (var i = 0; i < n; i++)\n\t\t\tpositions[i] = i;\n\t\treturn positions;\n\t}\n\n\tif (m > 1024) {\n\t\treturn positions;\n\t}\n\n\tvar D = new Array(n);\n\tvar M = new Array(n);\n\n\tcompute(needle, haystack, D, M)\n\n\t/* backtrack to find the positions of optimal matching */\n\tvar match_required = false;\n\n\tfor (var i = n - 1, j = m - 1; i >= 0; i--) {\n\t\tfor (; j >= 0; j--) {\n\t\t\t/*\n\t\t\t * There may be multiple paths which result in\n\t\t\t * the optimal weight.\n\t\t\t *\n\t\t\t * For simplicity, we will pick the first one\n\t\t\t * we encounter, the latest in the candidate\n\t\t\t * string.\n\t\t\t */\n\t\t\tif (D[i][j] !== SCORE_MIN &&\n\t\t\t    (match_required || D[i][j] === M[i][j])) {\n\t\t\t\t/* If this score was determined using\n\t\t\t\t * SCORE_MATCH_CONSECUTIVE, the\n\t\t\t\t * previous character MUST be a match\n\t\t\t\t */\n\t\t\t\tmatch_required =\n\t\t\t\t    i && j &&\n\t\t\t\t    M[i][j] === D[i - 1][j - 1] + SCORE_MATCH_CONSECUTIVE;\n\t\t\t\tpositions[i] = j--;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn positions;\n}\n\nfunction hasMatch(needle, haystack) {\n  needle = needle.toLowerCase()\n  haystack = haystack.toLowerCase()\n  var l = needle.length\n  for (var i = 0, j = 0; i < l; i += 1) {\n    j = haystack.indexOf(needle[i], j) + 1\n    if (j === 0) return false\n  }\n  return true\n}\n\nexport {\n\t/* constants */\n\tSCORE_MIN,\n\tSCORE_MAX,\n\n\tSCORE_GAP_LEADING,\n\tSCORE_GAP_TRAILING,\n\tSCORE_GAP_INNER,\n\tSCORE_MATCH_CONSECUTIVE,\n\tSCORE_MATCH_SLASH,\n\tSCORE_MATCH_WORD,\n\tSCORE_MATCH_CAPITAL,\n\tSCORE_MATCH_DOT,\n\n\t/* functions */\n\tscore,\n\tpositions,\n\thasMatch\n}\n","import {score as fuzzyScore, hasMatch, positions} from 'fzy.js'\n\nconst getScore = (value: string, text: string, minScore: number) => {\n  if (!hasMatch(value, text)) return -Infinity\n  const score = fuzzyScore(value, text)\n  if (score < minScore) return -Infinity\n  return score\n}\nconst highlightElement = (node: HTMLElement, value: string, text: string) => {\n  node.innerHTML = ''\n\n  let lastPosition = 0\n  for (const i of positions(value, text)) {\n    const slice = text.slice(lastPosition, i)\n    if (slice !== '') {\n      node.appendChild(document.createTextNode(text.slice(lastPosition, i)))\n    }\n    lastPosition = i + 1\n    const mark = document.createElement('mark')\n    mark.textContent = text[i]\n    node.appendChild(mark)\n  }\n\n  node.appendChild(document.createTextNode(text.slice(lastPosition)))\n}\n\ninterface sortAbort {\n  aborted: boolean\n}\nconst sorting: WeakMap<FuzzyListElement, sortAbort> = new WeakMap()\n\ntype FuzzyListLazyRenderCallback = (text: string) => Node\ninterface state {\n  timer: number | null\n  handler: MutationObserver\n  items: Set<Node>\n  lazyItems: Map<string, FuzzyListLazyRenderCallback>\n}\nconst states: WeakMap<FuzzyListElement, state> = new WeakMap()\n\nconst textCache: WeakMap<Node, string> = new WeakMap()\nconst getTextCache = (item: Node) => {\n  if (!textCache.has(item) && item instanceof HTMLElement) {\n    const value = (item.getAttribute('data-value') || item.textContent || '').trim()\n    textCache.set(item, value)\n    return value\n  }\n  return textCache.get(item) || ''\n}\n\nclass FuzzyListElement extends HTMLElement {\n  connectedCallback() {\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    const items = new Set(list.querySelectorAll('li'))\n\n    const inputEl = this.querySelector('input')\n    if (inputEl instanceof HTMLInputElement) {\n      inputEl.addEventListener('input', () => {\n        this.value = inputEl.value\n      })\n    }\n\n    const handler = new MutationObserver(mutations => {\n      let update = false\n      for (const mutation of mutations) {\n        if (mutation.type === 'childList' && mutation.addedNodes.length) {\n          for (const item of mutation.addedNodes) {\n            if (item instanceof HTMLLIElement && !items.has(item)) {\n              const text = getTextCache(item)\n              update = update || hasMatch(this.value, text)\n              items.add(item)\n            }\n          }\n        }\n      }\n      if (update) this.sort()\n    })\n    handler.observe(list, {childList: true})\n\n    const state = {handler, items, lazyItems: new Map(), timer: null}\n    states.set(this, state)\n  }\n\n  disconnectedCallback() {\n    const state = states.get(this)\n    if (state) {\n      state.handler.disconnect()\n      states.delete(this)\n    }\n  }\n\n  addLazyItems(dataset: string[], render: FuzzyListLazyRenderCallback) {\n    const state = states.get(this)\n    if (!state) return\n    const {lazyItems} = state\n    const {value} = this\n    let update = false\n    for (const item of dataset) {\n      lazyItems.set(item, render)\n      update = update || (Boolean(value) && hasMatch(value, item))\n    }\n    if (update) this.sort()\n  }\n\n  sort() {\n    const oldSortAbort = sorting.get(this)\n    if (oldSortAbort) oldSortAbort.aborted = true\n    const sortAbort = {aborted: false}\n    sorting.set(this, sortAbort)\n    const {minScore, markSelector, maxMatches, value} = this\n    const state = states.get(this)\n    if (!state) return\n    if (!this.dispatchEvent(new CustomEvent('fuzzy-list-will-sort', {cancelable: true, detail: value}))) return\n    const {items, lazyItems} = state\n    const shouldMark = this.hasAttribute('mark-selector')\n\n    const list = this.querySelector('ul')\n    if (!list) return\n\n    const itemsToRender: Array<\n      {render: FuzzyListLazyRenderCallback; text: string; score: number} | {item: Node; score: number}\n    > = []\n\n    if (value) {\n      for (const item of items) {\n        const text = getTextCache(item)\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({item, score})\n      }\n      for (const [text, render] of lazyItems) {\n        const score = getScore(value, text, minScore)\n        if (score === -Infinity) continue\n        itemsToRender.push({text, render, score})\n      }\n      itemsToRender.sort((a, b) => b.score - a.score).splice(maxMatches)\n    } else {\n      let i = itemsToRender.length\n      for (const item of items) {\n        if (i >= maxMatches) break\n        itemsToRender.push({item, score: 1})\n        i += 1\n      }\n      for (const [text, render] of lazyItems) {\n        if (i >= maxMatches) break\n        itemsToRender.push({text, render, score: 1})\n        i += 1\n      }\n    }\n\n    requestAnimationFrame(() => {\n      if (sortAbort.aborted) return\n\n      // Store a reference to the checked input (if there is one) as when we\n      // append other (stale) items they could be checked, and we want to keep\n      // the originally checked item as the only checked item\n      const checkedInputBeforeFilter = list.querySelector('input[type=\"radio\"]:checked')\n\n      list.innerHTML = ''\n      let offset = 0\n\n      const nextBatch = () => {\n        if (sortAbort.aborted) return\n        const end = Math.min(itemsToRender.length, offset + 100)\n        const fragment = document.createDocumentFragment()\n        for (let i = offset; i < end; i += 1) {\n          const itemToRender = itemsToRender[i]\n          let item = null\n          if ('render' in itemToRender && 'text' in itemToRender) {\n            const {render, text} = itemToRender\n            item = render(text)\n            items.add(item)\n            textCache.set(item, text)\n            lazyItems.delete(text)\n          } else if ('item' in itemToRender) {\n            item = itemToRender.item\n          }\n          if (item instanceof HTMLElement) {\n            if (shouldMark) {\n              highlightElement(\n                markSelector ? item.querySelector(markSelector) || item : item,\n                shouldMark ? value : '',\n                getTextCache(item)\n              )\n            }\n            fragment.appendChild(item)\n          }\n        }\n        offset = end\n\n        // Loop through all items that are about to be rendered - if there are\n        // any radios that are checked that conflict with the one checked item,\n        // then reset them to unchecked state\n        let inputStateReset = false\n        if (checkedInputBeforeFilter instanceof HTMLInputElement) {\n          for (const checkedInput of fragment.querySelectorAll('input[type=\"radio\"]:checked')) {\n            if (checkedInput instanceof HTMLInputElement && checkedInput.value !== checkedInputBeforeFilter.value) {\n              checkedInput.checked = false\n              inputStateReset = true\n            }\n          }\n        }\n\n        list.appendChild(fragment)\n\n        // If any checked items were changed then a change event should be\n        // fired to let other observers know\n        if (checkedInputBeforeFilter && inputStateReset) {\n          checkedInputBeforeFilter.dispatchEvent(new Event('change', {bubbles: true}))\n        }\n\n        if (end < itemsToRender.length) {\n          requestAnimationFrame(nextBatch)\n        } else {\n          list.hidden = itemsToRender.length === 0\n          const emptyEl = this.querySelector<HTMLElement>('[data-fuzzy-list-show-on-empty]')\n          if (emptyEl) {\n            emptyEl.hidden = itemsToRender.length > 0\n          }\n\n          this.dispatchEvent(new CustomEvent('fuzzy-list-sorted', {detail: itemsToRender.length}))\n        }\n      }\n\n      nextBatch()\n    })\n  }\n\n  get value(): string {\n    return this.getAttribute('value') || ''\n  }\n\n  set value(value: string) {\n    this.setAttribute('value', value)\n  }\n\n  get markSelector(): string {\n    return this.getAttribute('mark-selector') || ''\n  }\n\n  set markSelector(value: string) {\n    if (value) {\n      this.setAttribute('mark-selector', value)\n    } else {\n      this.removeAttribute('mark-selector')\n    }\n  }\n\n  get minScore(): number {\n    return Number(this.getAttribute('min-score') || 0)\n  }\n\n  set minScore(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('min-score', String(value))\n  }\n\n  get maxMatches(): number {\n    return Number(this.getAttribute('max-matches') || Infinity)\n  }\n\n  set maxMatches(value: number) {\n    if (Number.isNaN(value)) return\n    this.setAttribute('max-matches', String(value))\n  }\n\n  static get observedAttributes(): string[] {\n    return ['value', 'mark-selector', 'min-score', 'max-matches']\n  }\n\n  attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n    if (oldValue === newValue) return\n    const state = states.get(this)\n    if (!state) return\n    if (state.timer) window.clearTimeout(state.timer)\n    state.timer = window.setTimeout(() => this.sort(), 100)\n  }\n}\n\nexport default FuzzyListElement\n\nif (!window.customElements.get('fuzzy-list')) {\n  window.FuzzyListElement = FuzzyListElement\n  window.customElements.define('fuzzy-list', FuzzyListElement)\n}\n\ndeclare global {\n  interface Window {\n    FuzzyListElement: typeof FuzzyListElement\n  }\n}\n","import {observe} from 'selector-observer'\n\nexport function getPlatform(): string | null {\n  if (/Windows/.test(navigator.userAgent)) {\n    return 'windows'\n  }\n  if (/Macintosh/.test(navigator.userAgent)) {\n    return 'mac'\n  }\n  return null\n}\n\nfunction runningOnPlatform(element: Element): boolean {\n  const platforms = (element.getAttribute('data-platforms') || '').split(',')\n  const platform = getPlatform()\n  return Boolean(platform && platforms.includes(platform))\n}\n\nobserve('.js-remove-unless-platform', function (el) {\n  if (!runningOnPlatform(el)) {\n    el.remove()\n  }\n})\n\nobserve('.js-show-for-platform', {\n  constructor: HTMLElement,\n  add(el) {\n    if (runningOnPlatform(el)) {\n      el.hidden = false\n    }\n  }\n})\n\nobserve('.js-hide-for-platform', {\n  constructor: HTMLElement,\n  add(el) {\n    if (runningOnPlatform(el)) {\n      el.hidden = true\n    }\n  }\n})\n","import {ready} from '../../document-ready'\n\nconst pjaxHeadCache: {[key: string]: Element[]} = {}\nconst pjaxReplaceCache: {[key: string]: Element[]} = {}\n\n;(async () => {\n  await ready\n  pjaxHeadCache[document.location.pathname] = Array.from(document.querySelectorAll('head [data-pjax-transient]'))\n  pjaxReplaceCache[document.location.pathname] = Array.from(document.querySelectorAll('[data-pjax-replace]'))\n})()\n\n// Extract special elements that are not to be inserted in the DOM verbatim.\ndocument.addEventListener('pjax:beforeReplace', function (event: Event) {\n  const contents = (event as CustomEvent).detail.contents || []\n  for (let i = 0; i < contents.length; i++) {\n    const elem = contents[i]\n    if (elem instanceof Element) {\n      if (elem.id === 'pjax-head') {\n        pjaxHeadCache[document.location.pathname] = Array.from(elem.children)\n        contents[i] = null\n      } else if (elem.hasAttribute('data-pjax-replace')) {\n        if (!pjaxReplaceCache[document.location.pathname]) pjaxReplaceCache[document.location.pathname] = []\n        pjaxReplaceCache[document.location.pathname].push(elem)\n        contents[i] = null\n      }\n    }\n  }\n})\n\nexport function replaceCachedElements() {\n  const cached = pjaxReplaceCache[document.location.pathname]\n  if (!cached) return\n  for (const elem of cached) {\n    const pjaxReplace = document.querySelector(`#${elem.id}`)\n    if (pjaxReplace) pjaxReplace.replaceWith(elem)\n  }\n}\n\nexport function replaceTransientTags() {\n  const cached = pjaxHeadCache[document.location.pathname]\n  if (!cached) return\n  const head = document.head\n\n  for (const el of document.querySelectorAll('head [data-pjax-transient]')) {\n    el.remove()\n  }\n  for (const el of cached) {\n    if (!el.matches('title, script, link[rel=stylesheet]')) {\n      el.setAttribute('data-pjax-transient', '')\n      head.append(el)\n    } else if (el.matches('link[rel=stylesheet]')) {\n      head.append(el)\n    }\n  }\n}\n","// Find element within document matching location hash.\nexport function findFragmentTarget(document: Document, hash: string = location.hash): Element | null {\n  return findElementByFragmentName(document, decodeFragmentValue(hash))\n}\n\n// Find element within document matching id or name.\nexport function findElementByFragmentName(document: Document, name: string): Element | null {\n  if (name === '') return null\n  return document.getElementById(name) || document.getElementsByName(name)[0]\n}\n\n// Decode location hash.\nexport function decodeFragmentValue(hash: string): string {\n  try {\n    return decodeURIComponent(hash.slice(1))\n  } catch {\n    return ''\n  }\n}\n","import memoize from '@github/memoize'\n\nconst features = memoize(enabledFeatures)\n\nfunction enabledFeatures(): string[] {\n  return (document.head?.querySelector<HTMLMetaElement>('meta[name=\"enabled-features\"]')?.content || '').split(',')\n}\n\nconst isFeatureEnabled = memoize(isEnabled)\n\nfunction isEnabled(name: string): boolean {\n  return features().indexOf(name) !== -1\n}\n\nexport {isFeatureEnabled}\n","// Attempt to detect if GitHub is being proxied.\nexport default function detectProxySite(document: Document): boolean {\n  const hostname = document.head?.querySelector<HTMLMetaElement>('meta[name=\"expected-hostname\"]')?.content\n\n  // ignore proxy detection if no meta tag is configured\n  if (!hostname) {\n    return false\n  }\n\n  // account for trailing . in hostname.\n  const expected = hostname.replace(/\\.$/, '').split('.').slice(-2).join('.')\n  const actual = document.location.hostname.replace(/\\.$/, '').split('.').slice(-2).join('.')\n\n  return expected !== actual\n}\n","import detectProxySite from './proxy-site-detection'\nimport {loaded} from './document-ready'\n\nlet stats: PlatformBrowserStat[] = []\n\nexport function sendStats(stat: PlatformBrowserStat, flushImmediately = false): void {\n  if (stat.timestamp === undefined) stat.timestamp = new Date().getTime()\n  stat.loggedIn = isLoggedIn()\n  stats.push(stat)\n\n  if (flushImmediately) {\n    flushStats()\n  } else {\n    scheduleSendStats()\n  }\n}\n\nlet queued: NodeJS.Timer | null = null\n\nasync function scheduleSendStats() {\n  await loaded\n  if (queued == null) {\n    queued = window.requestIdleCallback(flushStats)\n  }\n}\n\nfunction flushStats() {\n  queued = null\n\n  if (detectProxySite(document)) {\n    return\n  }\n\n  const url = document.head?.querySelector<HTMLMetaElement>('meta[name=\"browser-stats-url\"]')?.content\n  if (!url) {\n    return\n  }\n\n  const data = JSON.stringify({stats})\n  if (navigator.sendBeacon) {\n    navigator.sendBeacon(url, data)\n  }\n  stats = []\n}\n\nfunction isLoggedIn(): boolean {\n  return !!document.head?.querySelector<HTMLMetaElement>('meta[name=\"user-login\"]')?.content\n}\n","// `position: sticky` behavior that works with the notification shelf\n//\n// This module provides three pieces of functionality:\n//\n// - A JavaScript polyfill for `position: sticky` for legacy html which hasn't been upgraded to\n//   use `position: sticky` or cannot yet  because the layout doesn't work with `position: sticky`\n// - Augments `position: sticky` elements to add an `.is-stuck` class to elements when they are stuck\n//   requires `.js-position-sticky` to be added to the stuck element\n// - Ensures that any sticky headers that are on the same page as the notifications shelf sit below it\n//   vertically, rather than hidden underneath the shelf\n// - Provides a `.js-notification-shelf-top-offset` class, that will offset the `top` value of the\n//   element it is attached to, to ensure it sits below the notification header if it exists\n//   (see `.gh-header-shadow` for example usage)\n//\n// Usage:\n//\n// Legacy:\n//\n//    <div class=\"js-sticky js-sticky-offset-scroll top-0\">My sticky content</div>\n//\n// Modern:\n//\n//    <div class=\"js-sticky js-position-sticky top-0\" style=\"position: sticky\">My sticky content</div>\n//\n// Aligning another element to sit below the notification shelf\n//\n//    <div class=\"js-notification-shelf-top-offset\" style=\"position: fixed; top: 60px; left: 0; right: 0;\">...</div>\n\nimport {loaded} from '../document-ready'\nimport {observe} from 'selector-observer'\n\n// Have we set up the handlers already?\nlet listening = false\n\n// The current pixel height of the notification shelf\n// zero if the shelf is not rendered\nlet notificationShelfHeight = 0\n\ninterface StickySet {\n  element: HTMLElement\n  placeholder: HTMLElement | null\n  offsetParent: Element | null\n  top: number\n}\n\nconst stickySets: StickySet[] = []\n\nfunction manageObservers() {\n  if (stickySets.length) {\n    addObservers()\n  } else {\n    removeObservers()\n  }\n}\n\nfunction addObservers() {\n  if (!listening) {\n    /* eslint-disable-next-line github/prefer-observers */\n    window.addEventListener('resize', checkElementsForStickingHandler)\n    /* eslint-disable-next-line github/prefer-observers */\n    document.addEventListener('scroll', checkElementsForStickingHandler)\n    listening = true\n  }\n}\n\nfunction removeObservers() {\n  window.removeEventListener('resize', checkElementsForStickingHandler)\n  document.removeEventListener('scroll', checkElementsForStickingHandler)\n  listening = false\n}\n\nexport function forceStickyRelayout() {\n  checkElementsForSticking(true)\n}\n\nfunction checkElementsForStickingHandler() {\n  checkElementsForSticking()\n}\n\nfunction checkElementsForSticking(force = false) {\n  for (const set of stickySets) {\n    if (set.element.offsetHeight > 0) {\n      // element isn't hidden\n      const {element, placeholder, top} = set\n      const elementBox = element.getBoundingClientRect()\n\n      if (placeholder) {\n        const placeholderBox = placeholder.getBoundingClientRect()\n\n        if (element.classList.contains('is-stuck')) {\n          if (placeholderBox.top > withShelfOffset(element, top)) {\n            unpinSet(set)\n          } else {\n            updatePinnedSet(set)\n          }\n        } else {\n          if (elementBox.top <= withShelfOffset(element, top)) {\n            pinSet(set)\n          } else if (force) {\n            updatePinnedSet(set)\n          }\n        }\n      } else {\n        if (elementBox.top <= withShelfOffset(element, top)) {\n          pinSet(set)\n        } else {\n          unpinSet(set)\n        }\n      }\n    }\n  }\n}\n\n// Determine if the browser has support for `position: sticky`.\nfunction browserHasSticky(el: HTMLElement): boolean {\n  const {position} = window.getComputedStyle(el)\n  return /sticky/.test(position)\n}\n\n// Pin an element.\nfunction pinSet({element, placeholder, top}: StickySet) {\n  if (placeholder) {\n    const elementBox = element.getBoundingClientRect()\n\n    setTopImportant(element, withShelfOffset(element, top))\n    element.style.left = `${elementBox.left}px`\n    element.style.width = `${elementBox.width}px`\n    element.style.marginTop = '0'\n    element.style.position = 'fixed'\n    placeholder.style.display = 'block'\n  }\n\n  element.classList.add('is-stuck')\n}\n\n// Unpin an element.\nfunction unpinSet({element, placeholder}: StickySet) {\n  if (placeholder) {\n    element.style.position = 'static'\n    element.style.marginTop = placeholder.style.marginTop\n    placeholder.style.display = 'none'\n  }\n\n  element.classList.remove('is-stuck')\n}\n\nfunction updatePinnedSet({element, placeholder, offsetParent, top}: StickySet) {\n  if (placeholder) {\n    const elementBox = element.getBoundingClientRect()\n    const placeholderBox = placeholder.getBoundingClientRect()\n\n    setTopImportant(element, withShelfOffset(element, top))\n    element.style.left = `${placeholderBox.left}px`\n    element.style.width = `${placeholderBox.width}px`\n\n    // if the bottom of the fixed box overflows it's container, scroll it\n    if (offsetParent) {\n      const parentBox = offsetParent.getBoundingClientRect()\n\n      if (parentBox.bottom < elementBox.height + parseInt(String(top))) {\n        element.style.top = `${parentBox.bottom - elementBox.height}px`\n      }\n    }\n  }\n}\n\nfunction findOrCreatePlaceholder(el: HTMLElement): HTMLElement | null {\n  if (browserHasSticky(el)) {\n    return null\n  }\n\n  const previousElement = el.previousElementSibling as HTMLElement\n  if (previousElement && previousElement.classList.contains('is-placeholder')) {\n    return previousElement\n  }\n\n  const div = document.createElement('div')\n  div.style.visibility = 'hidden'\n  div.style.display = 'none'\n  div.style.height = window.getComputedStyle(el).height\n  div.className = el.className\n  div.classList.remove('js-sticky')\n  div.classList.add('is-placeholder')\n\n  return el.parentNode!.insertBefore(div, el)\n}\n\nfunction createSet(el: HTMLElement) {\n  const placeholder = findOrCreatePlaceholder(el)\n  const oldPosition = window.getComputedStyle(el).position\n\n  el.style.position = 'static' // do this to get offsetParent\n  const offsetParent = el.offsetParent\n\n  // set to fixed so we can read the `top` value from CSS\n  el.style.position = 'fixed'\n\n  const top = getOriginalTop(el)\n  const hash = {\n    element: el,\n    placeholder,\n    offsetParent,\n    top: top === 'auto' ? 0 : parseInt(top || '0')\n  }\n\n  // set back to static\n  el.style.position = oldPosition\n\n  stickySets.push(hash)\n}\n\nfunction removeSet(el: HTMLElement) {\n  const idx = stickySets.map(set => set.element).indexOf(el)\n  stickySets.splice(idx, 1)\n}\n\nasync function initializeSet(el: HTMLElement) {\n  await loaded\n  createSet(el)\n  checkElementsForSticking()\n  manageObservers()\n}\n\nobserve('.js-sticky', {\n  constructor: HTMLElement,\n  add(el) {\n    initializeSet(el)\n  },\n  remove(el) {\n    removeSet(el)\n    manageObservers()\n  }\n})\n\nobserve('.js-notification-top-shelf', {\n  constructor: HTMLElement,\n  add(shelfEl) {\n    initializeNotificationShelf(shelfEl)\n  },\n  remove() {\n    // Some pages have two shelves rendered for differing layouts at responsive\n    // breakpoints, so remove all shelves when any one is removed\n    for (const shelfEl of document.querySelectorAll('.js-notification-top-shelf')) {\n      shelfEl.remove()\n    }\n\n    if (notificationShelfHeight > 0) {\n      notificationShelfHeight = 0\n      updateTopOffsets()\n      forceStickyRelayout()\n    }\n  }\n})\n\n// Update the top value to include the shelf offset if elements are added later.\nobserve('.js-notification-shelf-offset-top, .js-position-sticky', {\n  constructor: HTMLElement,\n  add: updateTopOffset\n})\n\n// Sets the global notificationShelfHeight variable to match a newly rendered shelf\n// if required, so that other sticky headers can adjust their position to match.\nasync function initializeNotificationShelf(shelfEl: HTMLElement) {\n  // don't measure the height of a hidden shelf\n  if (shelfEl.offsetParent === null) return\n  await loaded\n\n  const height = Math.floor(shelfEl.getBoundingClientRect().height)\n  if (height > 0) {\n    notificationShelfHeight = height\n    updateTopOffsets()\n    forceStickyRelayout()\n  }\n}\n\n// Updates the top offset of all js-position-sticky or js-notification-shelf-offset-top\n// elements to include the height of the notification shelf.\n//\n// If the shelf has since been removed, will return `top` to it's original value.\nfunction updateTopOffsets() {\n  for (const el of document.querySelectorAll<HTMLElement>('.js-position-sticky, .js-notification-shelf-offset-top')) {\n    updateTopOffset(el)\n  }\n}\n\n// Updates the top offset to include the notification bar offset.\nfunction updateTopOffset(el: HTMLElement) {\n  if (el.classList.contains('js-notification-top-shelf')) return\n\n  const top = parseInt(getOriginalTop(el)) || 0\n  setTopImportant(el, top + notificationShelfHeight)\n}\n\n// Returns the original-top value if it's been set as a data-attribute, or if not\n// retrieves it from getComputedStyle and caches it.\n//\n// This is required because an element with an already modified top value may be\n// loaded in from the PJAX cache, and without this attribute, we cannot tell if\n// we already added the shelf offset to it's top value or not.\nfunction getOriginalTop(el: HTMLElement): string {\n  const originalTop = el.getAttribute('data-original-top')\n  if (originalTop != null) return originalTop\n\n  const top = window.getComputedStyle(el).top\n  el.setAttribute('data-original-top', top)\n  return top\n}\n\n// Add a pixel offset to a number (e.g an existing top value) to offset it\n// by the current height of the notification shelf.\nfunction withShelfOffset(el: HTMLElement, top: number): number {\n  if (el.classList.contains('js-notification-top-shelf')) return top\n\n  return top + notificationShelfHeight\n}\n\n// Update the top style property of an element with !important.\nfunction setTopImportant(el: HTMLElement, top: number) {\n  el.style.setProperty('top', `${top}px`, 'important')\n}\n","import type {PageViews} from './page-views'\n\nconst FEATURE_WEIGHTS = {frequency: 0.6, recency: 0.4}\n\nfunction sortBy<T>(items: T[], map: (item: T) => number): T[] {\n  return items.sort((a, b) => map(a) - map(b))\n}\n\ntype Scorer = (pageKey: string) => number\nexport function scorer(pageViews: PageViews): Scorer {\n  const frequencies = frequencyMap(pageViews)\n  const recencies = recencyMap(pageViews)\n  return function (pageKey: string): number {\n    return score(frequencies.get(pageKey) || 0, recencies.get(pageKey) || 0)\n  }\n}\n\nfunction score(frequency: number, recency: number): number {\n  return frequency * FEATURE_WEIGHTS.frequency + recency * FEATURE_WEIGHTS.recency\n}\n\n// Scores a relative frequency in the interval [0, 1] where higher means more frequent.\nfunction frequencyMap(pageViews: PageViews): Map<string, number> {\n  const totalVisits = [...Object.values(pageViews)].reduce((total, view) => total + view.visitCount, 0)\n  return new Map(Object.keys(pageViews).map(pageKey => [pageKey, pageViews[pageKey].visitCount / totalVisits]))\n}\n\n// Scores a relative recency value in the interval [0, 1] where higher means more recent.\nfunction recencyMap(pageViews: PageViews): Map<string, number> {\n  const recencyList = sortBy([...Object.keys(pageViews)], key => pageViews[key].lastVisitedAt)\n  const totalUniqueVisits = recencyList.length\n  return new Map(recencyList.map((key, index) => [key, (index + 1) / totalUniqueVisits]))\n}\n","// Safely access Storage items by wrapping a Storage instance\n// (localStorage or sessionStorage) with safe versions of its API\n// methods.  Callers may opt not to suppress quota errors thrown on\n// set in case they rely on recieving them.\n\n// An implementation of the Storage API that throws away all data.  Used in\n// cases when the requested Storage backend is not available.\nclass NoOpStorage {\n  getItem() {\n    return null\n  }\n\n  setItem() {\n    return undefined\n  }\n\n  removeItem() {\n    return undefined\n  }\n\n  clear() {\n    return undefined\n  }\n\n  key() {\n    return null\n  }\n\n  get length() {\n    return 0\n  }\n}\n\nexport default function safeStorage(\n  storageKey: 'sessionStorage' | 'localStorage',\n  options = {throwQuotaErrorsOnSet: false},\n  global = window\n) {\n  let storage: Storage\n  try {\n    storage = global[storageKey]\n  } catch {\n    storage = new NoOpStorage()\n  }\n\n  const {throwQuotaErrorsOnSet} = options\n\n  // Safely get storage item.\n  function getItem(key: string): string | null {\n    try {\n      return storage.getItem(key)\n    } catch (error) {\n      // Ignore browser private mode error.\n      return null\n    }\n  }\n\n  // Safely set storage item.\n  function setItem(key: string, value: string) {\n    try {\n      storage.setItem(key, value)\n    } catch (error) {\n      if (throwQuotaErrorsOnSet && error.message.toLowerCase().includes('quota')) throw error\n    }\n  }\n\n  // Safely remove storage item.\n  function removeItem(key: string) {\n    try {\n      storage.removeItem(key)\n    } catch (error) {\n      // Ignore browser private mode error.\n    }\n  }\n  return {getItem, setItem, removeItem}\n}\n","import safeStorage from './safe-storage'\n\nexport const {getItem, setItem, removeItem} = safeStorage('sessionStorage')\n","// ### Example Markup\n//\n//   <div class=\"js-task-list-container\">\n//     <task-lists disabled sortable>\n//       <div class=\"js-comment-body\">\n//         <ul class=\"contains-task-list\">\n//           <li class=\"task-list-item\">\n//             <input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>\n//             text\n//           </li>\n//         </ul>\n//       </div>\n//     </task-lists>\n//     <form class=\"js-comment-update\">\n//       <textarea class=\"js-task-list-field\">- [ ] text</textarea>\n//     </form>\n//   </div>\n//\n// ### Specification\n//\n// TaskLists MUST be contained in a `(div).js-task-list-container`.\n//\n// TaskList Items SHOULD be an a list (`UL`/`OL`) element.\n//\n// Task list items MUST match `(input).task-list-item-checkbox` and MUST be\n// `disabled` by default.\n//\n// TaskLists MUST have a `(textarea).js-task-list-field` form element whose\n// `value` attribute is the source (Markdown) to be updated. The source MUST\n// follow the syntax guidelines.\n//\n// ### NOTE\n//\n// Task list checkboxes are rendered as disabled by default because rendered\n// user content is cached without regard for the viewer.\n\nimport {compose, fromEvent} from '../subscription'\nimport {fire, on} from 'delegated-events'\n\nimport TaskListsElement from '@github/task-lists-element'\nimport {isFeatureEnabled} from '../features'\nimport {observe} from 'selector-observer'\nimport {remoteForm} from '@github/remote-form'\nimport {requestSubmit} from '../form'\n\ntype Position = [number, number]\n\ninterface CheckPayload {\n  operation: 'check'\n  position: Position\n  checked: boolean\n}\n\ninterface MovePayload {\n  operation: 'move'\n  src: Position\n  dst: Position\n}\n\n// Enable task lists with persistence fields. Otherwise, the viewer lacks\n// permission to update the comment so task lists remain disabled.\nobserve('.js-task-list-container .js-task-list-field', function (el) {\n  const container = el.closest<HTMLElement>('.js-task-list-container')!\n  enableTaskList(container)\n  updateProgress(container)\n})\n\non('task-lists-move', 'task-lists', function (event) {\n  const {src, dst} = event.detail\n  const container = event.currentTarget.closest<HTMLElement>('.js-task-list-container')!\n  saveTaskList(container, 'reordered', {operation: 'move', src, dst})\n})\n\non('task-lists-check', 'task-lists', function (event) {\n  const {position, checked} = event.detail\n  const container = event.currentTarget.closest<HTMLElement>('.js-task-list-container')!\n  saveTaskList(container, `checked:${checked ? 1 : 0}`, {operation: 'check', position, checked})\n})\n\nexport function enableTaskList(container: Element) {\n  if (container.querySelector('.js-task-list-field')) {\n    const taskLists = container.querySelectorAll('task-lists')\n    for (const el of taskLists) {\n      if (el instanceof TaskListsElement) {\n        el.disabled = false\n        const buttons = el.querySelectorAll('button')\n        for (const button of buttons) {\n          button.disabled = false\n        }\n      }\n    }\n  }\n}\n\nexport function disableTaskList(container: Element) {\n  for (const el of container.querySelectorAll('task-lists')) {\n    if (el instanceof TaskListsElement) {\n      el.disabled = true\n\n      const buttons = el.querySelectorAll('button')\n      for (const button of buttons) {\n        button.disabled = true\n      }\n    }\n  }\n}\n\n// Persist task list source changes.\n//\n// Adds a hidden tracking input to the form to trigger server-side\n// instrumentation.\nfunction saveTaskList(container: Element, track: string, payload: CheckPayload | MovePayload) {\n  const form = container.querySelector<HTMLFormElement>('.js-comment-update')!\n\n  disableTaskList(container)\n  updateProgress(container)\n\n  const previousTracking = form.elements.namedItem('task_list_track')\n  if (previousTracking instanceof Element) previousTracking.remove()\n\n  const previousOperation = form.elements.namedItem('task_list_operation')\n  if (previousOperation instanceof Element) previousOperation.remove()\n\n  const tracking = document.createElement('input')\n  tracking.setAttribute('type', 'hidden')\n  tracking.setAttribute('name', 'task_list_track')\n  tracking.setAttribute('value', track)\n  form.appendChild(tracking)\n\n  const operation = document.createElement('input')\n  operation.setAttribute('type', 'hidden')\n  operation.setAttribute('name', 'task_list_operation')\n  operation.setAttribute('value', JSON.stringify(payload))\n  form.appendChild(operation)\n\n  if (!form.elements.namedItem('task_list_key')) {\n    const field = form.querySelector('.js-task-list-field')!\n    const name = field.getAttribute('name')!\n    const value = name.split('[')[0]\n    const input = document.createElement('input')\n    input.setAttribute('type', 'hidden')\n    input.setAttribute('name', 'task_list_key')\n    input.setAttribute('value', value)\n    form.appendChild(input)\n  }\n\n  // If the user has ran into a stale error and is now re-submitting, hide it\n  container.classList.remove('is-comment-stale')\n\n  requestSubmit(form)\n}\n\nremoteForm('.js-task-list-container .js-comment-update', async function (form, wants) {\n  const container = form.closest('.js-task-list-container')!\n  const tracking = form.elements.namedItem('task_list_track')\n  if (tracking instanceof Element) tracking.remove()\n\n  const operation = form.elements.namedItem('task_list_operation')\n  if (operation instanceof Element) operation.remove()\n\n  let response\n  try {\n    response = await wants.json()\n  } catch (error) {\n    let data\n    try {\n      data = JSON.parse(error.response.text)\n    } catch (e) {\n      // Do nothing\n    }\n\n    if (data && data.stale) {\n      const commentField = container.querySelector<HTMLTextAreaElement>('.js-task-list-field')!\n\n      // Prevent the stale value of this field from being persisted (and, eventually, erroneously\n      // restored) if the page is refreshed. We will undo this (and restore the session-resumable\n      // behaviour) if the user clicks the 'Cancel' button to discard the stale edits in this field.\n      commentField.classList.add('session-resumable-canceled')\n      commentField.classList.remove('js-session-resumable')\n    } else {\n      window.location.reload()\n    }\n  }\n\n  if (response) {\n    if (operation) {\n      // Store reordered Markdown source in textarea.\n      if (response.json.source) {\n        container.querySelector<HTMLTextAreaElement>('.js-task-list-field')!.value = response.json.source\n      }\n    }\n    enableTaskList(container)\n    requestAnimationFrame(() => updateProgress(container))\n  }\n})\n\n// This flag specifies whether `beforeinput` handler is called before `input` event\n// This logic is needed because Chrome (Version 86.0.4240.198) has a bug with event.inputType == 'insertText' && event.data == null in textarea\n// But Firefox does not support `beforeinput` yet (as of 9th December 2020)\nlet handleAutocomplete = false\n\n// This flag is used to track if a text composition system (as the helper for JP kanji symbols)\n// has popped up on the screen or not.\n// This is needed because the custom tabbing behavior implemented here interferes with the system element\nlet isIMEVisible = false\n\n// This handler will set the handleAutocomplete flag so that all browsers except Firefox can handle the event correctly in autoCompleteOnInput\nfunction tryAutoCompleteOnBeforeInput(ev: Event) {\n  const event = ev as InputEvent\n\n  const isNewLine = event.inputType === 'insertLineBreak'\n  if (!isNewLine) {\n    handleAutocomplete = false\n  } else {\n    handleAutocomplete = true\n  }\n}\n\n// This handler will try autocomplete the text in textarea in all browsers\nfunction autoCompleteOnInput(ev: Event) {\n  const event = ev as InputEvent\n\n  // in Firefox this check will always pass\n  if (!handleAutocomplete) {\n    // this block will be called only in Firefox\n    // when `beforeinput` support is added to Firefox, this whole check can be removed\n    const isNewLine = event.inputType === 'insertLineBreak'\n    if (!isNewLine) return\n  }\n\n  const element = event.target as HTMLInputElement\n  listAutocomplete(element)\n  handleAutocomplete = false\n}\n\nfunction listAutocomplete(element: HTMLInputElement) {\n  const result = autocompletedList(element.value, [element.selectionStart, element.selectionEnd])\n  if (result === undefined) return\n\n  element.value = result.text\n  element.selectionStart = result.selection[0]\n  element.selectionEnd = result.selection[1]\n}\n\nfunction handleShiftEnter(ev: Event) {\n  if (isIMEVisible) {\n    return\n  }\n\n  const event = ev as KeyboardEvent\n\n  if (event.key === 'Enter' && event.shiftKey && !event.metaKey) {\n    const element = event.target as HTMLInputElement\n\n    const result = addSoftNewline(element.value, [element.selectionStart, element.selectionEnd])\n    if (result === undefined) return\n\n    element.value = result.text\n    element.selectionStart = result.selection[0]\n    element.selectionEnd = result.selection[1]\n\n    event.preventDefault()\n    // Trigger size-to-fit (see github/github#15696)\n    fire(element, 'change')\n  }\n}\n\nfunction onCompositionStart() {\n  isIMEVisible = true\n}\n\nfunction onCompositionEnd() {\n  isIMEVisible = false\n}\n\nfunction updateIndentation(ev: Event) {\n  if (isIMEVisible) {\n    return\n  }\n\n  const event = ev as KeyboardEvent\n  if (event.key === 'Escape') {\n    deselectText(ev)\n    return\n  }\n\n  if (event.key !== 'Tab') return\n\n  const element = event.target as HTMLInputElement\n\n  const result = indent(element.value, [element.selectionStart, element.selectionEnd], event.shiftKey)\n  if (result === undefined) return\n\n  event.preventDefault()\n\n  element.value = result.text\n  element.selectionStart = result.selection[0]\n  element.selectionEnd = result.selection[1]\n}\n\nobserve('.js-task-list-field', {\n  subscribe: el =>\n    compose(\n      fromEvent(el, 'keydown', updateIndentation),\n      fromEvent(el, 'keydown', handleShiftEnter),\n      fromEvent(el, 'beforeinput', tryAutoCompleteOnBeforeInput),\n      fromEvent(el, 'input', autoCompleteOnInput),\n      fromEvent(el, 'compositionstart', onCompositionStart),\n      fromEvent(el, 'compositionend', onCompositionEnd)\n    )\n})\n\ntype UpdatedText = {\n  text: string\n  selection: SelectionRange\n}\n\ntype SelectionRange = [number | null, number | null]\n\nconst INDENTATION_RE = /^(\\s*)?/\nexport function addSoftNewline(text: string, selection: SelectionRange): UpdatedText | undefined {\n  const offset = selection[0]\n  if (!offset || !text) return undefined\n\n  const lines = text.substring(0, offset).split('\\n')\n  const currentLine = lines[lines.length - 1]\n  const match = currentLine?.match(INDENTATION_RE)\n  if (!match) return undefined\n\n  const indentation = match[1] || ''\n  const autocompletePrefix = `\\n${indentation}`\n  return {\n    text: text.substring(0, offset) + autocompletePrefix + text.substring(offset),\n    selection: [offset + autocompletePrefix.length, offset + autocompletePrefix.length]\n  }\n}\n\n// matches '- ', '* ', '12. ', '- [ ]', '- [x]', `* [ ] `, `* [x] `, '12. [ ] ', '12. [x] '\nconst TASK_LIST_RE = /^(\\s*)([*-]|(\\d+)\\.)\\s(\\[[\\sx]\\]\\s)?/\n\nexport function autocompletedList(text: string, selection: SelectionRange): UpdatedText | undefined {\n  const offset = selection[0]\n  if (!offset || !text) return undefined\n\n  const lines = text.substring(0, offset).split('\\n')\n  const previousLine = lines[lines.length - 2]\n\n  // Check for task list existence\n  const match = previousLine?.match(TASK_LIST_RE)\n  if (!match) return undefined\n\n  const listPrefix = match[0]\n  const indentation = match[1]\n  const bullet = match[2]\n  const numericBullet = parseInt(match[3], 10)\n  const hasCheckbox = Boolean(match[4])\n  const newBullet = isNaN(numericBullet) ? bullet : `${numericBullet + 1}.`\n  let newPrefix = `${newBullet} ${hasCheckbox ? '[ ] ' : ''}`\n\n  let currentLineEnd = text.indexOf('\\n', offset)\n  if (currentLineEnd < 0) {\n    currentLineEnd = text.length\n  }\n  const currentLine = text.substring(offset, currentLineEnd)\n  // do not append list item if already present\n  if (currentLine.startsWith(newPrefix)) {\n    newPrefix = ''\n  }\n  /*\n    Autocomplete list element on next line if current line has list element containing text.\n    or there's text on the line after the cursor (|):\n    ```\n    - | some text\n    ```\n    becomes:\n    ```\n    -\n    - | some text\n    ```\n   */\n  const shouldAutocomplete = previousLine.replace(listPrefix, '').trim().length > 0 || currentLine.trim().length > 0\n  if (shouldAutocomplete) {\n    const autocompletePrefix = `${indentation}${newPrefix}`\n    return {\n      text: text.substring(0, offset) + autocompletePrefix + text.substring(offset),\n      selection: [offset + autocompletePrefix.length, offset + autocompletePrefix.length]\n    }\n  } else {\n    // This case clears the autocompleted list element if user hits an enter without adding any text to it.\n    const offsetWithoutPrefix = offset - `\\n${listPrefix}`.length\n    return {\n      text: text.substring(0, offsetWithoutPrefix) + text.substring(offset),\n      selection: [offsetWithoutPrefix, offsetWithoutPrefix]\n    }\n  }\n}\n\nexport function indent(text: string, selection: SelectionRange, substract: boolean): UpdatedText | undefined {\n  // Perform indentation manipulations only when more than one character was selected.\n  const selectionStart = selection[0] || 0\n  const selectionEnd = selection[1] || selectionStart\n  if (selection[0] === null || selectionStart === selectionEnd) return undefined\n\n  const startOffset = text.substring(0, selectionStart).lastIndexOf('\\n') + 1\n  const endOffsetPreNormalization = text.indexOf('\\n', selectionEnd - 1)\n  const endOffset = endOffsetPreNormalization > 0 ? endOffsetPreNormalization : text.length - 1\n  const selectedLines = text.substring(startOffset, endOffset).split('\\n')\n\n  let startUpdated = false\n  let selectionStartDiff = 0\n  let selectionEndDiff = 0\n  const updatedSelectedLines: string[] = []\n  for (const line of selectedLines) {\n    const match = line.match(/^\\s*/)\n    if (match) {\n      let indentation = match[0]\n      const lineText = line.substring(indentation.length)\n      if (substract) {\n        const prevLength = indentation.length\n        indentation = indentation.slice(0, -2)\n\n        // Update selectionStart for first line only.\n        selectionStartDiff = startUpdated ? selectionStartDiff : indentation.length - prevLength\n        startUpdated = true\n        selectionEndDiff += indentation.length - prevLength\n      } else {\n        indentation += '  '\n        selectionStartDiff = 2\n        selectionEndDiff += 2\n      }\n      updatedSelectedLines.push(indentation + lineText)\n    }\n  }\n\n  const linesString = updatedSelectedLines.join('\\n')\n  const newText = text.substring(0, startOffset) + linesString + text.substring(endOffset)\n  const newRange: SelectionRange = [\n    Math.max(startOffset, selectionStart + selectionStartDiff),\n    selectionEnd + selectionEndDiff\n  ]\n  return {text: newText, selection: newRange}\n}\n\nfunction deselectText(ev: Event) {\n  const event = ev as KeyboardEvent\n  const element = event.target as HTMLInputElement\n  if (element.selectionDirection === 'backward') {\n    element.selectionEnd = element.selectionStart\n  } else {\n    element.selectionStart = element.selectionEnd\n  }\n}\n\nfunction updateProgress(container: Element) {\n  if (!isFeatureEnabled('TASK_LISTS_UI')) return\n\n  const isInTimeline = container.closest<HTMLElement>('.js-timeline-item')\n  if (isInTimeline) return\n\n  const checkboxes = container.querySelectorAll<HTMLInputElement>('[type=checkbox]')\n  const total = checkboxes.length\n  const completed = Array.from(checkboxes).filter(checkbox => checkbox.checked).length\n  const progressComponents = document.querySelectorAll('subtasks-progress[data-type=checklist]')\n  for (const progress of progressComponents) {\n    progress.setAttribute('data-completed', String(completed))\n    progress.setAttribute('data-total', String(total))\n  }\n}\n","import {controller, target} from '@github/catalyst'\n\n@controller\nclass ActionsPolicyFormElement extends HTMLElement {\n  @target specificOptions: HTMLElement\n  @target submitButton: HTMLButtonElement\n  @target selectRadio: HTMLInputElement\n\n  connectedCallback() {\n    // Submit button is disabled until a change is made\n    this.submitButton.disabled = true\n\n    // Incase user refreshes the page and the form saved state in Firefox\n    this.toggleSpecificOptions()\n  }\n\n  enableForm() {\n    this.submitButton.disabled = false\n  }\n\n  toggleSpecificOptions() {\n    if (this.selectRadio.checked) {\n      this.specificOptions.hidden = false\n    } else {\n      this.specificOptions.hidden = true\n    }\n  }\n}\n","import {on} from 'delegated-events'\n\nexport async function prefetchCodespaceLocation(form: HTMLFormElement, setLocationInputValue = true) {\n  const locationInput = form.querySelector<HTMLInputElement>('[name=\"codespace[location]\"]')!\n  if (!locationInput || locationInput.value) return\n\n  const submitButton = form.querySelector('button[type=submit]')\n  if (submitButton instanceof HTMLInputElement) {\n    submitButton.disabled = true\n  }\n\n  const locationsURL = form.getAttribute('data-codespace-locations-url')\n  if (!locationsURL) return\n\n  const locationJSON = await fetchLocationValues(locationsURL)\n  if (setLocationInputValue && locationJSON) locationInput.value = locationJSON.current\n\n  return locationJSON\n}\n\nexport async function fetchLocationValues(url: string) {\n  const response = await fetch(url, {\n    headers: {\n      'X-Requested-With': 'XMLHttpRequest',\n      Accept: 'application/json'\n    }\n  })\n  if (!response.ok) {\n    const responseError = new Error()\n    const statusText = response.statusText ? ` ${response.statusText}` : ''\n    responseError.message = `HTTP ${response.status}${statusText}`\n    throw responseError\n  }\n  return response.json()\n}\n\non('submit', '.js-prefetch-codespace-location', async function (event) {\n  const form = event.currentTarget as HTMLFormElement\n\n  event.preventDefault()\n  await prefetchCodespaceLocation(form)\n  form.submit()\n})\n","// Example:\n//\n//    <div class=\"js-line-comments\">\n//      <div class=\"js-inline-comment-form-container\">\n//        <button class=\"js-toggle-inline-comment-form\">\n//        <form>\n//          <texarea class=\"js-comment-field\"></textarea>\n//          <button class=\"js-hide-inline-comment-form\">Cancel</button>\n//        </form>\n//      </div>\n//    </div>\n\nimport {fire, on} from 'delegated-events'\nimport {hasDirtyFields} from '../has-interactions'\nimport {onKey} from '../onfocus'\n\n// \"Add a line note\" button\n//\n// Hide self and show form.\non('click', '.js-toggle-inline-comment-form', function (event) {\n  const comments = event.currentTarget.closest<HTMLElement>('.js-line-comments')!\n  focusForm(comments)\n})\n\n// With a line comment selected, hitting \"r\" focuses the form with the quoted\n// text.\non('quote-selection', '.js-line-comments', function (event) {\n  focusForm(event.currentTarget)\n})\n\n// Install handlers on inline note comment form focusin\nonKey('keydown', '.js-inline-comment-form-container form .js-comment-field', function (event: KeyboardEvent) {\n  const field = event.target as HTMLTextAreaElement\n\n  if (field.classList.contains('js-navigation-enable')) {\n    return\n  }\n\n  if (event.key === 'Escape' && field.value.length === 0) {\n    const form = field.closest<HTMLFormElement>('form')!\n    blurForm(form)\n    event.preventDefault()\n  }\n})\n\n// \"Close form\" button\n//\n// Hide self and show \"Add a line button\" again. If theres no comments cleanup\n// the empty container.\non('click', '.js-hide-inline-comment-form', function (event) {\n  const form = event.currentTarget.closest<HTMLFormElement>('form')!\n\n  const container = event.currentTarget.closest<HTMLElement>('.js-inline-comment-form-container')!\n  const multiLinePreview = container.querySelector<HTMLElement>('.js-multi-line-preview')\n  if (multiLinePreview) {\n    multiLinePreview.hidden = true\n  }\n\n  if (!hasDirtyFields(form) || confirm((event.target as Element).getAttribute('data-confirm-cancel-text')!)) {\n    blurForm(form)\n  } else {\n    // Do not reset form\n    event.preventDefault()\n  }\n})\n\n// Opens form container, ensures write tab is selected and focuses textarea.\nexport function focusForm(comments: Element) {\n  const container = comments.querySelector<HTMLElement>('.js-inline-comment-form-container')!\n  container.classList.add('open')\n  container.querySelector<HTMLElement>('.js-write-tab')?.click()\n  container.querySelector<HTMLElement>('.js-comment-field')!.focus()\n  fire(container, 'inlinecomment:focus')\n}\n\n// Reset and close comment form. Opposite of focusForm.\n//\n// form - A .js-inline-comment-form HTMLFormElement\nexport function blurForm(form: HTMLFormElement) {\n  form.reset()\n\n  const container = form.closest<HTMLElement>('.js-inline-comment-form-container')!\n  container.classList.remove('open')\n\n  fire(container, 'inlinecomment:collapse')\n}\n","import {findElementByFragmentName} from '../fragment-target'\n\nclass DiffPosition {\n  diffId: string\n  side: string\n  lineNumber: number\n  element: Element | null\n\n  constructor(diffId: string, side: string, lineNumber: number) {\n    this.diffId = diffId\n    this.side = side\n    this.lineNumber = lineNumber\n\n    this.element = findElementByFragmentName(document, this.anchor())\n  }\n\n  sideForCommenting(): string {\n    if (this.element && this.element.classList.contains('blob-num-context')) {\n      return 'right'\n    }\n\n    /* eslint-disable-next-line @typescript-eslint/ban-ts-comment */\n    // @ts-ignore\n    return {R: 'right', L: 'left'}[this.side]\n  }\n\n  isContext(): boolean {\n    if (!this.element) {\n      return false\n    }\n\n    return this.element.classList.contains('blob-num-context')\n  }\n\n  // The URL anchor for this diff position on the page.\n  anchor(): string {\n    return `${this.diffId}${this.anchorSuffix()}`\n  }\n\n  // The URL anchor anchor for this diff position on the page.\n  //\n  // E.g. - 'L42'\n  anchorSuffix(): string {\n    return `${this.side}${this.lineNumber}`\n  }\n\n  // Tests whether or not this position is equivalent with another.\n  is(otherPosition: DiffPosition): boolean {\n    return (\n      this.diffId === otherPosition.diffId &&\n      this.side === otherPosition.side &&\n      this.lineNumber === otherPosition.lineNumber\n    )\n  }\n}\n\nexport class DiffRange {\n  elements: Set<Element>\n  isParsed: boolean\n  isSplit: boolean\n  diffId: string\n  diffTable: HTMLElement | null\n  start: DiffPosition\n  end: DiffPosition\n  lineCount: number\n  _rows: Set<HTMLElement>\n  _isAcrossHunks: boolean\n  _isContextOnly: boolean\n  _includesExpandedLine: boolean\n\n  constructor(diffId: string, startSide: string, startLineNumber: number, endSide: string, endLineNumber: number) {\n    this.elements = new Set()\n    this.isParsed = false\n    this.isSplit = false\n    this._rows = new Set()\n    this._isAcrossHunks = false\n    this._isContextOnly = true\n    this._includesExpandedLine = false\n\n    this.diffId = diffId\n    this.diffTable = document.querySelector(`.js-diff-table[data-diff-anchor=\"${diffId}\"]`)\n    if (this.diffTable) this.isSplit = this.diffTable.classList.contains('js-file-diff-split')\n\n    this.start = new DiffPosition(diffId, startSide, startLineNumber)\n    this.end = new DiffPosition(diffId, endSide, endLineNumber)\n    this.lineCount = 0\n\n    this.parse()\n  }\n\n  // Generates an URL anchor which identifies this range.\n  //\n  // E.g. 'diff-2b939de295abbeb764a2b0de8fe0e690L5-R7'\n  anchor(): string {\n    const parts = []\n    parts.push(this.start.anchor())\n\n    if (!this.start.is(this.end)) {\n      parts.push(this.end.anchorSuffix())\n    }\n\n    return parts.join('-')\n  }\n\n  // Internal: Finds all elements in the specified range.\n  parse() {\n    if (!this.diffTable) return\n\n    let lineNumbers = this.unify(this.diffTable.querySelectorAll('.js-linkable-line-number'))\n    lineNumbers = this.filterInRange(lineNumbers)\n\n    this.lineCount = lineNumbers.length\n    this.elements = this.expandRelatedElements(lineNumbers)\n    this.isParsed = true\n  }\n\n  // Internal: Orders line number elements in the order they would appear in a unified diff.\n  unify(lineNumbers: NodeListOf<Element>): Element[] {\n    if (!this.isSplit) return Array.from(lineNumbers)\n\n    const unified = []\n    let additions = []\n    let deletions = []\n\n    for (const lineNumber of lineNumbers) {\n      if (lineNumber.classList.contains('blob-num-addition')) {\n        additions.push(lineNumber)\n      } else if (lineNumber.classList.contains('blob-num-deletion')) {\n        deletions.push(lineNumber)\n      } else {\n        unified.push(...deletions, ...additions, lineNumber)\n        additions = []\n        deletions = []\n      }\n    }\n\n    unified.push(...deletions, ...additions)\n\n    return unified\n  }\n\n  // Internal: Takes all line number elements in this diff and filters it down to\n  // only the ones included in the range.\n  filterInRange(lineNumbers: Element[]): Element[] {\n    if (!this.start.element || !this.end.element) return []\n\n    let startIndex = lineNumbers.indexOf(this.start.element)\n    let endIndex = lineNumbers.indexOf(this.end.element)\n\n    if (startIndex > endIndex) {\n      // start and end are out of order\n      ;[startIndex, endIndex] = [endIndex, startIndex]\n\n      // 2-step reassignement since flow doesn't support this inline.\n      const [newStart, newEnd] = [this.end, this.start]\n      this.start = newStart\n      this.end = newEnd\n    }\n\n    return lineNumbers.slice(startIndex, endIndex + 1)\n  }\n\n  isContextOnly(): boolean {\n    if (!this.isParsed) {\n      this.parse()\n    }\n\n    return this._isContextOnly\n  }\n\n  isAcrossHunks(): boolean {\n    if (!this.isParsed) {\n      this.parse()\n    }\n\n    return this._isAcrossHunks\n  }\n\n  includesExpandedLine(): boolean {\n    if (!this.isParsed) {\n      this.parse()\n    }\n\n    return this._includesExpandedLine\n  }\n\n  rows(): Set<HTMLElement> {\n    if (!this.isParsed) {\n      this.parse()\n    }\n\n    return this._rows\n  }\n\n  // Internal: Takes line number elements in the range and expands them to include other\n  // elements that should be highlighted whenever the line number element is.\n  //\n  // Behavior differs between split diffs and unified.\n  expandRelatedElements(lineNumbers: Element[]): Set<Element> {\n    const splitDiff = this.isSplit\n\n    const firstElement = lineNumbers[0]\n    const lastElement = lineNumbers[lineNumbers.length - 1]\n\n    if (firstElement && lastElement) {\n      const firstElementTR = firstElement.closest('[data-hunk]')\n      const lastElementTR = lastElement.closest('[data-hunk]')\n\n      if (firstElementTR && lastElementTR) {\n        const firstElementHunk = firstElementTR.getAttribute('data-hunk')\n        const lastElementHunk = lastElementTR.getAttribute('data-hunk')\n\n        if (firstElementHunk !== lastElementHunk) {\n          this._isAcrossHunks = true\n        }\n      }\n    }\n\n    const expander = (expandedSet: Set<Element>, lineNumber: Element): Set<Element> => {\n      if (!this._includesExpandedLine && lineNumber.closest('.blob-expanded')) {\n        this._includesExpandedLine = true\n      }\n\n      const row = lineNumber.parentElement\n      if (row instanceof HTMLElement) {\n        this._rows.add(row)\n      }\n      const additionOrDeletion =\n        lineNumber.classList.contains('blob-num-deletion') || lineNumber.classList.contains('blob-num-addition')\n\n      if (additionOrDeletion) {\n        this._isContextOnly = false\n      }\n\n      if (!row) return expandedSet\n\n      if (splitDiff && additionOrDeletion) {\n        // Addition or deletion in a split diff. Only return elements from that side of the diff.\n        const index = Array.from(row.children).indexOf(lineNumber)\n        if (index < 2) {\n          // Diff left side\n          return expandedSet.add(row.children[0]).add(row.children[1])\n        } else {\n          return expandedSet.add(row.children[2]).add(row.children[3])\n        }\n      } else {\n        for (const el of Array.from(row.children)) {\n          expandedSet.add(el)\n        }\n        return expandedSet\n      }\n    }\n\n    return lineNumbers.reduce(expander, new Set())\n  }\n}\n","// Detect if location Hash matches a diff anchor with line numbers.\n// Use this to check whether a location should be routed to a diff expander element.\nexport function matchHash(hash: string): RegExpMatchArray | null {\n  const diffAnchorMatch = hash.match(/^#?(diff-[a-f0-9]+)(L|R)(\\d+)(?:-(L|R)(\\d+))?$/i)\n  if (diffAnchorMatch != null && diffAnchorMatch.length === 6) {\n    return diffAnchorMatch\n  }\n\n  const discussionAnchorMatch = hash.match(/^#?(discussion-diff-[0-9]+)(L|R)(\\d+)(?:-(L|R)(\\d+))?$/i)\n  if (discussionAnchorMatch != null && discussionAnchorMatch.length === 6) {\n    return discussionAnchorMatch\n  }\n\n  return null\n}\n","import {on} from 'delegated-events'\n\non('click', '.js-rich-diff.collapsed .js-expandable', function (event) {\n  if (!(event.target instanceof Element)) return\n  event.preventDefault()\n  const container = event.target.closest('.js-rich-diff')!\n  container.classList.remove('collapsed')\n})\n\non('click', '.js-show-rich-diff', function (event) {\n  const warn = event.currentTarget.closest('.js-warn-no-visible-changes')\n  if (!warn) return\n\n  /* eslint-disable-next-line github/no-d-none */\n  warn.classList.add('d-none')\n\n  const container = warn.parentElement!\n\n  const message = container.querySelector('.js-no-rich-changes')\n  if (message) {\n    /* eslint-disable-next-line github/no-d-none */\n    message.classList.remove('d-none')\n  }\n})\n"],"names":["str","blobRange","parseBlobRange","anchorPrefix","match","parseAnchorPrefix","start","end","ascendingBlobRange","column","line","formatBlobRange","getLineElement","startContainer","_startOffset","findRangeOffset","endContainer","_endOffset","startOffset","endOffset","childNodes","length","ownerDocument","Error","range","createRange","setStart","setEnd","newNode","appendChild","extractContents","insertNode","name","strictDomain","domain","document","endsWith","time","Date","getTime","expiration","toUTCString","secure","location","protocol","expire","cookie","clientId","cookies","getCookies","clientIds","splitOut","value","split","shift","version","numberVersion","Number","join","push","String","sort","reverse","Math","round","random","pow","setCookie","async","el","data","wasStale","controller","pendingRequests","get","abort","updatable","closest","staleRecords","getAttribute","replace","textarea","text","point","selectionEnd","beginning","substring","remaining","newline","selectionStart","dispatchEvent","CustomEvent","bubbles","cancelable","focus","oldText","newText","editors","items","map","compare","filterMap","item","key","a","b","score","sessionTag","querySelector","expiryTag","HTMLLinkElement","expiresTag","HTMLMetaElement","expiresAround","parseInt","content","expiresSoon","url","href","response","fetch","headers","Accept","X-Requested-With","json","fetchSsoStatus","activeSsoPrompt","link","prompt","dialog","fetchSafeDocumentFragment","dialogClass","sso","external","window","ssoComplete","error","setModalStatus","setAttribute","updateExpiresAroundTag","dialogEl","Promise","resolve","addEventListener","once","waitForDialogClose","ssoPrompt","then","clearActiveSsoPrompt","catch","target","listener","removeEventListener","onKeydownInput","onKeyupInput","onInputInput","events","throttledInputEvents","timer","clearTimeout","delete","string","query","stringScore","indexOf","basename","lastIndexOf","findFragmentTarget","scrollIntoView","payload","hmac","hydroClientContext","sendData","path","teamPageMatch","TEAM_PAGE_REGEX","logPageViewByKey","buildTeamKey","projectPageMatch","repositoryPageMatch","i","len","PROJECT_PAGE_REGEXES","ownerType","projectRegex","ownerSlug","number","buildProjectKey","REPOSITORY_PAGE_REGEXES","buildRepositoryKey","entry","sessionHistoryEntries","position","cache","set","promise","host","locationOverride","queryLast","pathname","pagePathname","stripParams","search","extraParams","meta","querySelectorAll","names","RegExp","pageQuery","call","form","fields","element","elements","namedItem","HTMLInputElement","HTMLTextAreaElement","history","replaceState","showHighlight","currentRange","onEditorFromEvent","event","nextEvent","options","poll","wait","self","makeRequest","checkStatus","ResponseError","status","setTimeout","container","deactivate","clear","activeContainer","containerStack","pop","activate","getActiveContainer","rect","getBoundingClientRect","top","pageYOffset","left","pageXOffset","notification","hasAttribute","classList","toggle","toggleNotificationStatus","toggleNotificationSubscriptionStatus","toggleNotificationStarredStatus","fn","attempts","maxDelay","Infinity","signal","aborted","whenAborted","op","race","e","ms","vary","max","floor","min","values","size","slice","queue","queueMicrotask","accept","ok","sudoPrompt","containerSelector","contains","Intl","DateTimeFormat","resolvedOptions","timeZone","r","clientExtensionResults","getClientExtensionResults","n","t","u","navigator","credentials","l","charContainers","charContainer","updateInputRemainingCharacters","findNextElementSibling","className","nextSibling","nextElementSibling","HTMLElement","requestAnimationFrame","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","p","create","s","textRe","matches","innerHTML","trim","chars","toLowerCase","regex","c","fuzzyRegexp","open","html","m","clean","input","limit","getFieldLimit","valueLength","getUtf8StringLength","TypeError","checked","type","fire","announce","innerText","getTextContent","URLSearchParams","FormData","toString","retainFocus","AbortController","hasInteractions","console","warn","keypressed","inputed","undefined","currentState","Subscription","[object Object]","cleanup","this","closed","unsubscribe","fromEvent","eventName","onNext","capture","compose","subscriptions","subscription","overflowParent","targetElement","offsetParent","defaultView","body","parentElement","overflowY","overflowX","getComputedStyle","Document","overflowOffset","targetContainer","documentElement","elementOffset","positionedOffset","_container","scroll","scrollTop","scrollLeft","height","clientHeight","width","clientWidth","bottom","offsetHeight","right","offsetWidth","offsetTop","offsetLeft","scrollHeight","scrollWidth","measuredContainer","documentBody","getDocumentHeight","getDocumentWidth","scrollTo","visible","hidden","ctrlBindings","userAgent","modifierKey","hotkeyModifier","disableMouseEvents","mousePosition","x","y","onContainerMouseMove","MouseEvent","clientX","clientY","onContainerMouseOver","currentTarget","Element","focusItem","observe","subscribe","count","fireCustomKeydown","dispatched","hotkey","eventToHotkeyString","originalEvent","originalTarget","preventDefault","fireOpen","modifier","altKey","ctrlKey","metaKey","shiftKey","add","remove","on","isInput","detail","cursorDown","cursorUp","keyOpen","getItems","index","overflowParentEl","previous","dimension","scrollPageTo","pageUp","next","pageDown","firstItem","HTMLAnchorElement","click","scrollItemTo","getScrollStyle","behavior","overflow","block","defaultHash","args","JSON","stringify","_","v","memoize","opts","hash","Map","id","apply","has","result","getDocumentHtmlSafeNonces","nonces","message","super","verifyResponseHtmlSafeNonce","allowJson","contentType","startsWith","responseNonce","includes","parseHTML","template","createElement","importNode","framesToPop","responseError","statusText","init","Object","assign","request","Request","append","initialized","selectorSet","SelectorSet","handleFocus","focused","nodeType","Node","DOCUMENT_NODE","onFocus","selector","activeElement","onKey","eventType","inputHandler","blurHandler","field","onInput","clonedDetails","cloneNode","details","detailsDialog","spinner","detailsClass","prepend","persistSubmitButtonValue","button","HTMLFormElement","findPersistedSubmitButtonValue","defaultValue","showGlobalError","ajaxErrorMessage","getElementById","hideGlobalError","requestSubmit","submitter","checkButtonValidity","submit","isFormField","nodeName","isContentEditable","ignoreFocusedContainer","hasDirtyFields","stubbedActiveElement","getActiveElement","DetailsDialogElement","isLinkOrButton","HTMLButtonElement","isInsideTaskItem","latestMouseupTarget","updatableActiveElement","UPDATABLE_INTERACTIVE_TARGET","updatableMouseupElement","activeElementIsSafe","hasFocus","hasMousedown","markedAsDirty","formFieldValueChanged","defaultChecked","test","stopImmediatePropagation","defaultPrevented","action","method","preserveAnchorNodePosition","callback","preservePosition","hoverElements","findAnchorNode","anchorNode","node","origBoundingRects","rects","_element$getBoundingC","computeAncestorBoundingRects","origBoundingRect","firstAttachedBoundingRect","origTop","origLeft","_node$getBoundingClie","scrollOffsets","scrollBy","origScroll","newScroll","_window$getComputedSt","cumulativeX","cumulativeY","scrolled","cumulativeScrollBy","WeakMap","newContent","elementToRefocus","detailsIds","Array","from","tagName","preserveElement","heights","replaceWith","constructor","ready","readyState","loaded","handlers","ran","hashChange","handler","runHandlers","runRemainingHandlers","handlersToRun","oldURL","newURL","ieOldURL","pjaxOldURL","supportsTransitions","isTransitioningHeight","transitionProperty","withoutTransition","cb","style","transition","toggleGroup","group","otherContainer","filter","groupMembers","updateOpenState","containerTargets","toggleDetailsTarget","force","withGroup","els","transitionHeight","display","visibility","boxSizing","currentHeight","performTransition","autofocusEls","autofocusEl","restoreAutofocus","blur","hideTooltip","handleDetailsTargetClick","ensureExpanded","toCollapse","closeButton","supportedFields","checkValidityForRequiredValueField","requiredValue","prefix","setCustomValidity","validate","previousValid","checkValidity","currentValid","installedForms","validity","disabled","installHandlers","radioInputDefault","customValidity","radio","SCORE_MIN","islower","isupper","toUpperCase","compute","needle","haystack","D","M","lower_needle","lower_haystack","match_bonus","last_ch","ch","precompute_bonus","prev_score","gap_score","j","hasMatch","getScore","minScore","fuzzyScore","highlightElement","lastPosition","positions","match_required","createTextNode","mark","textContent","sorting","states","textCache","getTextCache","FuzzyListElement","list","Set","inputEl","MutationObserver","mutations","update","mutation","addedNodes","HTMLLIElement","childList","state","lazyItems","disconnect","dataset","render","Boolean","oldSortAbort","sortAbort","markSelector","maxMatches","shouldMark","itemsToRender","splice","checkedInputBeforeFilter","offset","nextBatch","fragment","createDocumentFragment","itemToRender","inputStateReset","checkedInput","Event","emptyEl","removeAttribute","isNaN","observedAttributes","oldValue","newValue","getPlatform","runningOnPlatform","platforms","platform","customElements","define","sessionHistoryOffset","getState","safeGetHistory","setState","newState","uniqueId","pushState","oldState","title","_id","done","reject","initializeState","NaN","schedule","pjaxHeadCache","pjaxReplaceCache","replaceCachedElements","cached","elem","pjaxReplace","replaceTransientTags","head","findElementByFragmentName","decodeFragmentValue","getElementsByName","decodeURIComponent","contents","children","features","isFeatureEnabled","detectProxySite","hostname","stats","sendStats","stat","flushImmediately","timestamp","loggedIn","flushStats","queued","requestIdleCallback","scheduleSendStats","sendBeacon","previousController","dispatch","pjaxRequest","dataType","requestUrl","parseURL","context","contextSelector","getContainerSelector","encodeURIComponent","fetching","links","findLinks","popPrefetchResponseForRequest","X-PJAX","X-PJAX-Container","cloneContents","cacheMapping","cacheBackStack","trimCacheStack","cacheForwardStack","allowed","serverUrl","responseUrl","stripInternalParams","pjaxFailureReason","locationReplace","previousState","currentVersion","getElementsByTagName","findVersion","latestVersion","obj","resolveUrl","fullDocument","headMatch","bodyMatch","titles","findAll","HTMLTitleElement","matchingFragments","flatMap","firstNode","scripts","HTMLScriptElement","script","stylesheets","stylesheet","extractContainer","containerUrl","reason","blurFocus","replaceWithNodes","existingScripts","src","some","newScript","executeScriptTags","existingStylesheets","injectStyleTags","initialPop","initialURL","initialState","cloned","now","nodes","klass","concat","fallbackUrl","stack","lines","parseBlobOffset","freeze","lineMatch","columnMatch","lookAhead","lineElement","textNodes","getAllTextNodes","textNode","nextC","nextTextNode","TEXT_NODE","offsets","compareBlobOffsets","maxLength","remainingEl","suffix","remainingCount","showRemainingCharacterCount","readCookies","samesite","sendOctoEvent","_octo","unixTimeInSeconds","metaSelector","direction","cachedAt","pushStack","popStack","poppedId","cachePop","dimensions","measures","dimensionsList","metaTags","metaTag","visitorMeta","visitorHash","parse","atob","parts","category","dimensionPair","editor","originalString","abbreviation","stringLength","totalCharacterScore","shouldAwardCommonPrefixBonus","indexCLowercase","indexCUppercase","minIndex","indexInString","charAt","abbreviationLength","abbreviationScore","finalScore","success","modal","opener","close","fallback","listening","notificationShelfHeight","stickySets","manageObservers","checkElementsForStickingHandler","forceStickyRelayout","checkElementsForSticking","placeholder","elementBox","placeholderBox","withShelfOffset","unpinSet","updatePinnedSet","pinSet","setTopImportant","marginTop","parentBox","findOrCreatePlaceholder","browserHasSticky","previousElement","previousElementSibling","div","parentNode","insertBefore","initializeSet","oldPosition","getOriginalTop","createSet","updateTopOffsets","updateTopOffset","originalTop","setProperty","computeFixedYOffset","jsStickyEls","positionStickyEls","topStyleValue","parentTop","hydroEventPayload","hydroEventHmac","visitorPayload","visitorHmac","trackView","idx","removeSet","shelfEl","initializeNotificationShelf","FEATURE_WEIGHTS","scorer","pageViews","frequencies","totalVisits","reduce","total","view","visitCount","keys","pageKey","frequencyMap","recencies","recencyList","lastVisitedAt","totalUniqueVisits","recencyMap","frequency","recency","views","getPageViewsMap","hit","setPageViewsMap","scorePage","ranked","MAX_PAGE_VIEWS_TO_STORE_IN_LOCAL_STORAGE","fromEntries","limitedPageViews","organizationLogin","teamSlug","ownerLogin","PAGE_VIEW_KEY_REGEX","VIEWS_KEY","localStorage","setItem","rawData","getItem","pageViewMap","NoOpStorage","safeStorage","storageKey","throwQuotaErrorsOnSet","global","storage","removeItem","o","ArrayBuffer","Uint8Array","charCodeAt","fromCharCode","btoa","entries","schema","required","transports","appid","appidExclude","credProps","publicKey","rp","user","displayName","challenge","pubKeyCredParams","timeout","excludeCredentials","authenticatorSelection","attestation","extensions","rawId","clientDataJSON","attestationObject","mediation","rpId","allowCredentials","userVerification","authenticatorData","signature","userHandle","supported","webauthnSupportLevel","webauthnSupported","sudoPromptExist","loadPromptTemplate","HTMLTemplateElement","URL","origin","params","urlWithParams","succeeded","enableTaskList","taskLists","TaskListsElement","buttons","disableTaskList","saveTaskList","track","updateProgress","previousTracking","previousOperation","tracking","operation","remoteForm","wants","errorMessage","dst","stale","commentField","reload","source","handleAutocomplete","isIMEVisible","tryAutoCompleteOnBeforeInput","ev","isNewLine","inputType","autoCompleteOnInput","selection","previousLine","TASK_LIST_RE","listPrefix","indentation","bullet","numericBullet","hasCheckbox","newPrefix","currentLineEnd","currentLine","autocompletePrefix","offsetWithoutPrefix","autocompletedList","listAutocomplete","handleShiftEnter","INDENTATION_RE","addSoftNewline","onCompositionStart","onCompositionEnd","updateIndentation","selectionDirection","deselectText","substract","endOffsetPreNormalization","selectedLines","startUpdated","selectionStartDiff","selectionEndDiff","updatedSelectedLines","lineText","prevLength","linesString","newRange","indent","checkboxes","completed","checkbox","progressComponents","progress","ActionsPolicyFormElement","submitButton","toggleSpecificOptions","selectRadio","specificOptions","prefetchCodespaceLocation","setLocationInputValue","locationInput","locationsURL","locationJSON","fetchLocationValues","current","focusForm","comments","blurForm","reset","__decorate","multiLinePreview","confirm","DiffPosition","diffId","side","lineNumber","anchor","R","L","anchorSuffix","otherPosition","DiffRange","startSide","startLineNumber","endSide","endLineNumber","isParsed","isSplit","_rows","_isAcrossHunks","_isContextOnly","_includesExpandedLine","diffTable","lineCount","is","lineNumbers","unify","filterInRange","expandRelatedElements","unified","additions","deletions","startIndex","endIndex","newStart","newEnd","splitDiff","firstElement","lastElement","firstElementTR","lastElementTR","expandedSet","row","additionOrDeletion","matchHash","diffAnchorMatch","discussionAnchorMatch","showMultiLineCommentForm","isDraggingForComment","waitingForDragFrom","isMultiLineCommentingEnabled","isMultiLineCommentAllowed","expandedRange","isContextOnly","isAcrossHunks","includesExpandedLine","isSelecting","setSelection","canExpand","targetLineAnchor","parsedAnchor","endLine","trackingElement","diffRange","hydroContextAttributes","starting_diff_position","ending_diff_position","line_count","sendHydroEvent","buttonSelector","sideForCommenting","nearestLinkableLineNumber","handleClick","handleDragMouseEvent","table","removeCommentSelectionEvents","beginDrag","cell","lineNumberElement","codeElement","commentSelectionMouseverToCode","addCommentSelectionEvents","startLine","firstCell","leftLineNumbers","leftLineCodes","rightLineNumbers","rightLineCodes","rows","leftNumber","leftCode","rightNumber","rightCode","doBorder","array","prevElement","nextElement","drawBorderForSplit","trs","firstTR","lastTR","drawBorderForUnified","parent","loader"],"mappings":"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"}